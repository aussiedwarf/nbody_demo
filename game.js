var External;(()=>{var e={329:e=>{function t(){this.NTSCsystem=new r("NTSC",.67,.33,.21,.71,.14,.08,.3101,.3162,0),this.EBUsystem=new r("EBU (PAL/SECAM)",.64,.33,.29,.6,.15,.06,.3127,.3291,0),this.SMPTEsystem=new r("SMPTE",.63,.34,.31,.595,.155,.07,.3127,.3291,0),this.HDTVsystem=new r("HDTV",.67,.33,.21,.71,.15,.06,.3127,.3291,0),this.CIEsystem=new r("CIE",.7355,.2645,.2658,.7243,.1669,.0085,.33333333,.33333333,0),this.Rec709system=new r("CIE REC 709",.64,.33,.3,.6,.15,.06,.3127,.3291,0),this.color=new Array,this.startTemp=700,this.lastTemp=3e4,this.tempIncrement=50,this.numTemp=Math.floor((this.lastTemp-this.startTemp)/this.tempIncrement)+1;for(var e=this.startTemp,t=0;e<=this.lastTemp;){var a=vec3.create(),s=vec3.create();this.spectrum_to_xyz(e,a),this.xyz_to_rgb(this.Rec709system,a,s),this.constrain_rgb(s),this.norm_rgb(s),this.color[t]=vec3.fromValues(s.x,s.y,s.z),e+=this.tempIncrement,t++}}function r(e,t,r,a,s,o,n,i,u,l){this.name=e,this.xRed=t,this.yRed=r,this.xGreen=a,this.yGreen=s,this.xBlue=o,this.yBlue=n,this.xWhite=i,this.yWhite=u,this.gamma=l}t.prototype.GetColor=function(e){var t=e;t<this.startTemp&&(t=this.startTemp),t>this.lastTemp&&(t=this.lastTemp),t=(t-this.startTemp)/this.tempIncrement;var r=Math.floor(t);return r<0&&(r=0),r>=this.numTemp&&(r=this.numTemp-1),this.color[r]},t.prototype.upvp_to_xy=function(e,t,r,a){},t.prototype.xy_to_upvp=function(e,t,r,a){},t.prototype.xyz_to_rgb=function(e,t,r){var a,s,o,n,i,u,l,c,h,d,m,p,v,f,M,g,x,b,S,w,y,I,R,E,D=t.x,B=t.y,A=t.z;o=1-((a=e.xRed)+(s=e.yRed)),u=1-((n=e.xGreen)+(i=e.yGreen)),v=i*(h=1-((l=e.xBlue)+(c=e.yBlue)))-c*u,g=c*o-s*h,S=s*u-i*o,v/=I=(v*(d=e.xWhite)+(f=l*u-n*h)*(m=e.yWhite)+(M=n*c-l*i)*(p=1-(d+m)))/m,f/=I,M/=I,g/=R=(g*d+(x=a*h-l*o)*m+(b=l*s-a*c)*p)/m,x/=R,b/=R,S/=E=(S*d+(w=n*o-a*u)*m+(y=a*i-n*s)*p)/m,w/=E,y/=E,r.x=v*D+f*B+M*A,r.y=g*D+x*B+b*A,r.z=S*D+w*B+y*A},t.prototype.inside_gamut=function(e){return e.x>=0&&e.y>=0&&e.z>=0},t.prototype.constrain_rgb=function(e){var t;return(t=-(t=(t=(t=0<e.x?0:e.x)<e.y?t:e.y)<e.z?t:e.z))>0?(e.x+=t,e.y+=t,e.z+=t,1):0},t.prototype.gamma_correct=function(e,t){var r;if((r=e.gamma)==GAMMA_REC709){var a=.018;t<a?t*=(1.099*Math.pow(a,.45)-.099)/a:t=1.099*Math.pow(t,.45)-.099}else t=Math.pow(t,1/r);return t},t.prototype.gamma_correct_rgb=function(e,t){t.x=this.gamma_correct(e,t.x),t.y=this.gamma_correct(e,t.y),t.z=this.gamma_correct(e,t.z)},t.prototype.norm_rgb=function(e){var t=Math.max(e.x,Math.max(e.y,e.z));t>0&&(e.x/=t,e.y/=t,e.z/=t)},t.prototype.spectrum_to_xyz=function(e,t){var r,a,s,o=0,n=0,i=0,u=[[.0014,0,.0065],[.0022,1e-4,.0105],[.0042,1e-4,.0201],[.0076,2e-4,.0362],[.0143,4e-4,.0679],[.0232,6e-4,.1102],[.0435,.0012,.2074],[.0776,.0022,.3713],[.1344,.004,.6456],[.2148,.0073,1.0391],[.2839,.0116,1.3856],[.3285,.0168,1.623],[.3483,.023,1.7471],[.3481,.0298,1.7826],[.3362,.038,1.7721],[.3187,.048,1.7441],[.2908,.06,1.6692],[.2511,.0739,1.5281],[.1954,.091,1.2876],[.1421,.1126,1.0419],[.0956,.139,.813],[.058,.1693,.6162],[.032,.208,.4652],[.0147,.2586,.3533],[.0049,.323,.272],[.0024,.4073,.2123],[.0093,.503,.1582],[.0291,.6082,.1117],[.0633,.71,.0782],[.1096,.7932,.0573],[.1655,.862,.0422],[.2257,.9149,.0298],[.2904,.954,.0203],[.3597,.9803,.0134],[.4334,.995,.0087],[.5121,1,.0057],[.5945,.995,.0039],[.6784,.9786,.0027],[.7621,.952,.0021],[.8425,.9154,.0018],[.9163,.87,.0017],[.9786,.8163,.0014],[1.0263,.757,.0011],[1.0567,.6949,.001],[1.0622,.631,8e-4],[1.0456,.5668,6e-4],[1.0026,.503,3e-4],[.9384,.4412,2e-4],[.8544,.381,2e-4],[.7514,.321,1e-4],[.6424,.265,0],[.5419,.217,0],[.4479,.175,0],[.3608,.1382,0],[.2835,.107,0],[.2187,.0816,0],[.1649,.061,0],[.1212,.0446,0],[.0874,.032,0],[.0636,.0232,0],[.0468,.017,0],[.0329,.0119,0],[.0227,.0082,0],[.0158,.0057,0],[.0114,.0041,0],[.0081,.0029,0],[.0058,.0021,0],[.0041,.0015,0],[.0029,.001,0],[.002,7e-4,0],[.0014,5e-4,0],[.001,4e-4,0],[7e-4,2e-4,0],[5e-4,2e-4,0],[3e-4,1e-4,0],[2e-4,1e-4,0],[2e-4,1e-4,0],[1e-4,0,0],[1e-4,0,0],[1e-4,0,0],[0,0,0]];for(r=0,a=380;a<780.1;r++,a+=5){var l;o+=(l=this.bb_spectrum(a,e))*u[r][0],n+=l*u[r][1],i+=l*u[r][2]}s=o+n+i,t.x=o/s,t.y=n/s,t.z=i/s},t.prototype.bb_spectrum=function(e,t){var r=1e-9*e;return 374183e-21*Math.pow(r,-5)/(Math.exp(.014388/(r*t))-1)},e.exports=t},573:(e,t,r)=>{Rings=r(865),Body=r(707),BodyResources=r(612);var a=1/180*Math.PI;e.exports.LoadBodies=function(e,t){var r=0;e[r]=new Body,e[r].mass=1.9891e30,e[r].radius=696342e3,e[r].temperature=5772,e[r].pos[2]=0,e[r].name="Sun",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=33022e19,e[r].radius=2439700,e[r].radius=6051800,e[r].obliquity=28.58634*a,e[r].ra=281.00544*a,e[r].rotation=124001e-9,e[r].pos[0]=-23683504916.47789,e[r].pos[1]=-65448945779.89344,e[r].pos[2]=-3174543025.25338,e[r].vel[0]=36017.44810515275,e[r].vel[1]=-14163.24920449556,e[r].vel[2]=-4461.919176177336,e[r].albedo=.142,vec3.set(e[r].color,96/255,98/255,112/255),e[r].name="Mercury",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/mercury/mercury_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[r].resources.imageSplit=!1,e[++r]=new Body,e[r].mass=48676e20,e[r].radius=6051800,e[r].obliquity=(90-67.16)*a,e[r].ra=272.76*a,e[r].rotation=-2.9924e-7,e[r].pos[0]=-67699714256.03165,e[r].pos[1]=-84517873364.40755,e[r].pos[2]=2749078241.90325,e[r].vel[0]=27088.23966188677,e[r].vel[1]=-22058.76957591686,e[r].vel[2]=-1865.606620441751,e[r].albedo=.67,vec3.set(e[r].color,227/255,158/255,28/255),e[r].atmosphere=vec4.fromValues(.85,.84,.38,.875),e[r].rayleighWavelength=vec3.fromValues(687e-7,16e-5,.0392),e[r].mieWavelength=vec3.fromValues(.08,.08,.003),e[r].heightScaleRayleigh=1,e[r].heightScaleMie=20,e[r].g=-.2,e[r].name="Venus",e[r].atmosphereHeight=8e4,e[r].resources=new BodyResources,e[r].resources.textureLocation="images/venus/venus_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=597219e19,e[r].radius=6371e3,e[r].rotation=7292115e-11,e[r].pos[0]=-28215705936.81013,e[r].pos[1]=144366914377.1284,e[r].pos[2]=-3946930.724494778,e[r].vel[0]=-29714.28462497866,e[r].vel[1]=-5814.802286683457,e[r].vel[2]=.1228093872283429,e[r].albedo=.367,vec3.set(e[r].color,107/255,147/255,214/255),e[r].atmosphere=vec4.fromValues(0,.5,1,.25),e[r].rayleighWavelength=vec3.fromValues(58e-5,.00135,.00331),e[r].mieWavelength=vec3.fromValues(.004,.004,.004),e[r].heightScaleRayleigh=8,e[r].heightScaleMie=10,e[r].g=-.76,e[r].atmosphereHeight=8e4,e[r].cloudHeight=1e4,e[r].name="Earth",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/earth/earth_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[r].resources.imageSplit=!1,e[r].resources.textureSpecularLocation="images/earth/earth_specular",e[++r]=new Body,e[r].mass=73477e18,e[r].radius=1737100,e[r].rotOffset=270*a,e[r].obliquity=(90-65.62575)*a,e[r].ra=273.05041*a,e[r].rotation=2*Math.PI/27.321582/24/60/60,e[r].pos[0]=-28543605880.70875,e[r].pos[1]=144580972646.826,e[r].pos[2]=-3912503.072661793,e[r].vel[0]=-30225.98389004648,e[r].vel[1]=-6674.024434448654,e[r].vel[2]=7152011014060441e-21,e[r].albedo=.12,vec3.set(e[r].color,77/255,77/255,77/255),e[r].name="Moon",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/moon/moon_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=54185e19,e[r].radius=3389500,e[r].obliquity=37.12142*a,e[r].ra=317.66763*a,e[r].rotation=7088218e-11,e[r].pos[0]=162267893812.385,e[r].pos[1]=-128721036315.414,e[r].pos[2]=-6681036567.495599,e[r].vel[0]=15979.87037799253,e[r].vel[1]=21052.59176654315,e[r].vel[2]=48.73952667278816,e[r].albedo=.15,vec3.set(e[r].color,193/255,68/255,14/255),e[r].atmosphere=vec4.fromValues(0,.5,1,.25),e[r].rayleighWavelength=vec3.fromValues(19918e-8,1357e-7,575e-7),e[r].mieWavelength=vec3.fromValues(.4,4e-4,4e-4),e[r].heightScaleRayleigh=10.8,e[r].heightScaleMie=7,e[r].g=-.76,e[r].atmosphereHeight=1e5,e[r].name="Mars",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/mars/mars_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=1072e13,e[r].radius=11266.7,e[r].pos[0]=162275688969.7752,e[r].pos[1]=-128717392555.1214,e[r].pos[2]=-6684509470.561412,e[r].vel[0]=15290.26595166423,e[r].vel[1]=23043.17786707488,e[r].vel[2]=524.7796091737195,e[r].albedo=.017,e[r].name="Phobos",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=148e13,e[r].radius=6200,e[r].pos[0]=162250195332.5524,e[r].pos[1]=-128734579129.5513,e[r].pos[2]=-6673700790.557107,e[r].vel[0]=16642.55258257575,e[r].vel[1]=19955.45614503285,e[r].vel[2]=-378.2542171377716,e[r].albedo=.068,e[r].name="Demios",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=943e18,e[r].radius=473e3,e[r].obliquity=31*a,e[r].ra=291*a,e[r].rotation=274962e-10,e[r].pos[0]=975949842.6211764,e[r].pos[1]=397506487087.1449,e[r].pos[2]=12308572819.9773,e[r].vel[0]=-18284.5318103654,e[r].vel[1]=-1275.567210360672,e[r].vel[2]=3331.277305758708,e[r].albedo=.09,e[r].name="Ceres",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/ceres/ceres_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=259076e15,e[r].radius=267700,e[r].obliquity=48.6*a,e[r].ra=305.8*a,e[r].rotation=2*Math.PI/(320.52*60),e[r].pos[0]=48542625801.41933,e[r].pos[1]=380812412556.1579,e[r].pos[2]=-17320917494.02031,e[r].vel[0]=-17512.13541570324,e[r].vel[1]=2085.968233673166,e[r].vel[2]=2066.806524047855,e[r].albedo=.423,e[r].name="Vesta",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=211e18,e[r].radius=256e3,e[r].obliquity=93*a,e[r].ra=33*a,e[r].rotation=2*Math.PI/28127.52,e[r].pos[0]=369068594175.6752,e[r].pos[1]=126928507684.1303,e[r].pos[2]=-118465781926.0818,e[r].vel[0]=-11233.23129199187,e[r].vel[1]=12185.26337279225,e[r].vel[2]=-7484.398959073641,e[r].albedo=.159,e[r].name="Pallas",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=867e17,e[r].radius=1307e3/3/2,e[r].obliquity=90*a,e[r].ra=0*a,e[r].rotation=2*Math.PI/99468,e[r].pos[0]=481230377358.7255,e[r].pos[1]=-70661542774.38214,e[r].pos[2]=30333531478.31995,e[r].vel[0]=4064.292587250239,e[r].vel[1]=15655.26616747368,e[r].vel[2]=.05094370867156748,e[r].albedo=.0717,e[r].name="Hygiea",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=18986e23,e[r].radius=69911e3,e[r].obliquity=(90-64.49708)*a,e[r].ra=268.05652*a,e[r].rotation=175865e-9,e[r].pos[0]=212668011508.9506,e[r].pos[1]=727015094287.4835,e[r].pos[2]=-7778369296.028078,e[r].vel[0]=-12709.4612620855,e[r].vel[1]=4294.518997357705,e[r].vel[2]=266.614334430141,e[r].albedo=.52,vec3.set(e[r].color,169/255,115/255,69/255),e[r].name="Jupiter",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/jupiter/jupiter_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=4096,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=89319e18,e[r].radius=1821600,e[r].pos[0]=212314339985.8808,e[r].pos[1]=727241738874.9847,e[r].pos[2]=-7775255107.917756,e[r].vel[0]=-22111.12940598992,e[r].vel[1]=-10339.66920115159,e[r].vel[2]=-406.3865182975506,e[r].name="Io",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=48e21,e[r].radius=1560800,e[r].pos[0]=213187569974.0742,e[r].pos[1]=726600991488.1129,e[r].pos[2]=-7790786260.941148,e[r].vel[0]=-4049.030680571277,e[r].vel[1]=15121.41813483417,e[r].vel[2]=826.1488360892049,e[r].name="Europa",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=14819e19,e[r].radius=2634100,e[r].pos[0]=211867572303.8622,e[r].pos[1]=727727372346.6812,e[r].pos[2]=-7761894949.676275,e[r].vel[0]=-19934.39223201984,e[r].vel[1]=-3815.666398262226,e[r].vel[2]=-131.3468741221515,e[r].name="Ganymede",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=10759e19,e[r].radius=2410300,e[r].pos[0]=212974684981.3662,e[r].pos[1]=725160349255.0872,e[r].pos[2]=-7833291928.791642,e[r].vel[0]=-4618.199145500765,e[r].vel[1]=5686.868086711316,e[r].vel[2]=419.7977108557449,e[r].name="Callisto",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=208e16,e[r].radius=83500,e[r].pos[0]=212785073150.4698,e[r].pos[1]=726875877946.7069,e[r].pos[2]=-7780836406.959414,e[r].vel[0]=7514.08770467205,e[r].vel[1]=21226.45137753486,e[r].vel[2]=1296.946663919303,e[r].name="Amalthea",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=67e17,e[r].radius=75e3,e[r].pos[0]=212549445035.3755,e[r].pos[1]=736343361846.2397,e[r].pos[2]=-4320476456.695914,e[r].vel[0]=-16192.76755432453,e[r].vel[1]=4020.50040430399,e[r].vel[2]=1752.713494972788,e[r].name="Himalia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=87e16,e[r].radius=4e3,e[r].pos[0]=222287050027.2964,e[r].pos[1]=726166251437.6692,e[r].pos[2]=-13331499472.57838,e[r].vel[0]=-12033.33678534234,e[r].vel[1]=7610.886024163956,e[r].vel[2]=-370.3363124420438,e[r].name="Elara",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=3e17,e[r].radius=18e3,e[r].pos[0]=231128770913.3988,e[r].pos[1]=735872292919.783,e[r].pos[2]=-15163462539.35125,e[r].vel[0]=-10524.85360728509,e[r].vel[1]=3213.05345538086,e[r].vel[2]=886.7539355412245,e[r].name="Pasiphae",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=75e15,e[r].radius=1400,e[r].pos[0]=213807238870.9407,e[r].pos[1]=750615240211.789,e[r].pos[2]=-18315982333.16594,e[r].vel[0]=-10662.55838506553,e[r].vel[1]=3635.980242362194,e[r].vel[2]=415.6153402851805,e[r].name="Sinope",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=63e15,e[r].radius=18e3,e[r].pos[0]=202137604322.0514,e[r].pos[1]=730890174293.6425,e[r].pos[2]=-6623772268.243253,e[r].vel[0]=-14360.24149875029,e[r].vel[1]=1672.423290718535,e[r].vel[2]=-1143.155884643742,e[r].name="Lysithea",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=13e16,e[r].radius=1500,e[r].pos[0]=231349929284.9253,e[r].pos[1]=734567616807.8635,e[r].pos[2]=-5124436387.335658,e[r].vel[0]=-11207.65517991175,e[r].vel[1]=2192.733362329736,e[r].vel[2]=-255.0879775130304,e[r].name="Carme",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=3e16,e[r].radius=1e4,e[r].pos[0]=190209071593.5567,e[r].pos[1]=730252220067.9358,e[r].pos[2]=-19807768875.54979,e[r].vel[0]=-12689.12402811048,e[r].vel[1]=6152.231091024158,e[r].vel[2]=-169.6233316380136,e[r].name="Ananke",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=11e15,e[r].radius=1e4,e[r].pos[0]=212137186513.4619,e[r].pos[1]=715969127238.8278,e[r].pos[2]=-2534831043.838233,e[r].vel[0]=-9733.98425012825,e[r].vel[1]=4029.486617191437,e[r].vel[2]=950.1689795665396,e[r].name="Leda",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=43e16,e[r].radius=5e4,e[r].pos[0]=212861461545.3976,e[r].pos[1]=726899347435.2869,e[r].pos[2]=-7775556763.52939,e[r].vel[0]=-775.5101005724885,e[r].vel[1]=24570.31051047034,e[r].vel[2]=1073.920466654499,e[r].name="Thebe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2e15,e[r].radius=8200,e[r].pos[0]=212780114788.7107,e[r].pos[1]=726951359964.7012,e[r].pos[2]=-7779036502.871335,e[r].vel[0]=2830.06202653196,e[r].vel[1]=31615.27266279835,e[r].vel[2]=1467.689682145506,e[r].name="Adrastea",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=36e15,e[r].radius=21500,e[r].pos[0]=212737166698.7111,e[r].pos[1]=726907442614.0409,e[r].pos[2]=-7781188267.161876,e[r].vel[0]=13843.60679297507,e[r].vel[1]=21344.77438837417,e[r].vel[2]=1267.754221418224,e[r].name="Metis",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=818e12,e[r].radius=4300,e[r].pos[0]=221111914695.1871,e[r].pos[1]=751049377371.6459,e[r].pos[2]=-24229505967.97049,e[r].vel[0]=-11134.75401045674,e[r].vel[1]=3446.936390938687,e[r].vel[2]=123.8859450369871,e[r].name="Callirrhoe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=36e15,e[r].radius=4e3,e[r].pos[0]=205635467235.808,e[r].pos[1]=722706161584.1578,e[r].pos[2]=-5508703217.484266,e[r].vel[0]=-11385.74919488222,e[r].vel[1]=2118.609086728928,e[r].vel[2]=2720.678149408516,e[r].name="Themisto",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=21e13,e[r].radius=2700,e[r].pos[0]=189823567520.2492,e[r].pos[1]=743904265474.3647,e[r].pos[2]=-14953733215.39977,e[r].vel[0]=-11235.02499483215,e[r].vel[1]=4898.070366034888,e[r].vel[2]=-551.6525595450432,e[r].name="Megaclite",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=16e13,e[r].radius=2500,e[r].pos[0]=187700611189.0319,e[r].pos[1]=723925772092.6049,e[r].pos[2]=-6608357722.730726,e[r].vel[0]=-12646.07171950785,e[r].vel[1]=6311.961452737318,e[r].vel[2]=-313.1444547073419,e[r].name="Taygete",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=12e13,e[r].radius=2e3,e[r].pos[0]=199590425613.1841,e[r].pos[1]=747955950119.2831,e[r].pos[2]=-1674649506.949663,e[r].vel[0]=-11089.1666430509,e[r].vel[1]=5594.9924577216,e[r].vel[2]=536.7288784289037,e[r].name="Chaldene",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=16e13,e[r].radius=2500,e[r].pos[0]=194128763564.8311,e[r].pos[1]=733034917205.374,e[r].pos[2]=-19357966890.58241,e[r].vel[0]=-12271.22390770715,e[r].vel[1]=6464.953636916199,e[r].vel[2]=171.8730420282855,e[r].name="Harpalyke",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=19e13,e[r].radius=2600,e[r].pos[0]=203413685399.3053,e[r].pos[1]=742530903749.3896,e[r].pos[2]=-8989671714.027077,e[r].vel[0]=-10597.22363488877,e[r].vel[1]=6231.038342194338,e[r].vel[2]=828.9857734065413,e[r].name="Kalyke",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=19483e10,e[r].radius=2600,e[r].pos[0]=199728933412.7797,e[r].pos[1]=739968901879.3398,e[r].pos[2]=-7716548202.309966,e[r].vel[0]=-11538.70098991977,e[r].vel[1]=6385.592324509172,e[r].vel[2]=-1154.349009697593,e[r].name="Iocaste",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1600,e[r].pos[0]=186914841633.8421,e[r].pos[1]=725417320894.6086,e[r].pos[2]=-7097730788.613111,e[r].vel[0]=-13464.47796880375,e[r].vel[1]=6117.932378356236,e[r].vel[2]=-260.7716807587162,e[r].name="Erinome",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=75e12,e[r].radius=1900,e[r].pos[0]=214662394596.1877,e[r].pos[1]=746854825074.4807,e[r].pos[2]=-2008815211.198151,e[r].vel[0]=-10248.67585455818,e[r].vel[1]=3469.749940536686,e[r].vel[2]=-58.75693282884642,e[r].name="Isonoe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=43e13,e[r].radius=3500,e[r].pos[0]=200428416109.3057,e[r].pos[1]=739835169653.3824,e[r].pos[2]=-8719948178.061337,e[r].vel[0]=-10689.05401246424,e[r].vel[1]=5564.898433950437,e[r].vel[2]=-1308.566047460278,e[r].name="Praxidike",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=241606128017.5243,e[r].pos[1]=732381517529.0984,e[r].pos[2]=-17015481462.31321,e[r].vel[0]=-12508.62740922342,e[r].vel[1]=2805.312900883401,e[r].vel[2]=974.9984933191214,e[r].name="Autonoe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=231671883204.9242,e[r].pos[1]=735953581972.2148,e[r].pos[2]=-21105218266.08703,e[r].vel[0]=-11514.59079303113,e[r].vel[1]=2705.58550566162,e[r].vel[2]=-167.3485218810992,e[r].name="Thyone",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=211055692740.8469,e[r].pos[1]=743060870550.7404,e[r].pos[2]=-17560459143.86347,e[r].vel[0]=-9992.343900568536,e[r].vel[1]=4363.345915071698,e[r].vel[2]=588.85053340559,e[r].name="Hermippe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=235109532099.3439,e[r].pos[1]=730606559133.7355,e[r].pos[2]=-3436099706.934035,e[r].vel[0]=-12819.65981963135,e[r].vel[1]=2009.088021423385,e[r].vel[2]=534.5802451734926,e[r].name="Aitne",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=218711867571.458,e[r].pos[1]=701018995388.395,e[r].pos[2]=5637750909.751534,e[r].vel[0]=-14408.67628706607,e[r].vel[1]=4036.848910700964,e[r].vel[2]=611.246144633146,e[r].name="Eurydome",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=208798045988.9981,e[r].pos[1]=748843831542.0704,e[r].pos[2]=-12962780788.20947,e[r].vel[0]=-10740.4028046769,e[r].vel[1]=4066.09059209978,e[r].vel[2]=-857.2962891893771,e[r].name="Euanthe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=223283315296.0593,e[r].pos[1]=738606570097.3909,e[r].pos[2]=-165596943.9014792,e[r].vel[0]=-11146.06334970741,e[r].vel[1]=2083.197657455393,e[r].vel[2]=1065.081302213733,e[r].name="Euporie",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=204563982524.3796,e[r].pos[1]=708137847995.4934,e[r].pos[2]=-5196291508.599073,e[r].vel[0]=-14859.82930784225,e[r].vel[1]=4195.759746963043,e[r].vel[2]=1591.044147976779,e[r].name="Orthosie",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=193193702889.3683,e[r].pos[1]=734973822131.4158,e[r].pos[2]=-2582027454.731166,e[r].vel[0]=-10999.82376175944,e[r].vel[1]=5851.456055652842,e[r].vel[2]=1160.270691562399,e[r].name="Sponde",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=226546849645.4994,e[r].pos[1]=716181853444.0085,e[r].pos[2]=-6269726240.120798,e[r].vel[0]=-14099.92266824852,e[r].vel[1]=1758.199264589478,e[r].vel[2]=-340.8370621491196,e[r].name="Kale",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=235987635983.3264,e[r].pos[1]=725141611696.7092,e[r].pos[2]=-5788648874.784142,e[r].vel[0]=-12346.98093066489,e[r].vel[1]=2148.542008793096,e[r].vel[2]=835.6508546895969,e[r].name="Pasithee",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=223864725451.8886,e[r].pos[1]=739193037815.448,e[r].pos[2]=-13235912073.82861,e[r].vel[0]=-9848.14233785629,e[r].vel[1]=3441.033905064874,e[r].vel[2]=800.0040925649556,e[r].name="Hegemone",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=187023334682.8829,e[r].pos[1]=725913054271.5378,e[r].pos[2]=-17458342240.77684,e[r].vel[0]=-12962.20284263568,e[r].vel[1]=5860.644971301538,e[r].vel[2]=-436.2234630654875,e[r].name="Mneme",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=199467275335.8973,e[r].pos[1]=707153054456.5955,e[r].pos[2]=-6132344867.60655,e[r].vel[0]=-13852.80037192144,e[r].vel[1]=6172.697069557665,e[r].vel[2]=1030.93946818143,e[r].name="Aoede",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=211994081442.5853,e[r].pos[1]=747206393712.7506,e[r].pos[2]=2220345585.766554,e[r].vel[0]=-10515.24407424528,e[r].vel[1]=4817.096737207361,e[r].vel[2]=-189.9936166284633,e[r].name="Thelxinoe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=237137097383.4923,e[r].pos[1]=710489961807.5593,e[r].pos[2]=-1320681714.496881,e[r].vel[0]=-13877.40677434354,e[r].vel[1]=3144.492592475117,e[r].vel[2]=458.4044887968537,e[r].name="Arche",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=186409494216.3179,e[r].pos[1]=737637050639.8807,e[r].pos[2]=-13819606609.61387,e[r].vel[0]=-11788.47664932005,e[r].vel[1]=5758.483687622463,e[r].vel[2]=421.5478508914305,e[r].name="Kallichore",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=214491474915.5596,e[r].pos[1]=706823614722.721,e[r].pos[2]=-14227010120.1598,e[r].vel[0]=-15044.51323726965,e[r].vel[1]=4681.875687582189,e[r].vel[2]=-358.1251239087508,e[r].name="Helike",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=45e12,e[r].radius=1500,e[r].pos[0]=209726814326.6094,e[r].pos[1]=710698814085.1145,e[r].pos[2]=-25681886155.86066,e[r].vel[0]=-11125.302818422,e[r].vel[1]=4618.253664658456,e[r].vel[2]=-370.6643986724965,e[r].name="Carpo",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=197411906026.2525,e[r].pos[1]=716994763379.1595,e[r].pos[2]=-4845124612.451345,e[r].vel[0]=-14335.15725800878,e[r].vel[1]=6550.288054670732,e[r].vel[2]=942.8387776914975,e[r].name="Eukelade",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=187621563918.2978,e[r].pos[1]=712161407565.2186,e[r].pos[2]=7694369889.638841,e[r].vel[0]=-13338.56084700547,e[r].vel[1]=5649.531630738156,e[r].vel[2]=27.65881361831379,e[r].name="Cyllene",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=214387085511.4517,e[r].pos[1]=744012468207.9548,e[r].pos[2]=-23485736829.02244,e[r].vel[0]=-10320.96715864632,e[r].vel[1]=4535.017344331772,e[r].vel[2]=223.9691830460717,e[r].name="Kore",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=226768326678.791,e[r].pos[1]=740992719187.7748,e[r].pos[2]=-13343155936.07417,e[r].vel[0]=-11251.81992117461,e[r].vel[1]=2167.591478642537,e[r].vel[2]=764.8804647215467,e[r].name="Herse",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e12,e[r].radius=1e3,e[r].pos[0]=194855061287.2881,e[r].pos[1]=736833920412.806,e[r].pos[2]=-8118734377.678186,e[r].vel[0]=-11120.4036534177,e[r].vel[1]=6234.63185024521,e[r].vel[2]=-462.2209596260198,e[r].name="2010J1",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=7e12,e[r].radius=500,e[r].pos[0]=189337795302.5071,e[r].pos[1]=734909528849.3319,e[r].pos[2]=-19674384099.32545,e[r].vel[0]=-11918.62404029403,e[r].vel[1]=5758.048066350216,e[r].vel[2]=-190.8486464104997,e[r].name="2010J2",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2e3,e[r].pos[0]=216579455604.9132,e[r].pos[1]=736692305115.0424,e[r].pos[2]=-5136556582.126528,e[r].vel[0]=-15817.02141102944,e[r].vel[1]=5297.360009661637,e[r].vel[2]=-1340.044402872484,e[r].name="Dia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=56846e22,e[r].radius=58232e3,e[r].obliquity=(90-83.53648)*a,e[r].ra=40.58432*a,e[r].rotation=163785e-9,e[r].pos[0]=-1208678509944.081,e[r].pos[1]=-825331191423.7843,e[r].pos[2]=62473173222.04524,e[r].vel[0]=4914.864223424588,e[r].vel[1]=-7997.303109728747,e[r].vel[2]=-56.60117174761981,e[r].albedo=.47,vec3.set(e[r].color,253/255,224/255,164/255),e[r].name="Saturn",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/saturn/saturn_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=2048,e[r].resources.textureFormat="jpg",e[r].rings=new Rings,e[++r]=new Body,e[r].mass=37493e15,e[r].radius=198200,e[r].pos[0]=-1208536204037.61,e[r].pos[1]=-825435287240.1167,e[r].pos[2]=62519547079.04565,e[r].vel[0]=13868.98606526805,e[r].vel[1]=1821.328635247824,e[r].vel[2]=-6026.820449547516,e[r].name="Mimas",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=108022e15,e[r].radius=252100,e[r].pos[0]=-1208689441352.103,e[r].pos[1]=-825542286550.4625,e[r].pos[2]=62584841847.343,e[r].vel[0]=17433.80496904738,e[r].vel[1]=-9024.796911225263,e[r].vel[2]=-729.2558174201265,e[r].name="Enceladus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=617449e15,e[r].radius=531100,e[r].pos[0]=-1208971093880.136,e[r].pos[1]=-825339467758.538,e[r].pos[2]=62507333759.9732,e[r].vel[0]=5825.26051895763,e[r].vel[1]=-17956.91147782068,e[r].vel[2]=5311.718471500623,e[r].name="Tethys",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1095452e15,e[r].radius=561400,e[r].pos[0]=-1208306080119.712,e[r].pos[1]=-825305633708.6855,e[r].pos[2]=62423671828.39772,e[r].vel[0]=3695.485831780175,e[r].vel[1]=890.5587921839121,e[r].vel[2]=-4587.809285075519,e[r].name="Dione",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2306518e15,e[r].radius=763800,e[r].pos[0]=-1208670730763.52,e[r].pos[1]=-825799665581.4825,e[r].pos[2]=62714162824.6913,e[r].vel[0]=13371.08404987951,e[r].vel[1]=-8209.368401958114,e[r].vel[2]=-756.0032106116146,e[r].name="Rhea",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/rhea/rhea_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=8192,e[r].resources.textureFormat="jpg",e[r].resources.imageSplit=!1,e[++r]=new Body,e[r].mass=13452e18,e[r].radius=2576e3,e[r].pos[0]=-1208458172557.138,e[r].pos[1]=-824268643568.1849,e[r].pos[2]=61903188717.96903,e[r].vel[0]=-497.1304186170131,e[r].vel[1]=-6750.339739132466,e[r].vel[2]=-164.6956430660294,e[r].atmosphere=vec4.fromValues(1,1,0,.25),e[r].rayleighWavelength=vec3.fromValues(58e-5,.00135,.00331),e[r].mieWavelength=vec3.fromValues(.08,.08,.004),e[r].heightScaleRayleigh=1.2,e[r].heightScaleMie=11,e[r].g=-.36,e[r].atmosphereHeight=4e4,e[r].name="Titan",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=562e16,e[r].radius=135e3,e[r].pos[0]=-1209463405046.993,e[r].pos[1]=-824310995006.5745,e[r].pos[2]=62040164864.74103,e[r].vel[0]=395.7677321862489,e[r].vel[1]=-10609.36273274108,e[r].vel[2]=1698.314997645339,e[r].name="Hyperion",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1805635e15,e[r].radius=734500,e[r].pos[0]=-1212216737507.023,e[r].pos[1]=-824586523787.0146,e[r].pos[2]=63011109620.80401,e[r].vel[0]=4366.764811910715,e[r].vel[1]=-11020.33448826616,e[r].vel[2]=757.8384480444558,e[r].name="Iapetus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=8292e15,e[r].radius=106500,e[r].pos[0]=-1195895204202.811,e[r].pos[1]=-824610779534.721,e[r].pos[2]=60919200917.01791,e[r].vel[0]=4734.412739328244,e[r].vel[1]=-9706.155567968133,e[r].vel[2]=-42.45341260717783,e[r].name="Phoebe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=18975e14,e[r].radius=89500,e[r].pos[0]=-1208668640660.83,e[r].pos[1]=-825197247792.4688,e[r].pos[2]=62402244328.94108,e[r].vel[0]=-10802.48482004679,e[r].vel[1]=-6392.342308607239,e[r].vel[2]=578.297381482876,e[r].name="Janus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=5266e14,e[r].radius=58100,e[r].pos[0]=-1208530363558.058,e[r].pos[1]=-825362772934.7394,e[r].pos[2]=62475736969.90222,e[r].vel[0]=7813.205988006279,e[r].vel[1]=5731.783735993587,e[r].vel[2]=-7427.579628758317,e[r].name="Epimetheus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2446e13,e[r].radius=17600,e[r].pos[0]=-1208466129801.233,e[r].pos[1]=-825066161232.2196,e[r].pos[2]=62314315632.3384,e[r].vel[0]=-3337.692443115635,e[r].vel[1]=-2572.676499246374,e[r].vel[2]=-2138.696569552459,e[r].name="Helene",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=941e13,e[r].radius=12400,e[r].pos[0]=-1208802463956.784,e[r].pos[1]=-825559898146.3715,e[r].pos[2]=62611664226.4984,e[r].vel[0]=15152.97461497485,e[r].vel[1]=-12692.76491804812,e[r].vel[2]=1345.48873851356,e[r].name="Telesto",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=63e14,e[r].radius=10700,e[r].pos[0]=-1208834249413.433,e[r].pos[1]=-825106823295.0938,e[r].pos[2]=62362211316.71786,e[r].vel[0]=-4690.158636505497,e[r].vel[1]=-12955.47191263258,e[r].vel[2]=3391.765422805489,e[r].name="Calypso",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=66e14,e[r].radius=15100,e[r].pos[0]=-1208596339206.424,e[r].pos[1]=-825236665221.5829,e[r].pos[2]=62415681158.38718,e[r].vel[0]=-8355.672315964726,e[r].vel[1]=1337.953102856188,e[r].vel[2]=-3661.546879905883,e[r].name="Atlas",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1595e14,e[r].radius=43100,e[r].pos[0]=-1208568058786.627,e[r].pos[1]=-825410191582.7574,e[r].pos[2]=62503852805.45023,e[r].vel[0]=14917.03424587082,e[r].vel[1]=3264.169845523274,e[r].vel[2]=-6924.795593796612,e[r].name="Prometheus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1371e14,e[r].radius=40700,e[r].pos[0]=-1208753078148.251,e[r].pos[1]=-825222204393.4532,e[r].pos[2]=62423154582.2444,e[r].vel[0]=-9008.608110022278,e[r].vel[1]=-15140.98792641035,e[r].vel[2]=5030.89038827483,e[r].name="Pandora",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=495e13,e[r].radius=14100,e[r].pos[0]=-1208616156823.37,e[r].pos[1]=-825229137979.6979,e[r].pos[2]=62413658337.80685,e[r].vel[0]=-9955.452171618592,e[r].vel[1]=-394.9325060168571,e[r].vel[2]=-2599.888390420158,e[r].name="Pan",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=51e14,e[r].radius=9e3,e[r].pos[0]=-1191975531823.87,e[r].pos[1]=-808856459304.853,e[r].pos[2]=62437639333.47747,e[r].vel[0]=6041.275172744116,e[r].vel[1]=-8560.006494934281,e[r].vel[2]=-205.0891804069432,e[r].name="Ymir",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=725e13,e[r].radius=11e3,e[r].pos[0]=-1209059671682.062,e[r].pos[1]=-812479594285.2097,e[r].pos[2]=74546479970.7528,e[r].vel[0]=3813.996959502355,e[r].vel[1]=-8339.276245889458,e[r].vel[2]=-714.2235272746045,e[r].name="Paaliaq",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e14,e[r].radius=7500,e[r].pos[0]=-1216828279886.025,e[r].pos[1]=-842705616531.1921,e[r].pos[2]=63768159675.31404,e[r].vel[0]=6010.011368024829,e[r].vel[1]=-7625.834076280058,e[r].vel[2]=-777.4685881726842,e[r].name="Tarvos",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=118e13,e[r].radius=7e3,e[r].pos[0]=-1202784801497.337,e[r].pos[1]=-817176971348.2074,e[r].pos[2]=50914521931.0765,e[r].vel[0]=3787.478360318464,e[r].vel[1]=-7436.975688818996,e[r].vel[2]=111.0657272728011,e[r].name="Ijiraq",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1187500657331.505,e[r].pos[1]=-827955662094.2363,e[r].pos[2]=60344703096.53023,e[r].vel[0]=4756.822928662998,e[r].vel[1]=-9246.85374346476,e[r].vel[2]=-57.95644996609051,e[r].name="Suttungr",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=279e13,e[r].radius=8e3,e[r].pos[0]=-1212353328890.802,e[r].pos[1]=-818901937348.8359,e[r].pos[2]=68893553785.69096,e[r].vel[0]=2945.106849420194,e[r].vel[1]=-8209.549696228256,e[r].vel[2]=-736.6408397608177,e[r].name="Kiviuq",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1190505353345.834,e[r].pos[1]=-819835875780.3309,e[r].pos[2]=66030819516.94763,e[r].vel[0]=5591.476869831603,e[r].vel[1]=-9194.495282449992,e[r].vel[2]=59.37414401960561,e[r].name="Mundilfari",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=223e14,e[r].radius=16e3,e[r].pos[0]=-1207626274730.958,e[r].pos[1]=-837696925712.4246,e[r].pos[2]=62059236574.18719,e[r].vel[0]=6349.086633271283,e[r].vel[1]=-8887.583724159455,e[r].vel[2]=-1019.154634397282,e[r].name="Albiorix",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=35e13,e[r].radius=4e3,e[r].pos[0]=-1221214569067.151,e[r].pos[1]=-821045707693.8765,e[r].pos[2]=68753462068.84637,e[r].vel[0]=5512.25413196447,e[r].vel[1]=-6603.269710577469,e[r].vel[2]=-716.749205462901,e[r].name="Skathi",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=68e13,e[r].radius=5e3,e[r].pos[0]=-1224027299116.046,e[r].pos[1]=-836239246395.4171,e[r].pos[2]=76568112427.66406,e[r].vel[0]=5184.26672976661,e[r].vel[1]=-8966.20252233769,e[r].vel[2]=206.2734223118987,e[r].name="Erriapus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=435e14,e[r].radius=2e4,e[r].pos[0]=-1195122707124.803,e[r].pos[1]=-817807768286.8876,e[r].pos[2]=57271427548.98429,e[r].vel[0]=4142.454632159213,e[r].vel[1]=-7204.754961455923,e[r].vel[2]=1091.423450649525,e[r].name="Siarnaq",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1182127872046.727,e[r].pos[1]=-825647132573.3043,e[r].pos[2]=59875977993.3084,e[r].vel[0]=5316.214318388174,e[r].vel[1]=-8912.650489073247,e[r].vel[2]=-102.7608157818611,e[r].name="Thrymr",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=7e3,e[r].pos[0]=-1195387437194.923,e[r].pos[1]=-827996942642.7607,e[r].pos[2]=58639487822.8569,e[r].vel[0]=4401.786561497993,e[r].vel[1]=-9370.560494365682,e[r].vel[2]=-1181.836738124355,e[r].name="Narvi",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2e13,e[r].radius=1600,e[r].pos[0]=-1208573835644.533,e[r].pos[1]=-825479962457.0565,e[r].pos[2]=62540925369.57207,e[r].vel[0]=16639.75199124133,e[r].vel[1]=-1745.282586150642,e[r].vel[2]=-4466.907612402345,e[r].name="Methone",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=5e13,e[r].radius=3500,e[r].pos[0]=-1208498673836.168,e[r].pos[1]=-825436156404.1567,e[r].pos[2]=62510394060.67309,e[r].vel[0]=11871.63325761466,e[r].vel[1]=1904.546552685703,e[r].vel[2]=-5876.459337829949,e[r].name="Pallene",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2e13,e[r].radius=1600,e[r].pos[0]=-1208581219557.588,e[r].pos[1]=-825657127127.1387,e[r].pos[2]=62635494235.44493,e[r].vel[0]=14621.92152035999,e[r].vel[1]=-6252.589278413563,e[r].vel[2]=-1930.489631714042,e[r].name="Polydeuces",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=77e12,e[r].radius=3800,e[r].pos[0]=-1208749114823.419,e[r].pos[1]=-825431725627.7772,e[r].pos[2]=62532687232.77941,e[r].vel[0]=19144.37635042587,e[r].vel[1]=-16246.92867072813,e[r].vel[2]=2889.226697812036,e[r].name="Daphnis",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1230642938615.255,e[r].pos[1]=-815694983725.8041,e[r].pos[2]=66043484208.95904,e[r].vel[0]=5097.239546118614,e[r].vel[1]=-6897.661483643565,e[r].vel[2]=151.8076725912167,e[r].name="Aegir",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1201962887132.027,e[r].pos[1]=-833385066322.3909,e[r].pos[2]=71108213658.11703,e[r].vel[0]=6713.294572363297,e[r].vel[1]=-7691.009361987938,e[r].vel[2]=-46.49763141760221,e[r].name="Bebhionn",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1222371189166.116,e[r].pos[1]=-841705469712.0428,e[r].pos[2]=61197908261.22919,e[r].vel[0]=4058.236920974299,e[r].vel[1]=-7183.974177007444,e[r].vel[2]=401.7703530177359,e[r].name="Bergelmir",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1215059188464.727,e[r].pos[1]=-813644469194.5312,e[r].pos[2]=60619679704.94381,e[r].vel[0]=5696.740897834085,e[r].vel[1]=-6574.812360315316,e[r].vel[2]=-1114.719381620845,e[r].name="Bestla",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=9e13,e[r].radius=2500,e[r].pos[0]=-1205922738464.974,e[r].pos[1]=-809039789983.4371,e[r].pos[2]=69143263734.12679,e[r].vel[0]=6425.71386433682,e[r].vel[1]=-8088.437040784633,e[r].vel[2]=246.1472399663123,e[r].name="Farbauti",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=5e13,e[r].radius=2e3,e[r].pos[0]=-1193764953231.555,e[r].pos[1]=-811333941164.8756,e[r].pos[2]=59703124858.28531,e[r].vel[0]=5934.846594311693,e[r].vel[1]=-8900.831092644907,e[r].vel[2]=-432.5787422424257,e[r].name="Fenrir",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1190977440713.567,e[r].pos[1]=-807897589511.31,e[r].pos[2]=57674527824.47132,e[r].vel[0]=5523.141087247237,e[r].vel[1]=-9062.910584593388,e[r].vel[2]=-137.5282512202558,e[r].name="Fornjot",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=6e3,e[r].pos[0]=-1210655631669.661,e[r].pos[1]=-837131049114.1328,e[r].pos[2]=65942916452.99223,e[r].vel[0]=2902.638561531718,e[r].vel[1]=-7962.544503666626,e[r].vel[2]=291.1639885795254,e[r].name="Hati",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=35e13,e[r].radius=4e3,e[r].pos[0]=-1219571412964.9,e[r].pos[1]=-832653679941.7822,e[r].pos[2]=59641428928.55465,e[r].vel[0]=4674.029208615903,e[r].vel[1]=-6190.311883946189,e[r].vel[2]=-580.2762893033417,e[r].name="Hyrrokkin",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1205618508164.948,e[r].pos[1]=-854183279617.9432,e[r].pos[2]=69713607724.51904,e[r].vel[0]=4160.19596369848,e[r].vel[1]=-7682.361520633019,e[r].vel[2]=323.6088658350935,e[r].name="Kari",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1221393677666.072,e[r].pos[1]=-800659607873.6154,e[r].pos[2]=57505255953.33225,e[r].vel[0]=5827.752651241472,e[r].vel[1]=-7614.262671140154,e[r].vel[2]=-199.9685483853617,e[r].name="Loge",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1204416207987.295,e[r].pos[1]=-850532815815.1561,e[r].pos[2]=66939237104.61634,e[r].vel[0]=4110.471887068504,e[r].vel[1]=-8014.164242877506,e[r].vel[2]=284.7264499220756,e[r].name="Skoll",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1220119583799.247,e[r].pos[1]=-834682357211.2356,e[r].pos[2]=65409412878.07944,e[r].vel[0]=3353.668947155392,e[r].vel[1]=-7106.528390884569,e[r].vel[2]=343.8371785885468,e[r].name="Surtur",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=7e12,e[r].radius=500,e[r].pos[0]=-1208701270226.409,e[r].pos[1]=-825156443331.58,e[r].pos[2]=62383765579.71793,e[r].vel[0]=-8816.267129806936,e[r].vel[1]=-8848.526543265061,e[r].vel[2]=1718.040899331289,e[r].name="Anthe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1189860729749.267,e[r].pos[1]=-817997691648.4835,e[r].pos[2]=62827861610.89337,e[r].vel[0]=5681.317193010167,e[r].vel[1]=-9045.89667367008,e[r].vel[2]=295.4398979008395,e[r].name="Jarnsaxa",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e13,e[r].radius=3e3,e[r].pos[0]=-1215124650576.604,e[r].pos[1]=-838252971896.9716,e[r].pos[2]=64233516733.3366,e[r].vel[0]=3516.629786651217,e[r].vel[1]=-6903.768749569926,e[r].vel[2]=-140.5750579282632,e[r].name="Greip",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e13,e[r].radius=3500,e[r].pos[0]=-1200076558156.25,e[r].pos[1]=-811972733553.712,e[r].pos[2]=53458154587.17495,e[r].vel[0]=4208.996376830989,e[r].vel[1]=-7140.353579555809,e[r].vel[2]=838.9399992282487,e[r].name="Tarqeq",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1e11,e[r].radius=250,e[r].pos[0]=-1208725283430.747,e[r].pos[1]=-825186901056.0758,e[r].pos[2]=62402094900.20347,e[r].vel[0]=-9497.897488853094,e[r].vel[1]=-11169.73483827088,e[r].vel[2]=3001.798025816664,e[r].name="Aegaeon",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=861e23,e[r].radius=25362e3,e[r].obliquity=105.175*a,e[r].ra=257.311*a,e[r].rotation=-1012e-7,e[r].pos[0]=2975511506791.661,e[r].pos[1]=385246829916.4181,e[r].pos[2]=-37110943904.95902,e[r].vel[0]=-934.0097595989304,e[r].vel[1]=6438.538399605521,e[r].vel[2]=36.17507481287996,e[r].albedo=.51,vec3.set(e[r].color,156/255,184/255,196/255),e[r].name="Uranus",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/uranus/uranus_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=1024,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=1353e18,e[r].radius=578900,e[r].pos[0]=2975459142962.955,e[r].pos[1]=385232873797.4799,e[r].pos[2]=-37294199401.20961,e[r].vel[0]=-6097.340389245946,e[r].vel[1]=7759.826456366457,e[r].vel[2]=1410.444765364807,e[r].name="Ariel",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1172e18,e[r].radius=584700,e[r].pos[0]=2975686393082.154,e[r].pos[1]=385182228997.3161,e[r].pos[2]=-37301894815.11806,e[r].vel[0]=-4314.394752341006,e[r].vel[1]=6737.033120382748,e[r].vel[2]=-3145.740597779233,e[r].name="Umbriel",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=3527e18,e[r].radius=788400,e[r].pos[0]=2975555364009.711,e[r].pos[1]=385297751047.4027,e[r].pos[2]=-36678991938.67368,e[r].vel[0]=2600.449967778163,e[r].vel[1]=5624.774130903418,e[r].vel[2]=-233.8264788199584,e[r].name="Titania",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=3014e18,e[r].radius=761400,e[r].pos[0]=2975658224811.314,e[r].pos[1]=385136204216.6444,e[r].pos[2]=-37664942378.89804,e[r].vel[0]=-3909.615688700864,e[r].vel[1]=6958.299679424517,e[r].vel[2]=-857.9605981939847,e[r].name="Oberon",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=659e17,e[r].radius=235800,e[r].pos[0]=2975555532322.819,e[r].pos[1]=385229003789.5088,e[r].pos[2]=-37231829190.39418,e[r].vel[0]=-7024.056589624207,e[r].vel[1]=7729.89108845796,e[r].vel[2]=-2382.566413119305,e[r].name="Miranda",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=44e15,e[r].radius=20100,e[r].pos[0]=2975536798998.865,e[r].pos[1]=385247165753.8641,e[r].pos[2]=-37068935199.57277,e[r].vel[0]=8105.873861126629,e[r].vel[1]=3728.748994964143,e[r].vel[2]=-5213.339523826436,e[r].name="Cordelia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=53e15,e[r].radius=21400,e[r].pos[0]=2975561560547.549,e[r].pos[1]=385233647385.4623,e[r].pos[2]=-37127180318.80423,e[r].vel[0]=-4230.753147059381,e[r].vel[1]=5787.935606637643,e[r].vel[2]=-9799.56459002257,e[r].name="Ophelia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=92e15,e[r].radius=25700,e[r].pos[0]=2975568069817.307,e[r].pos[1]=385236231235.2396,e[r].pos[2]=-37097290678.28077,e[r].vel[0]=1186.169728508224,e[r].vel[1]=4626.354231435863,e[r].vel[2]=-9467.193297360105,e[r].name="Bianca",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=34e16,e[r].radius=39800,e[r].pos[0]=2975512905329.622,e[r].pos[1]=385254861550.1028,e[r].pos[2]=-37050670905.07644,e[r].vel[0]=8530.875249140547,e[r].vel[1]=4379.024932137713,e[r].vel[2]=126.5464935692167,e[r].name="Cressida",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=18e16,e[r].radius=32e3,e[r].pos[0]=2975478238685.799,e[r].pos[1]=385260957593.9685,e[r].pos[2]=-37060892275.57535,e[r].vel[0]=6938.124031810275,e[r].vel[1]=5459.243910178563,e[r].vel[2]=5477.478254210903,e[r].name="Desdemona",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=56e16,e[r].radius=46800,e[r].pos[0]=2975512905329.622,e[r].pos[1]=385236973699.7756,e[r].pos[2]=-37175374939.74498,e[r].vel[0]=-10198.03663157256,e[r].vel[1]=8355.12186656261;e[r].vel[2]=-803.5296266331611,e[r].name="Juliet",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=17e17,e[r].radius=67600,e[r].pos[0]=2975533732185.307,e[r].pos[1]=385233415733.8116,e[r].pos[2]=-37172798486.36121,e[r].vel[0]=-9537.667223861774,e[r].vel[1]=7856.824167086729,e[r].vel[2]=-3382.167167184812,e[r].name="Portia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=25e16,e[r].radius=36e3,e[r].pos[0]=2975469918948.051,e[r].pos[1]=385248202082.1751,e[r].pos[2]=-37167923962.01231,e[r].vel[0]=-7972.452118565212,e[r].vel[1]=8709.450859564871,e[r].vel[2]=5351.093030688384,e[r].name="Rosalind",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=36e16,e[r].radius=40300,e[r].pos[0]=2975584195312.152,e[r].pos[1]=385232855567.5952,e[r].pos[2]=-37097171251.40233,e[r].vel[0]=513.0016748820073,e[r].vel[1]=4939.160990829542,e[r].vel[2]=-8491.889187145083,e[r].name="Belinda",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=29e17,e[r].radius=81e3,e[r].pos[0]=2975572644910.925,e[r].pos[1]=385241258669.5076,e[r].pos[2]=-37050722198.4013,e[r].vel[0]=4558.415967354613,e[r].vel[1]=4422.957238367701,e[r].vel[2]=-5724.116768843839,e[r].name="Puck",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=25e16,e[r].radius=36e3,e[r].pos[0]=2975106974506.328,e[r].pos[1]=390806266516.118,e[r].pos[2]=-32484465525.09192,e[r].vel[0]=-53.84090097388018,e[r].vel[1]=6498.208805229481,e[r].vel[2]=147.9331945518259,e[r].name="Caliban",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=23e17,e[r].radius=75e3,e[r].pos[0]=2980874106983.676,e[r].pos[1]=402400217747.4135,e[r].pos[2]=-37956581980.07117,e[r].vel[0]=-573.0613088337406,e[r].vel[1]=6386.016815183877,e[r].vel[2]=-151.0343440745476,e[r].name="Sycorax",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=85e15,e[r].radius=25e3,e[r].pos[0]=2973966971657.592,e[r].pos[1]=395531588190.2651,e[r].pos[2]=-41958057033.44144,e[r].vel[0]=-227.4293737620512,e[r].vel[1]=6553.072870815264,e[r].vel[2]=-336.8798223521647,e[r].name="Prospero",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=75e15,e[r].radius=24e3,e[r].pos[0]=2989579016894.344,e[r].pos[1]=405604112586.2598,e[r].pos[2]=-41888547377.40023,e[r].vel[0]=-791.1544186675217,e[r].vel[1]=6141.071359008914,e[r].vel[2]=-110.0248197312652,e[r].name="Setebos",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=22e15,e[r].radius=16e3,e[r].pos[0]=2976280887267.921,e[r].pos[1]=378665901789.3386,e[r].pos[2]=-42281234083.03943,e[r].vel[0]=-1734.876612174366,e[r].vel[1]=6415.323594561967,e[r].vel[2]=124.8057215982672,e[r].name="Stephano",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=39e14,e[r].radius=9e3,e[r].pos[0]=2972212064510.976,e[r].pos[1]=392068902363.5564,e[r].pos[2]=-35279732709.34628,e[r].vel[0]=-66.70331938131336,e[r].vel[1]=6666.245876130647,e[r].vel[2]=17.84532346968692,e[r].name="Trinculo",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=72e14,e[r].radius=11e3,e[r].pos[0]=2977545269749.032,e[r].pos[1]=388271077064.3806,e[r].pos[2]=-35393547177.30822,e[r].vel[0]=-172.1735348282631,e[r].vel[1]=5529.476440503819,e[r].vel[2]=374.1698200154242,e[r].name="Francisco",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=55e14,e[r].radius=1e4,e[r].pos[0]=2982032765230.068,e[r].pos[1]=374906613888.0157,e[r].pos[2]=-52197698442.31987,e[r].vel[0]=-800.892177740221,e[r].vel[1]=6744.827854746167,e[r].vel[2]=325.2411193990681,e[r].name="Margaret",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=54e14,e[r].radius=6e3,e[r].pos[0]=2953971574815.952,e[r].pos[1]=381940175761.2857,e[r].pos[2]=-34143587895.209,e[r].vel[0]=-806.3559648783277,e[r].vel[1]=6915.882308789719,e[r].vel[2]=85.00041350320053,e[r].name="Ferdinand",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=18e15,e[r].radius=15e3,e[r].pos[0]=2975445709050.29,e[r].pos[1]=385266213161.2744,e[r].pos[2]=-37076647257.01761,e[r].vel[0]=3214.354386597901,e[r].vel[1]=6657.004475596374,e[r].vel[2]=7656.401142924953,e[r].name="Perdita",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1e15,e[r].radius=5e3,e[r].pos[0]=2975432248778.759,e[r].pos[1]=385271554091.5374,e[r].pos[2]=-37059399726.54712,e[r].vel[0]=3242.60158477962,e[r].vel[1]=6413.982136690025,e[r].vel[2]=6507.051283252712,e[r].name="Mab",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=38e14,e[r].radius=9e3,e[r].pos[0]=2975500588178.791,e[r].pos[1]=385259161596.2962,e[r].pos[2]=-37038492952.03899,e[r].vel[0]=7608.259793452425,e[r].vel[1]=4792.249479160243,e[r].vel[2]=1598.934649428323,e[r].name="Cupid",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=10243e22,e[r].radius=24622e3,e[r].obliquity=47.04832*a,e[r].ra=299.41677*a,e[r].rotation=1083e-7,e[r].pos[0]=3973551478190.141,e[r].pos[1]=-2082667469328.571,e[r].pos[2]=-48667692588.04429,e[r].vel[0]=2476.139158256415,e[r].vel[1]=4847.937119035573,e[r].vel[2]=-156.6790578187558,e[r].albedo=.41,vec3.set(e[r].color,96/255,127/255,219/255),e[r].name="Neptune",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/neptune/neptune_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=1024,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=21408e18,e[r].radius=1353400,e[r].pos[0]=3973500892985.855,e[r].pos[1]=-2082431284037.302,e[r].pos[2]=-48407865708.56357,e[r].vel[0]=6258.217196605711,e[r].vel[1]=6813.605191682629,e[r].vel[2]=-1207.1534840221,e[r].name="Triton",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=27e18,e[r].radius=17e4,e[r].pos[0]=3971828901828.759,e[r].pos[1]=-2075618827683.702,e[r].pos[2]=-48292547678.7589,e[r].vel[0]=2066.031028152825,e[r].vel[1]=4163.978465486172,e[r].vel[2]=-226.5998696799122,e[r].name="Neried",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=19e16,e[r].radius=33e3,e[r].pos[0]=3973515911211.448,e[r].pos[1]=-2082699783236.629,e[r].pos[2]=-48663804823.89712,e[r].vel[0]=9526.573686976279,e[r].vel[1]=-3488.05579645093,e[r].vel[2]=-4933.625272151534,e[r].name="Naiad",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=35e16,e[r].radius=41e3,e[r].pos[0]=3973567604595.75,e[r].pos[1]=-2082621101161.091,e[r].pos[2]=-48657841592.19456,e[r].vel[0]=-7763.487235362351,e[r].vel[1]=7334.794930532632,e[r].vel[2]=4908.898219953697,e[r].name="Thalassa",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=22e17,e[r].radius=75e3,e[r].pos[0]=3973589153179.248,e[r].pos[1]=-2082630938525.674,e[r].pos[2]=-48670170449.38529,e[r].vel[0]=-4329.008223959697,e[r].vel[1]=12233.30263784768,e[r].vel[2]=5263.5944374193,e[r].name="Despina",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=212e16,e[r].radius=88e3,e[r].pos[0]=3973577219746.941,e[r].pos[1]=-2082716365837.085,e[r].pos[2]=-48695706168.81275,e[r].vel[0]=11253.71755879656,e[r].vel[1]=10393.98535112609,e[r].vel[2]=-1773.279093856161,e[r].name="Galatea",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=42e17,e[r].radius=97e3,e[r].pos[0]=3973585001443.005,e[r].pos[1]=-2082602616394.738,e[r].pos[2]=-48658134260.11693,e[r].vel[0]=-5374.571934619451,e[r].vel[1]=8265.182824422009,e[r].vel[2]=4256.413232702839,e[r].name="Larissa",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=44e18,e[r].radius=21e4,e[r].pos[0]=3973549897918.949,e[r].pos[1]=-2082557341723.989,e[r].pos[2]=-48626471347.40423,e[r].vel[0]=-4627.050088118796,e[r].vel[1]=3788.42343444432,e[r].vel[2]=2408.636824644795,e[r].name="Proteus",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=16e16,e[r].radius=62e3,e[r].pos[0]=3981578706620.465,e[r].pos[1]=-2083268279973.567,e[r].pos[2]=-61970589128.03173,e[r].vel[0]=2142.987834128636,e[r].vel[1]=4391.224405605182,e[r].vel[2]=-540.248421649425,e[r].name="Halimede",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=4e16,e[r].radius=19e3,e[r].pos[0]=3948641554118.937,e[r].pos[1]=-2085712832658.076,e[r].pos[2]=-21657125592.39781,e[r].vel[0]=2266.028508950711,e[r].vel[1]=5217.374224250629,e[r].vel[2]=-367.6738580368781,e[r].name="Psamathe",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=6e16,e[r].radius=22e3,e[r].pos[0]=3989797766203.347,e[r].pos[1]=-2081517640698.376,e[r].pos[2]=-66428950166.92531,e[r].vel[0]=2569.395035301416,e[r].vel[1]=5312.634974276643,e[r].vel[2]=33.47670023937144,e[r].name="Sao",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=5e16,e[r].radius=21e3,e[r].pos[0]=3965792608650.201,e[r].pos[1]=-2072575712948.411,e[r].pos[2]=-38984725033.27942,e[r].vel[0]=2037.331996188064,e[r].vel[1]=4240.306318981339,e[r].vel[2]=-188.9321689362171,e[r].name="Laomedeia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=15e16,e[r].radius=3e4,e[r].pos[0]=3946983938551.207,e[r].pos[1]=-2105483327009.969,e[r].pos[2]=-51848074067.34991,e[r].vel[0]=2069.262126972834,e[r].vel[1]=4907.57337629458,e[r].vel[2]=-438.5840000853858,e[r].name="Neso",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1305e19,e[r].radius=1186e3,e[r].obliquity=96.163*a,e[r].ra=132.993*a,e[r].rotation=.00046449247,e[r].pos[0]=764538776814.5243,e[r].pos[1]=-4771509559927.589,e[r].pos[2]=289530810524.3874,e[r].vel[0]=5444.872836812718,e[r].vel[1]=-227.950784787717,e[r].vel[2]=-1539.240061552077,e[r].albedo=.57,vec3.set(e[r].color,180/255,152/255,128/255),e[r].name="Pluto",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/pluto/pluto_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=1024,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=152e19,e[r].radius=603500,e[r].pos[0]=764546824531.8527,e[r].pos[1]=-4771494659663.399,e[r].pos[2]=289540669929.6193,e[r].vel[0]=5580.812842112638,e[r].vel[1]=-187.427413724475,e[r].vel[2]=-1711.462398425936,e[r].albedo=.35,vec3.set(e[r].color,76/255,69/255,63/255),e[r].name="Charon",e[r].resources=new BodyResources,e[r].resources.textureLocation="images/charon/charon_color",e[r].resources.textureLow=256,e[r].resources.textureHigh=1024,e[r].resources.textureFormat="jpg",e[++r]=new Body,e[r].mass=2e16,e[r].radius=9e3,e[r].pos[0]=764510436157.7346,e[r].pos[1]=-4771522970163.905,e[r].pos[2]=289558523623.0378,e[r].vel[0]=5499.146996977424,e[r].vel[1]=-116.8095025872324,e[r].vel[2]=-1453.962967386003,e[r].albedo=.65,e[r].name="Styx",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=5e16,e[r].radius=39e3,e[r].pos[0]=764552924581.6615,e[r].pos[1]=-4771473522152.753,e[r].pos[2]=289563982157.8,e[r].vel[0]=5555.762748161723,e[r].vel[1]=-176.1359812992632,e[r].vel[2]=-1649.601377035079,e[r].albedo=.56,e[r].name="Nix",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=2e16,e[r].radius=31e3,e[r].pos[0]=764566514759.4728,e[r].pos[1]=-4771463294284.031,e[r].pos[2]=289557036764.1962,e[r].vel[0]=5533.042840589356,e[r].vel[1]=-208.2846323809864,e[r].vel[2]=-1664.015234284212,e[r].albedo=.56,e[r].name="Kerberos",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=42e16,e[r].radius=47e3,e[r].pos[0]=764494850868.3126,e[r].pos[1]=-4771554711642.896,e[r].pos[2]=289535325385.9649,e[r].vel[0]=5429.111436850546,e[r].vel[1]=-187.0996388310786,e[r].vel[2]=-1444.589742520514,e[r].albedo=.83,e[r].name="Hyrda",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=321e20,e[r].radius=715e3,e[r].pos[0]=-6859676876238.995,e[r].pos[1]=185620302946.2857,e[r].pos[2]=3757244857386.449,e[r].vel[0]=-447.3997305189583,e[r].vel[1]=-3770.703852809052,e[r].vel[2]=-144.9897211142668,e[r].name="Makemake",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=4006e18,e[r].radius=62e4,e[r].pos[0]=-6371077936785.006,e[r].pos[1]=-2205504365775.453,e[r].pos[2]=3525384823114.822,e[r].vel[0]=1632.939547782544,e[r].vel[1]=-3399.861192937957,e[r].vel[2]=217.7231853811953,e[r].name="Hauema",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=14e20,e[r].radius=11e5,e[r].pos[0]=-699600090621.0145,e[r].pos[1]=-6346214603039.992,e[r].pos[2]=864945265290.5446,e[r].vel[0]=4531.532335045405,e[r].vel[1]=-310.6884089388327,e[r].vel[2]=142.426561533477,e[r].name="Quaoar",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=438e18,e[r].radius=854e3,e[r].pos[0]=6075530793371.223,e[r].pos[1]=-538796885576.2928,e[r].pos[2]=2612492756653.145,e[r].vel[0]=553.3734845958893,e[r].vel[1]=4275.90780598983,e[r].vel[2]=579.0214459135377,e[r].name="Salacia",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=438e18,e[r].radius=8e5,e[r].pos[0]=570367805534.1997,e[r].pos[1]=-6763347852166.869,e[r].pos[2]=1851069435872.172,e[r].vel[0]=3937.802171932484,e[r].vel[1]=784.8702260815197,e[r].vel[2]=540.136865782498,e[r].name="(307261) 2002 MS4",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=167e20,e[r].radius=124e4,e[r].pos[0]=11415349747943.45,e[r].pos[1]=-6129617955339.088,e[r].pos[2]=-683401248715.2397,e[r].vel[0]=2048.99766249611,e[r].vel[1]=1270.307501227379,e[r].vel[2]=1178.182711629585,e[r].name="(225088) 2007 OR10",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=167e20,e[r].radius=1163e3,e[r].pos[0]=13033849389424.9,e[r].pos[1]=5272645569166.691,e[r].pos[2]=-3272907417280.168,e[r].vel[0]=-589.5419432411154,e[r].vel[1]=1590.046420042685,e[r].vel[2]=1569.062291587876,e[r].albedo=.96,e[r].name="Eris",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=1e21,e[r].radius=5e5,e[r].pos[0]=7619025315691.818,e[r].pos[1]=10145985133056.44,e[r].pos[2]=-2679628000335.602,e[r].vel[0]=-4124.394024151614,e[r].vel[1]=1321.523400829864,e[r].vel[2]=279.5169454968066,e[r].name="Sedna",e[r].resources=new BodyResources,e[++r]=new Body,e[r].mass=641e18,e[r].radius=917e3,e[r].pos[0]=-6093783272376.718,e[r].pos[1]=3006835504239.366,e[r].pos[2]=-2313817618444.904,e[r].vel[0]=-1613.268743062191,e[r].vel[1]=-3391.376204239144,e[r].vel[2]=-569.4694773103975,e[r].name="Orcus",e[r].resources=new BodyResources}},707:e=>{function t(){this.type=0,this.pos=dvec3.create(),this.vel=dvec3.create(),this.obliquity=0,this.rotOffset=0,this.ra=0,this.rotation=0,this.screenPos=dvec4.create(),this.renderRadius=0,this.atmosphere=vec4.fromValues(0,0,0,0),this.atmosphereHeight=0,this.rayleighWavelength=vec3.create(),this.mieWavelength=vec3.create(),this.heightScaleRayleigh=0,this.heightScaleMie=0,this.g=0,this.colorLine=vec3.fromValues(.5,.5,.5),this.color=vec3.fromValues(.5,.5,.5),this.albedo=.5,this.temperature=300,this.luminosity=0,this.magnitudeAbsolute=0,this.magnitudeApparent=0,this.age=46e8,this.cloudHeight=0,this.visible=!1,this.mass=0,this.radius=1,this.name="",this.rings,this.index=0,this.size=0,this.parent=0,this.nextPrev=0,this.prev=new Array,this.resources}t.prototype.SOI=function(e){return this.VisViva(e)*Math.pow(this.mass/e.mass,.4)},t.prototype.VisViva=function(e){var t=e.pos[0]-this.pos[0],r=e.pos[1]-this.pos[1],a=e.pos[2]-this.pos[2];return 1/(2/Math.sqrt(t*t+r*r+a*a)-((t=e.vel[0]-this.vel[0])*t+(r=e.vel[1]-this.vel[1])*r+(a=e.vel[2]-this.vel[2])*a)/(667384e-16*e.mass))},e.exports=t},612:e=>{e.exports=function(){this.textureLocation="",this.textureNightLocation="",this.textureSpecularLocation="",this.textureCloudsLocation="",this.texture,this.textureNight,this.textureSpecular,this.textureClouds,this.textureSmall,this.textureSmallNight,this.textureSmallSpecular,this.textureSmallClouds,this.image,this.imageNight,this.imageSpecular,this.imageClouds,this.imageSplit=!1,this.resourceSize,this.resource=0,this.resourceNight=0,this.resourceSpecular=0,this.resourceClouds=0}},664:function(e){var t;t=function(){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={exports:{},id:a,loaded:!1};return e[a].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){t.glMatrix=r(1),t.mat2=r(2),t.mat2d=r(3),t.mat3=r(4),t.mat4=r(5),t.quat=r(6),t.vec2=r(9),t.vec3=r(7),t.vec4=r(8),t.dmat2=r(10),t.dmat2d=r(11),t.dmat3=r(12),t.dmat4=r(13),t.dquat=r(14),t.dvec2=r(17),t.dvec3=r(15),t.dvec4=r(16)},function(e,t){var r={EPSILON:1e-6};r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.ARRAY_TYPE_D="undefined"!=typeof Float64Array?Float64Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(e){r.ARRAY_TYPE=e};var a=Math.PI/180;r.toRadian=function(e){return e*a},r.equals=function(e,t){return Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=r},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new a.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},fromValues:function(e,t,r,s){var o=new a.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=s,o},set:function(e,t,r,a,s){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e},transpose:function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*o-s*a;return n?(n=1/n,e[0]=o*n,e[1]=-a*n,e[2]=-s*n,e[3]=r*n,e):null},adjoint:function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1],l=r[2],c=r[3];return e[0]=a*i+o*u,e[1]=s*i+n*u,e[2]=a*l+o*c,e[3]=s*l+n*c,e}};s.mul=s.multiply,s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+o*i,e[1]=s*u+n*i,e[2]=a*-i+o*u,e[3]=s*-i+n*u,e},s.scale=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1];return e[0]=a*i,e[1]=s*i,e[2]=o*u,e[3]=n*u,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=-r,e[3]=a,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},s.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},s.LDU=function(e,t,r,a){return e[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-e[2]*r[1],[e,t,r]},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},s.sub=s.subtract,s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(s-u)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-l)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-c)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))},s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e},e.exports=s},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new a.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},fromValues:function(e,t,r,s,o,n){var i=new a.ARRAY_TYPE(6);return i[0]=e,i[1]=t,i[2]=r,i[3]=s,i[4]=o,i[5]=n,i},set:function(e,t,r,a,s,o,n){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=r*o-a*s;return u?(u=1/u,e[0]=o*u,e[1]=-a*u,e[2]=-s*u,e[3]=r*u,e[4]=(s*i-o*n)*u,e[5]=(a*n-r*i)*u,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1],h=r[2],d=r[3],m=r[4],p=r[5];return e[0]=a*l+o*c,e[1]=s*l+n*c,e[2]=a*h+o*d,e[3]=s*h+n*d,e[4]=a*m+o*p+i,e[5]=s*m+n*p+u,e}};s.mul=s.multiply,s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=a*c+o*l,e[1]=s*c+n*l,e[2]=a*-l+o*c,e[3]=s*-l+n*c,e[4]=i,e[5]=u,e},s.scale=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1];return e[0]=a*l,e[1]=s*l,e[2]=o*c,e[3]=n*c,e[4]=i,e[5]=u,e},s.translate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1];return e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=a*l+o*c+i,e[5]=s*l+n*c+u,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=-r,e[3]=a,e[4]=0,e[5]=0,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},s.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=t[0],c=t[1],h=t[2],d=t[3],m=t[4],p=t[5];return Math.abs(r-l)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(n-d)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-m)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-p)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},e.exports=s},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new a.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(e,t,r,s,o,n,i,u,l){var c=new a.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=s,c[4]=o,c[5]=n,c[6]=i,c[7]=u,c[8]=l,c},set:function(e,t,r,a,s,o,n,i,u,l){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e[6]=i,e[7]=u,e[8]=l,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var r=t[1],a=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=a,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=c*n-i*l,d=-c*o+i*u,m=l*o-n*u,p=r*h+a*d+s*m;return p?(p=1/p,e[0]=h*p,e[1]=(-c*a+s*l)*p,e[2]=(i*a-s*n)*p,e[3]=d*p,e[4]=(c*r-s*u)*p,e[5]=(-i*r+s*o)*p,e[6]=m*p,e[7]=(-l*r+a*u)*p,e[8]=(n*r-a*o)*p,e):null},adjoint:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8];return e[0]=n*c-i*l,e[1]=s*l-a*c,e[2]=a*i-s*n,e[3]=i*u-o*c,e[4]=r*c-s*u,e[5]=s*o-r*i,e[6]=o*l-n*u,e[7]=a*u-r*l,e[8]=r*n-a*o,e},determinant:function(e){var t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],n=e[5],i=e[6],u=e[7],l=e[8];return t*(l*o-n*u)+r*(-l*s+n*i)+a*(u*s-o*i)},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=r[0],m=r[1],p=r[2],v=r[3],f=r[4],M=r[5],g=r[6],x=r[7],b=r[8];return e[0]=d*a+m*n+p*l,e[1]=d*s+m*i+p*c,e[2]=d*o+m*u+p*h,e[3]=v*a+f*n+M*l,e[4]=v*s+f*i+M*c,e[5]=v*o+f*u+M*h,e[6]=g*a+x*n+b*l,e[7]=g*s+x*i+b*c,e[8]=g*o+x*u+b*h,e}};s.mul=s.multiply,s.translate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=r[0],m=r[1];return e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=i,e[5]=u,e[6]=d*a+m*n+l,e[7]=d*s+m*i+c,e[8]=d*o+m*u+h,e},s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=Math.sin(r),m=Math.cos(r);return e[0]=m*a+d*n,e[1]=m*s+d*i,e[2]=m*o+d*u,e[3]=m*n-d*a,e[4]=m*i-d*s,e[5]=m*u-d*o,e[6]=l,e[7]=c,e[8]=h,e},s.scale=function(e,t,r){var a=r[0],s=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=-r,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},s.fromQuat=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r+r,i=a+a,u=s+s,l=r*n,c=a*n,h=a*i,d=s*n,m=s*i,p=s*u,v=o*n,f=o*i,M=o*u;return e[0]=1-h-p,e[3]=c-M,e[6]=d+f,e[1]=c+M,e[4]=1-l-p,e[7]=m-v,e[2]=d-f,e[5]=m+v,e[8]=1-l-h,e},s.normalFromMat4=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15],g=r*i-a*n,x=r*u-s*n,b=r*l-o*n,S=a*u-s*i,w=a*l-o*i,y=s*l-o*u,I=c*v-h*p,R=c*f-d*p,E=c*M-m*p,D=h*f-d*v,B=h*M-m*v,A=d*M-m*f,_=g*A-x*B+b*D+S*E-w*R+y*I;return _?(_=1/_,e[0]=(i*A-u*B+l*D)*_,e[1]=(u*E-n*A-l*R)*_,e[2]=(n*B-i*E+l*I)*_,e[3]=(s*B-a*A-o*D)*_,e[4]=(r*A-s*E+o*R)*_,e[5]=(a*E-r*B-o*I)*_,e[6]=(v*y-f*w+M*S)*_,e[7]=(f*b-p*y-M*x)*_,e[8]=(p*w-v*b+M*g)*_,e):null},s.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=t[0],m=t[1],p=t[2],v=t[3],f=t[4],M=t[5],g=e[6],x=t[7],b=t[8];return Math.abs(r-d)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-m)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-p)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(n-v)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-g)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-x)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-b)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))},e.exports=s},function(e,t,r){var a=r(1),s={scalar:{},SIMD:{},create:function(){var e=new a.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new a.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(e,t,r,s,o,n,i,u,l,c,h,d,m,p,v,f){var M=new a.ARRAY_TYPE(16);return M[0]=e,M[1]=t,M[2]=r,M[3]=s,M[4]=o,M[5]=n,M[6]=i,M[7]=u,M[8]=l,M[9]=c,M[10]=h,M[11]=d,M[12]=m,M[13]=p,M[14]=v,M[15]=f,M},set:function(e,t,r,a,s,o,n,i,u,l,c,h,d,m,p,v,f){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e[6]=i,e[7]=u,e[8]=l,e[9]=c,e[10]=h,e[11]=d,e[12]=m,e[13]=p,e[14]=v,e[15]=f,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}};s.scalar.transpose=function(e,t){if(e===t){var r=t[1],a=t[2],s=t[3],o=t[6],n=t[7],i=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=o,e[11]=t[14],e[12]=s,e[13]=n,e[14]=i}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},s.SIMD.transpose=function(e,t){var r,a,s,o,n,i,u,l,c,h;return r=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4),s=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),n=SIMD.Float32x4.shuffle(r,a,0,1,4,5),i=SIMD.Float32x4.shuffle(s,o,0,1,4,5),u=SIMD.Float32x4.shuffle(n,i,0,2,4,6),l=SIMD.Float32x4.shuffle(n,i,1,3,5,7),SIMD.Float32x4.store(e,0,u),SIMD.Float32x4.store(e,4,l),n=SIMD.Float32x4.shuffle(r,a,2,3,6,7),i=SIMD.Float32x4.shuffle(s,o,2,3,6,7),c=SIMD.Float32x4.shuffle(n,i,0,2,4,6),h=SIMD.Float32x4.shuffle(n,i,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,h),e},s.transpose=a.USE_SIMD?s.SIMD.transpose:s.scalar.transpose,s.scalar.invert=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15],g=r*i-a*n,x=r*u-s*n,b=r*l-o*n,S=a*u-s*i,w=a*l-o*i,y=s*l-o*u,I=c*v-h*p,R=c*f-d*p,E=c*M-m*p,D=h*f-d*v,B=h*M-m*v,A=d*M-m*f,_=g*A-x*B+b*D+S*E-w*R+y*I;return _?(_=1/_,e[0]=(i*A-u*B+l*D)*_,e[1]=(s*B-a*A-o*D)*_,e[2]=(v*y-f*w+M*S)*_,e[3]=(d*w-h*y-m*S)*_,e[4]=(u*E-n*A-l*R)*_,e[5]=(r*A-s*E+o*R)*_,e[6]=(f*b-p*y-M*x)*_,e[7]=(c*y-d*b+m*x)*_,e[8]=(n*B-i*E+l*I)*_,e[9]=(a*E-r*B-o*I)*_,e[10]=(p*w-v*b+M*g)*_,e[11]=(h*b-c*w-m*g)*_,e[12]=(i*R-n*D-u*I)*_,e[13]=(r*D-a*R+s*I)*_,e[14]=(v*x-p*S-f*g)*_,e[15]=(c*S-h*x+d*g)*_,e):null},s.SIMD.invert=function(e,t){var r,a,s,o,n,i,u,l,c,h,d=SIMD.Float32x4.load(t,0),m=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return n=SIMD.Float32x4.shuffle(d,m,0,1,4,5),a=SIMD.Float32x4.shuffle(p,v,0,1,4,5),r=SIMD.Float32x4.shuffle(n,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,n,1,3,5,7),n=SIMD.Float32x4.shuffle(d,m,2,3,6,7),o=SIMD.Float32x4.shuffle(p,v,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,n,1,3,5,7),n=SIMD.Float32x4.mul(s,o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),i=SIMD.Float32x4.mul(a,n),u=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,n),i),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),n=SIMD.Float32x4.mul(a,s),n=SIMD.Float32x4.swizzle(n,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),i),c=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,n)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),n=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,n),i),l=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(s,n)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),n=SIMD.Float32x4.mul(r,a),n=SIMD.Float32x4.swizzle(n,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,n),c),n=SIMD.Float32x4.swizzle(n,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,n)),n=SIMD.Float32x4.mul(r,o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,n)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,n),l),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,n),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,n)),n=SIMD.Float32x4.mul(r,s),n=SIMD.Float32x4.swizzle(n,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,n)),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,n)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,n),c),h=SIMD.Float32x4.mul(r,i),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),n=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(n,n),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(n,n))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(h,i)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(h,c)),e):null},s.invert=a.USE_SIMD?s.SIMD.invert:s.scalar.invert,s.scalar.adjoint=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15];return e[0]=i*(d*M-m*f)-h*(u*M-l*f)+v*(u*m-l*d),e[1]=-(a*(d*M-m*f)-h*(s*M-o*f)+v*(s*m-o*d)),e[2]=a*(u*M-l*f)-i*(s*M-o*f)+v*(s*l-o*u),e[3]=-(a*(u*m-l*d)-i*(s*m-o*d)+h*(s*l-o*u)),e[4]=-(n*(d*M-m*f)-c*(u*M-l*f)+p*(u*m-l*d)),e[5]=r*(d*M-m*f)-c*(s*M-o*f)+p*(s*m-o*d),e[6]=-(r*(u*M-l*f)-n*(s*M-o*f)+p*(s*l-o*u)),e[7]=r*(u*m-l*d)-n*(s*m-o*d)+c*(s*l-o*u),e[8]=n*(h*M-m*v)-c*(i*M-l*v)+p*(i*m-l*h),e[9]=-(r*(h*M-m*v)-c*(a*M-o*v)+p*(a*m-o*h)),e[10]=r*(i*M-l*v)-n*(a*M-o*v)+p*(a*l-o*i),e[11]=-(r*(i*m-l*h)-n*(a*m-o*h)+c*(a*l-o*i)),e[12]=-(n*(h*f-d*v)-c*(i*f-u*v)+p*(i*d-u*h)),e[13]=r*(h*f-d*v)-c*(a*f-s*v)+p*(a*d-s*h),e[14]=-(r*(i*f-u*v)-n*(a*f-s*v)+p*(a*u-s*i)),e[15]=r*(i*d-u*h)-n*(a*d-s*h)+c*(a*u-s*i),e},s.SIMD.adjoint=function(e,t){var r,a,s,o,n,i,u,l,c,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),m=SIMD.Float32x4.load(t,8),p=SIMD.Float32x4.load(t,12);return n=SIMD.Float32x4.shuffle(h,d,0,1,4,5),a=SIMD.Float32x4.shuffle(m,p,0,1,4,5),r=SIMD.Float32x4.shuffle(n,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,n,1,3,5,7),n=SIMD.Float32x4.shuffle(h,d,2,3,6,7),o=SIMD.Float32x4.shuffle(m,p,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,n,1,3,5,7),n=SIMD.Float32x4.mul(s,o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),i=SIMD.Float32x4.mul(a,n),u=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,n),i),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),n=SIMD.Float32x4.mul(a,s),n=SIMD.Float32x4.swizzle(n,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),i),c=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,n)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),n=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,n),i),l=SIMD.Float32x4.mul(r,n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(s,n)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,n),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),n=SIMD.Float32x4.mul(r,a),n=SIMD.Float32x4.swizzle(n,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,n),c),n=SIMD.Float32x4.swizzle(n,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,n)),n=SIMD.Float32x4.mul(r,o),n=SIMD.Float32x4.swizzle(n,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,n)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,n),l),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,n),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,n)),n=SIMD.Float32x4.mul(r,s),n=SIMD.Float32x4.swizzle(n,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,n)),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,n)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,n),c),SIMD.Float32x4.store(e,0,i),SIMD.Float32x4.store(e,4,u),SIMD.Float32x4.store(e,8,l),SIMD.Float32x4.store(e,12,c),e},s.adjoint=a.USE_SIMD?s.SIMD.adjoint:s.scalar.adjoint,s.determinant=function(e){var t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],n=e[5],i=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],m=e[12],p=e[13],v=e[14],f=e[15];return(t*n-r*o)*(h*f-d*v)-(t*i-a*o)*(c*f-d*p)+(t*u-s*o)*(c*v-h*p)+(r*i-a*n)*(l*f-d*m)-(r*u-s*n)*(l*v-h*m)+(a*u-s*i)*(l*p-c*m)},s.SIMD.multiply=function(e,t,r){var a=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),n=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.load(r,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),n))));SIMD.Float32x4.store(e,0,u);var l=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),n))));SIMD.Float32x4.store(e,4,c);var h=SIMD.Float32x4.load(r,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),n))));SIMD.Float32x4.store(e,8,d);var m=SIMD.Float32x4.load(r,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,3,3,3,3),n))));return SIMD.Float32x4.store(e,12,p),e},s.scalar.multiply=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],m=t[10],p=t[11],v=t[12],f=t[13],M=t[14],g=t[15],x=r[0],b=r[1],S=r[2],w=r[3];return e[0]=x*a+b*i+S*h+w*v,e[1]=x*s+b*u+S*d+w*f,e[2]=x*o+b*l+S*m+w*M,e[3]=x*n+b*c+S*p+w*g,x=r[4],b=r[5],S=r[6],w=r[7],e[4]=x*a+b*i+S*h+w*v,e[5]=x*s+b*u+S*d+w*f,e[6]=x*o+b*l+S*m+w*M,e[7]=x*n+b*c+S*p+w*g,x=r[8],b=r[9],S=r[10],w=r[11],e[8]=x*a+b*i+S*h+w*v,e[9]=x*s+b*u+S*d+w*f,e[10]=x*o+b*l+S*m+w*M,e[11]=x*n+b*c+S*p+w*g,x=r[12],b=r[13],S=r[14],w=r[15],e[12]=x*a+b*i+S*h+w*v,e[13]=x*s+b*u+S*d+w*f,e[14]=x*o+b*l+S*m+w*M,e[15]=x*n+b*c+S*p+w*g,e},s.multiply=a.USE_SIMD?s.SIMD.multiply:s.scalar.multiply,s.mul=s.multiply,s.scalar.translate=function(e,t,r){var a,s,o,n,i,u,l,c,h,d,m,p,v=r[0],f=r[1],M=r[2];return t===e?(e[12]=t[0]*v+t[4]*f+t[8]*M+t[12],e[13]=t[1]*v+t[5]*f+t[9]*M+t[13],e[14]=t[2]*v+t[6]*f+t[10]*M+t[14],e[15]=t[3]*v+t[7]*f+t[11]*M+t[15]):(a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],m=t[10],p=t[11],e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=i,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=d,e[10]=m,e[11]=p,e[12]=a*v+i*f+h*M+t[12],e[13]=s*v+u*f+d*M+t[13],e[14]=o*v+l*f+m*M+t[14],e[15]=n*v+c*f+p*M+t[15]),e},s.SIMD.translate=function(e,t,r){var a=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),n=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4(r[0],r[1],r[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,0,0,0,0)),s=SIMD.Float32x4.mul(s,SIMD.Float32x4.swizzle(i,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2));var u=SIMD.Float32x4.add(a,SIMD.Float32x4.add(s,SIMD.Float32x4.add(o,n)));return SIMD.Float32x4.store(e,12,u),e},s.translate=a.USE_SIMD?s.SIMD.translate:s.scalar.translate,s.scalar.scale=function(e,t,r){var a=r[0],s=r[1],o=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},s.SIMD.scale=function(e,t,r){var a,s,o,n=SIMD.Float32x4(r[0],r[1],r[2],0);return a=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(n,0,0,0,0))),s=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(s,SIMD.Float32x4.swizzle(n,1,1,1,1))),o=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(n,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},s.scale=a.USE_SIMD?s.SIMD.scale:s.scalar.scale,s.rotate=function(e,t,r,s){var o,n,i,u,l,c,h,d,m,p,v,f,M,g,x,b,S,w,y,I,R,E,D,B,A=s[0],_=s[1],F=s[2],T=Math.sqrt(A*A+_*_+F*F);return Math.abs(T)<a.EPSILON?null:(A*=T=1/T,_*=T,F*=T,o=Math.sin(r),i=1-(n=Math.cos(r)),u=t[0],l=t[1],c=t[2],h=t[3],d=t[4],m=t[5],p=t[6],v=t[7],f=t[8],M=t[9],g=t[10],x=t[11],b=A*A*i+n,S=_*A*i+F*o,w=F*A*i-_*o,y=A*_*i-F*o,I=_*_*i+n,R=F*_*i+A*o,E=A*F*i+_*o,D=_*F*i-A*o,B=F*F*i+n,e[0]=u*b+d*S+f*w,e[1]=l*b+m*S+M*w,e[2]=c*b+p*S+g*w,e[3]=h*b+v*S+x*w,e[4]=u*y+d*I+f*R,e[5]=l*y+m*I+M*R,e[6]=c*y+p*I+g*R,e[7]=h*y+v*I+x*R,e[8]=u*E+d*D+f*B,e[9]=l*E+m*D+M*B,e[10]=c*E+p*D+g*B,e[11]=h*E+v*D+x*B,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},s.scalar.rotateX=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[4],n=t[5],i=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*a,e[5]=n*s+c*a,e[6]=i*s+h*a,e[7]=u*s+d*a,e[8]=l*s-o*a,e[9]=c*s-n*a,e[10]=h*s-i*a,e[11]=d*s-u*a,e},s.SIMD.rotateX=function(e,t,r){var a=SIMD.Float32x4.splat(Math.sin(r)),s=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),n=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),SIMD.Float32x4.mul(n,a))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),SIMD.Float32x4.mul(o,a))),e},s.rotateX=a.USE_SIMD?s.SIMD.rotateX:s.scalar.rotateX,s.scalar.rotateY=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[0],n=t[1],i=t[2],u=t[3],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*a,e[1]=n*s-c*a,e[2]=i*s-h*a,e[3]=u*s-d*a,e[8]=o*a+l*s,e[9]=n*a+c*s,e[10]=i*a+h*s,e[11]=u*a+d*s,e},s.SIMD.rotateY=function(e,t,r){var a=SIMD.Float32x4.splat(Math.sin(r)),s=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,s),SIMD.Float32x4.mul(n,a))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(n,s))),e},s.rotateY=a.USE_SIMD?s.SIMD.rotateY:s.scalar.rotateY,s.scalar.rotateZ=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[0],n=t[1],i=t[2],u=t[3],l=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*a,e[1]=n*s+c*a,e[2]=i*s+h*a,e[3]=u*s+d*a,e[4]=l*s-o*a,e[5]=c*s-n*a,e[6]=h*s-i*a,e[7]=d*s-u*a,e},s.SIMD.rotateZ=function(e,t,r){var a=SIMD.Float32x4.splat(Math.sin(r)),s=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),SIMD.Float32x4.mul(n,a))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),SIMD.Float32x4.mul(o,a))),e},s.rotateZ=a.USE_SIMD?s.SIMD.rotateZ:s.scalar.rotateZ,s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromRotation=function(e,t,r){var s,o,n,i=r[0],u=r[1],l=r[2],c=Math.sqrt(i*i+u*u+l*l);return Math.abs(c)<a.EPSILON?null:(i*=c=1/c,u*=c,l*=c,s=Math.sin(t),n=1-(o=Math.cos(t)),e[0]=i*i*n+o,e[1]=u*i*n+l*s,e[2]=l*i*n-u*s,e[3]=0,e[4]=i*u*n-l*s,e[5]=u*u*n+o,e[6]=l*u*n+i*s,e[7]=0,e[8]=i*l*n+u*s,e[9]=u*l*n-i*s,e[10]=l*l*n+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},s.fromXRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromYRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromZRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromRotationTranslation=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=a+a,u=s+s,l=o+o,c=a*i,h=a*u,d=a*l,m=s*u,p=s*l,v=o*l,f=n*i,M=n*u,g=n*l;return e[0]=1-(m+v),e[1]=h+g,e[2]=d-M,e[3]=0,e[4]=h-g,e[5]=1-(c+v),e[6]=p+f,e[7]=0,e[8]=d+M,e[9]=p-f,e[10]=1-(c+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},s.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},s.getRotation=function(e,t){var r=t[0]+t[5]+t[10],a=0;return r>0?(a=2*Math.sqrt(r+1),e[3]=.25*a,e[0]=(t[6]-t[9])/a,e[1]=(t[8]-t[2])/a,e[2]=(t[1]-t[4])/a):t[0]>t[5]&t[0]>t[10]?(a=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/a,e[0]=.25*a,e[1]=(t[1]+t[4])/a,e[2]=(t[8]+t[2])/a):t[5]>t[10]?(a=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/a,e[0]=(t[1]+t[4])/a,e[1]=.25*a,e[2]=(t[6]+t[9])/a):(a=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/a,e[0]=(t[8]+t[2])/a,e[1]=(t[6]+t[9])/a,e[2]=.25*a),e},s.fromRotationTranslationScale=function(e,t,r,a){var s=t[0],o=t[1],n=t[2],i=t[3],u=s+s,l=o+o,c=n+n,h=s*u,d=s*l,m=s*c,p=o*l,v=o*c,f=n*c,M=i*u,g=i*l,x=i*c,b=a[0],S=a[1],w=a[2];return e[0]=(1-(p+f))*b,e[1]=(d+x)*b,e[2]=(m-g)*b,e[3]=0,e[4]=(d-x)*S,e[5]=(1-(h+f))*S,e[6]=(v+M)*S,e[7]=0,e[8]=(m+g)*w,e[9]=(v-M)*w,e[10]=(1-(h+p))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},s.fromRotationTranslationScaleOrigin=function(e,t,r,a,s){var o=t[0],n=t[1],i=t[2],u=t[3],l=o+o,c=n+n,h=i+i,d=o*l,m=o*c,p=o*h,v=n*c,f=n*h,M=i*h,g=u*l,x=u*c,b=u*h,S=a[0],w=a[1],y=a[2],I=s[0],R=s[1],E=s[2];return e[0]=(1-(v+M))*S,e[1]=(m+b)*S,e[2]=(p-x)*S,e[3]=0,e[4]=(m-b)*w,e[5]=(1-(d+M))*w,e[6]=(f+g)*w,e[7]=0,e[8]=(p+x)*y,e[9]=(f-g)*y,e[10]=(1-(d+v))*y,e[11]=0,e[12]=r[0]+I-(e[0]*I+e[4]*R+e[8]*E),e[13]=r[1]+R-(e[1]*I+e[5]*R+e[9]*E),e[14]=r[2]+E-(e[2]*I+e[6]*R+e[10]*E),e[15]=1,e},s.fromQuat=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r+r,i=a+a,u=s+s,l=r*n,c=a*n,h=a*i,d=s*n,m=s*i,p=s*u,v=o*n,f=o*i,M=o*u;return e[0]=1-h-p,e[1]=c+M,e[2]=d-f,e[3]=0,e[4]=c-M,e[5]=1-l-p,e[6]=m+v,e[7]=0,e[8]=d+f,e[9]=m-v,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.frustum=function(e,t,r,a,s,o,n){var i=1/(r-t),u=1/(s-a),l=1/(o-n);return e[0]=2*o*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*i,e[9]=(s+a)*u,e[10]=(n+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*o*2*l,e[15]=0,e},s.perspective=function(e,t,r,a,s){var o=1/Math.tan(t/2),n=1/(a-s);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+a)*n,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*a*n,e[15]=0,e},s.perspectiveFromFieldOfView=function(e,t,r,a){var s=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),u=2/(n+i),l=2/(s+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(n-i)*u*.5,e[9]=(s-o)*l*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e},s.ortho=function(e,t,r,a,s,o,n){var i=1/(t-r),u=1/(a-s),l=1/(o-n);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*i,e[13]=(s+a)*u,e[14]=(n+o)*l,e[15]=1,e},s.lookAt=function(e,t,r,o){var n,i,u,l,c,h,d,m,p,v,f=t[0],M=t[1],g=t[2],x=o[0],b=o[1],S=o[2],w=r[0],y=r[1],I=r[2];return Math.abs(f-w)<a.EPSILON&&Math.abs(M-y)<a.EPSILON&&Math.abs(g-I)<a.EPSILON?s.identity(e):(d=f-w,m=M-y,p=g-I,n=b*(p*=v=1/Math.sqrt(d*d+m*m+p*p))-S*(m*=v),i=S*(d*=v)-x*p,u=x*m-b*d,(v=Math.sqrt(n*n+i*i+u*u))?(n*=v=1/v,i*=v,u*=v):(n=0,i=0,u=0),l=m*u-p*i,c=p*n-d*u,h=d*i-m*n,(v=Math.sqrt(l*l+c*c+h*h))?(l*=v=1/v,c*=v,h*=v):(l=0,c=0,h=0),e[0]=n,e[1]=l,e[2]=d,e[3]=0,e[4]=i,e[5]=c,e[6]=m,e[7]=0,e[8]=u,e[9]=h,e[10]=p,e[11]=0,e[12]=-(n*f+i*M+u*g),e[13]=-(l*f+c*M+h*g),e[14]=-(d*f+m*M+p*g),e[15]=1,e)},s.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e[9]=t[9]+r[9]*a,e[10]=t[10]+r[10]*a,e[11]=t[11]+r[11]*a,e[12]=t[12]+r[12]*a,e[13]=t[13]+r[13]*a,e[14]=t[14]+r[14]*a,e[15]=t[15]+r[15]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],m=e[10],p=e[11],v=e[12],f=e[13],M=e[14],g=e[15],x=t[0],b=t[1],S=t[2],w=t[3],y=t[4],I=t[5],R=t[6],E=t[7],D=t[8],B=t[9],A=t[10],_=t[11],F=t[12],T=t[13],L=t[14],P=t[15];return Math.abs(r-x)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-b)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(o-S)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(n-w)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-y)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-R)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(c-E)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-D)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(d-B)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(m-A)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(p-_)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(v-F)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(f-T)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(M-L)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(g-P)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))},e.exports=s},function(e,t,r){var a,s,o,n,i,u,l=r(1),c=r(4),h=r(7),d=r(8),m={create:function(){var e=new l.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};m.rotationTo=(a=h.create(),s=h.fromValues(1,0,0),o=h.fromValues(0,1,0),function(e,t,r){var n=h.dot(t,r);return n<-.999999?(h.cross(a,s,t),h.length(a)<1e-6&&h.cross(a,o,t),h.normalize(a,a),m.setAxisAngle(e,a,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(h.cross(a,t,r),e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=1+n,m.normalize(e,e))}),m.setAxes=(n=c.create(),function(e,t,r,a){return n[0]=r[0],n[3]=r[1],n[6]=r[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],m.normalize(e,m.fromMat3(e,n))}),m.clone=d.clone,m.fromValues=d.fromValues,m.copy=d.copy,m.set=d.set,m.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},m.setAxisAngle=function(e,t,r){r*=.5;var a=Math.sin(r);return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=Math.cos(r),e},m.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),a=Math.sin(r/2);return 0!=a?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0),r},m.add=d.add,m.multiply=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1],l=r[2],c=r[3];return e[0]=a*c+n*i+s*l-o*u,e[1]=s*c+n*u+o*i-a*l,e[2]=o*c+n*l+a*u-s*i,e[3]=n*c-a*i-s*u-o*l,e},m.mul=m.multiply,m.scale=d.scale,m.rotateX=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+n*i,e[1]=s*u+o*i,e[2]=o*u-s*i,e[3]=n*u-a*i,e},m.rotateY=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u-o*i,e[1]=s*u+n*i,e[2]=o*u+a*i,e[3]=n*u-s*i,e},m.rotateZ=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+s*i,e[1]=s*u-a*i,e[2]=o*u+n*i,e[3]=n*u-o*i,e},m.calculateW=function(e,t){var r=t[0],a=t[1],s=t[2];return e[0]=r,e[1]=a,e[2]=s,e[3]=Math.sqrt(Math.abs(1-r*r-a*a-s*s)),e},m.dot=d.dot,m.lerp=d.lerp,m.slerp=function(e,t,r,a){var s,o,n,i,u,l=t[0],c=t[1],h=t[2],d=t[3],m=r[0],p=r[1],v=r[2],f=r[3];return(o=l*m+c*p+h*v+d*f)<0&&(o=-o,m=-m,p=-p,v=-v,f=-f),1-o>1e-6?(s=Math.acos(o),n=Math.sin(s),i=Math.sin((1-a)*s)/n,u=Math.sin(a*s)/n):(i=1-a,u=a),e[0]=i*l+u*m,e[1]=i*c+u*p,e[2]=i*h+u*v,e[3]=i*d+u*f,e},m.sqlerp=(i=m.create(),u=m.create(),function(e,t,r,a,s,o){return m.slerp(i,t,s,o),m.slerp(u,r,a,o),m.slerp(e,i,u,2*o*(1-o)),e}),m.invert=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*r+a*a+s*s+o*o,i=n?1/n:0;return e[0]=-r*i,e[1]=-a*i,e[2]=-s*i,e[3]=o*i,e},m.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},m.length=d.length,m.len=m.length,m.squaredLength=d.squaredLength,m.sqrLen=m.squaredLength,m.normalize=d.normalize,m.fromMat3=function(e,t){var r,a=t[0]+t[4]+t[8];if(a>0)r=Math.sqrt(a+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var o=(s+1)%3,n=(s+2)%3;r=Math.sqrt(t[3*s+s]-t[3*o+o]-t[3*n+n]+1),e[s]=.5*r,r=.5/r,e[3]=(t[3*o+n]-t[3*n+o])*r,e[o]=(t[3*o+s]+t[3*s+o])*r,e[n]=(t[3*n+s]+t[3*s+n])*r}return e},m.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},m.exactEquals=d.exactEquals,m.equals=d.equals,e.exports=m},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new s.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,r){var a=new s.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=r,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,r,a){return e[0]=t,e[1]=r,e[2]=a,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+a*a+s*s)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2];return r*r+a*a+s*s},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],a=e[2];return Math.sqrt(t*t+r*r+a*a)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],a=e[2];return t*t+r*r+a*a},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=t[2],o=r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2];return e[0]=s*u-o*i,e[1]=o*n-a*u,e[2]=a*i-s*n,e},o.lerp=function(e,t,r,a){var s=t[0],o=t[1],n=t[2];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e[2]=n+a*(r[2]-n),e},o.hermite=function(e,t,r,a,s,o){var n=o*o,i=n*(2*o-3)+1,u=n*(o-2)+o,l=n*(o-1),c=n*(3-2*o);return e[0]=t[0]*i+r[0]*u+a[0]*l+s[0]*c,e[1]=t[1]*i+r[1]*u+a[1]*l+s[1]*c,e[2]=t[2]*i+r[2]*u+a[2]*l+s[2]*c,e},o.bezier=function(e,t,r,a,s,o){var n=1-o,i=n*n,u=o*o,l=i*n,c=3*o*i,h=3*u*n,d=u*o;return e[0]=t[0]*l+r[0]*c+a[0]*h+s[0]*d,e[1]=t[1]*l+r[1]*c+a[1]*h+s[1]*d,e[2]=t[2]*l+r[2]*c+a[2]*h+s[2]*d,e},o.random=function(e,t){t=t||1;var r=2*s.RANDOM()*Math.PI,a=2*s.RANDOM()-1,o=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=a*t,e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[3]*a+r[7]*s+r[11]*o+r[15];return n=n||1,e[0]=(r[0]*a+r[4]*s+r[8]*o+r[12])/n,e[1]=(r[1]*a+r[5]*s+r[9]*o+r[13])/n,e[2]=(r[2]*a+r[6]*s+r[10]*o+r[14])/n,e},o.transformMat3=function(e,t,r){var a=t[0],s=t[1],o=t[2];return e[0]=a*r[0]+s*r[3]+o*r[6],e[1]=a*r[1]+s*r[4]+o*r[7],e[2]=a*r[2]+s*r[5]+o*r[8],e},o.transformQuat=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2],l=r[3],c=l*a+i*o-u*s,h=l*s+u*a-n*o,d=l*o+n*s-i*a,m=-n*a-i*s-u*o;return e[0]=c*l+m*-n+h*-u-d*-i,e[1]=h*l+m*-i+d*-n-c*-u,e[2]=d*l+m*-u+c*-i-h*-n,e},o.rotateX=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(a)-s[2]*Math.sin(a),o[2]=s[1]*Math.sin(a)+s[2]*Math.cos(a),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.rotateY=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(a)+s[0]*Math.cos(a),o[1]=s[1],o[2]=s[2]*Math.cos(a)-s[0]*Math.sin(a),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.rotateZ=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0]*Math.cos(a)-s[1]*Math.sin(a),o[1]=s[0]*Math.sin(a)+s[1]*Math.cos(a),o[2]=s[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=3),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],o(a,a,n),e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2];return e}),o.angle=function(e,t){var r=o.fromValues(e[0],e[1],e[2]),a=o.fromValues(t[0],t[1],t[2]);o.normalize(r,r),o.normalize(a,a);var s=o.dot(r,a);return s>1?0:Math.acos(s)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var r=e[0],a=e[1],o=e[2],n=t[0],i=t[1],u=t[2];return Math.abs(r-n)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(a-i)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(o-u)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},e.exports=o},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new s.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,r,a){var o=new s.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=a,o},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,r,a,s){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+a*a+s*s+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return r*r+a*a+s*s+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],a=e[2],s=e[3];return Math.sqrt(t*t+r*r+a*a+s*s)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],a=e[2],s=e[3];return t*t+r*r+a*a+s*s},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*r+a*a+s*s+o*o;return n>0&&(n=1/Math.sqrt(n),e[0]=r*n,e[1]=a*n,e[2]=s*n,e[3]=o*n),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,r,a){var s=t[0],o=t[1],n=t[2],i=t[3];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e[2]=n+a*(r[2]-n),e[3]=i+a*(r[3]-i),e},o.random=function(e,t){return t=t||1,e[0]=s.RANDOM(),e[1]=s.RANDOM(),e[2]=s.RANDOM(),e[3]=s.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3];return e[0]=r[0]*a+r[4]*s+r[8]*o+r[12]*n,e[1]=r[1]*a+r[5]*s+r[9]*o+r[13]*n,e[2]=r[2]*a+r[6]*s+r[10]*o+r[14]*n,e[3]=r[3]*a+r[7]*s+r[11]*o+r[15]*n,e},o.transformQuat=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2],l=r[3],c=l*a+i*o-u*s,h=l*s+u*a-n*o,d=l*o+n*s-i*a,m=-n*a-i*s-u*o;return e[0]=c*l+m*-n+h*-u-d*-i,e[1]=h*l+m*-i+d*-n-c*-u,e[2]=d*l+m*-u+c*-i-h*-n,e[3]=t[3],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=4),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],a[3]=e[i+3],o(a,a,n),e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2],e[i+3]=a[3];return e}),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var r=e[0],a=e[1],o=e[2],n=e[3],i=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-c)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))},e.exports=o},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},clone:function(e){var t=new s.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},fromValues:function(e,t){var r=new s.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,r){return e[0]=t,e[1]=r,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(r*r+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1];return r*r+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=r*r+a*a;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,r){var a=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=a,e},o.lerp=function(e,t,r,a){var s=t[0],o=t[1];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e},o.random=function(e,t){t=t||1;var r=2*s.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},o.transformMat2=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[2]*s,e[1]=r[1]*a+r[3]*s,e},o.transformMat2d=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[2]*s+r[4],e[1]=r[1]*a+r[3]*s+r[5],e},o.transformMat3=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[3]*s+r[6],e[1]=r[1]*a+r[4]*s+r[7],e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[4]*s+r[12],e[1]=r[1]*a+r[5]*s+r[13],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=2),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],o(a,a,n),e[i]=a[0],e[i+1]=a[1];return e}),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var r=e[0],a=e[1],o=t[0],n=t[1];return Math.abs(r-o)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-n)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))},e.exports=o},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE_D(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var t=new a.ARRAY_TYPE_D(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},fromValues:function(e,t,r,s){var o=new a.ARRAY_TYPE_D(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=s,o},set:function(e,t,r,a,s){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e},transpose:function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*o-s*a;return n?(n=1/n,e[0]=o*n,e[1]=-a*n,e[2]=-s*n,e[3]=r*n,e):null},adjoint:function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1],l=r[2],c=r[3];return e[0]=a*i+o*u,e[1]=s*i+n*u,e[2]=a*l+o*c,e[3]=s*l+n*c,e}};s.mul=s.multiply,s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+o*i,e[1]=s*u+n*i,e[2]=a*-i+o*u,e[3]=s*-i+n*u,e},s.scale=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1];return e[0]=a*i,e[1]=s*i,e[2]=o*u,e[3]=n*u,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=-r,e[3]=a,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},s.str=function(e){return"dmat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},s.LDU=function(e,t,r,a){return e[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-e[2]*r[1],[e,t,r]},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},s.sub=s.subtract,s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(s-u)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(o-l)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-c)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))},s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e},e.exports=s},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE_D(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var t=new a.ARRAY_TYPE_D(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},fromValues:function(e,t,r,s,o,n){var i=new a.ARRAY_TYPE_D(6);return i[0]=e,i[1]=t,i[2]=r,i[3]=s,i[4]=o,i[5]=n,i},set:function(e,t,r,a,s,o,n){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=r*o-a*s;return u?(u=1/u,e[0]=o*u,e[1]=-a*u,e[2]=-s*u,e[3]=r*u,e[4]=(s*i-o*n)*u,e[5]=(a*n-r*i)*u,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1],h=r[2],d=r[3],m=r[4],p=r[5];return e[0]=a*l+o*c,e[1]=s*l+n*c,e[2]=a*h+o*d,e[3]=s*h+n*d,e[4]=a*m+o*p+i,e[5]=s*m+n*p+u,e}};s.mul=s.multiply,s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=a*c+o*l,e[1]=s*c+n*l,e[2]=a*-l+o*c,e[3]=s*-l+n*c,e[4]=i,e[5]=u,e},s.scale=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1];return e[0]=a*l,e[1]=s*l,e[2]=o*c,e[3]=n*c,e[4]=i,e[5]=u,e},s.translate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=r[0],c=r[1];return e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=a*l+o*c+i,e[5]=s*l+n*c+u,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=-r,e[3]=a,e[4]=0,e[5]=0,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},s.str=function(e){return"dmat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=t[0],c=t[1],h=t[2],d=t[3],m=t[4],p=t[5];return Math.abs(r-l)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-c)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(n-d)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-m)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-p)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},e.exports=s},function(e,t,r){var a=r(1),s={create:function(){var e=new a.ARRAY_TYPE_D(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new a.ARRAY_TYPE_D(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(e,t,r,s,o,n,i,u,l){var c=new a.ARRAY_TYPE_D(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=s,c[4]=o,c[5]=n,c[6]=i,c[7]=u,c[8]=l,c},set:function(e,t,r,a,s,o,n,i,u,l){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e[6]=i,e[7]=u,e[8]=l,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var r=t[1],a=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=a,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=c*n-i*l,d=-c*o+i*u,m=l*o-n*u,p=r*h+a*d+s*m;return p?(p=1/p,e[0]=h*p,e[1]=(-c*a+s*l)*p,e[2]=(i*a-s*n)*p,e[3]=d*p,e[4]=(c*r-s*u)*p,e[5]=(-i*r+s*o)*p,e[6]=m*p,e[7]=(-l*r+a*u)*p,e[8]=(n*r-a*o)*p,e):null},adjoint:function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8];return e[0]=n*c-i*l,e[1]=s*l-a*c,e[2]=a*i-s*n,e[3]=i*u-o*c,e[4]=r*c-s*u,e[5]=s*o-r*i,e[6]=o*l-n*u,e[7]=a*u-r*l,e[8]=r*n-a*o,e},determinant:function(e){var t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],n=e[5],i=e[6],u=e[7],l=e[8];return t*(l*o-n*u)+r*(-l*s+n*i)+a*(u*s-o*i)},multiply:function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=r[0],m=r[1],p=r[2],v=r[3],f=r[4],M=r[5],g=r[6],x=r[7],b=r[8];return e[0]=d*a+m*n+p*l,e[1]=d*s+m*i+p*c,e[2]=d*o+m*u+p*h,e[3]=v*a+f*n+M*l,e[4]=v*s+f*i+M*c,e[5]=v*o+f*u+M*h,e[6]=g*a+x*n+b*l,e[7]=g*s+x*i+b*c,e[8]=g*o+x*u+b*h,e}};s.mul=s.multiply,s.translate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=r[0],m=r[1];return e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=i,e[5]=u,e[6]=d*a+m*n+l,e[7]=d*s+m*i+c,e[8]=d*o+m*u+h,e},s.rotate=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=Math.sin(r),m=Math.cos(r);return e[0]=m*a+d*n,e[1]=m*s+d*i,e[2]=m*o+d*u,e[3]=m*n-d*a,e[4]=m*i-d*s,e[5]=m*u-d*o,e[6]=l,e[7]=c,e[8]=h,e},s.scale=function(e,t,r){var a=r[0],s=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},s.fromRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=-r,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},s.fromQuat=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r+r,i=a+a,u=s+s,l=r*n,c=a*n,h=a*i,d=s*n,m=s*i,p=s*u,v=o*n,f=o*i,M=o*u;return e[0]=1-h-p,e[3]=c-M,e[6]=d+f,e[1]=c+M,e[4]=1-l-p,e[7]=m-v,e[2]=d-f,e[5]=m+v,e[8]=1-l-h,e},s.normalFromMat4=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15],g=r*i-a*n,x=r*u-s*n,b=r*l-o*n,S=a*u-s*i,w=a*l-o*i,y=s*l-o*u,I=c*v-h*p,R=c*f-d*p,E=c*M-m*p,D=h*f-d*v,B=h*M-m*v,A=d*M-m*f,_=g*A-x*B+b*D+S*E-w*R+y*I;return _?(_=1/_,e[0]=(i*A-u*B+l*D)*_,e[1]=(u*E-n*A-l*R)*_,e[2]=(n*B-i*E+l*I)*_,e[3]=(s*B-a*A-o*D)*_,e[4]=(r*A-s*E+o*R)*_,e[5]=(a*E-r*B-o*I)*_,e[6]=(v*y-f*w+M*S)*_,e[7]=(f*b-p*y-M*x)*_,e[8]=(p*w-v*b+M*g)*_,e):null},s.str=function(e){return"dmat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=t[0],m=t[1],p=t[2],v=t[3],f=t[4],M=t[5],g=e[6],x=t[7],b=t[8];return Math.abs(r-d)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(s-m)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-p)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(n-v)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-g)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-x)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-b)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))},e.exports=s},function(e,t,r){var a=r(1),s={scalar:{},SIMD:{},create:function(){var e=new a.ARRAY_TYPE_D(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var t=new a.ARRAY_TYPE_D(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(e,t,r,s,o,n,i,u,l,c,h,d,m,p,v,f){var M=new a.ARRAY_TYPE_D(16);return M[0]=e,M[1]=t,M[2]=r,M[3]=s,M[4]=o,M[5]=n,M[6]=i,M[7]=u,M[8]=l,M[9]=c,M[10]=h,M[11]=d,M[12]=m,M[13]=p,M[14]=v,M[15]=f,M},set:function(e,t,r,a,s,o,n,i,u,l,c,h,d,m,p,v,f){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=n,e[6]=i,e[7]=u,e[8]=l,e[9]=c,e[10]=h,e[11]=d,e[12]=m,e[13]=p,e[14]=v,e[15]=f,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}};s.scalar.transpose=function(e,t){if(e===t){var r=t[1],a=t[2],s=t[3],o=t[6],n=t[7],i=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=o,e[11]=t[14],e[12]=s,e[13]=n,e[14]=i}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},s.SIMD.transpose=function(e,t){},s.transpose=a.USE_SIMD?s.SIMD.transpose:s.scalar.transpose,s.scalar.invert=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15],g=r*i-a*n,x=r*u-s*n,b=r*l-o*n,S=a*u-s*i,w=a*l-o*i,y=s*l-o*u,I=c*v-h*p,R=c*f-d*p,E=c*M-m*p,D=h*f-d*v,B=h*M-m*v,A=d*M-m*f,_=g*A-x*B+b*D+S*E-w*R+y*I;return _?(_=1/_,e[0]=(i*A-u*B+l*D)*_,e[1]=(s*B-a*A-o*D)*_,e[2]=(v*y-f*w+M*S)*_,e[3]=(d*w-h*y-m*S)*_,e[4]=(u*E-n*A-l*R)*_,e[5]=(r*A-s*E+o*R)*_,e[6]=(f*b-p*y-M*x)*_,e[7]=(c*y-d*b+m*x)*_,e[8]=(n*B-i*E+l*I)*_,e[9]=(a*E-r*B-o*I)*_,e[10]=(p*w-v*b+M*g)*_,e[11]=(h*b-c*w-m*g)*_,e[12]=(i*R-n*D-u*I)*_,e[13]=(r*D-a*R+s*I)*_,e[14]=(v*x-p*S-f*g)*_,e[15]=(c*S-h*x+d*g)*_,e):null},s.SIMD.invert=function(e,t){},s.invert=a.USE_SIMD?s.SIMD.invert:s.scalar.invert,s.scalar.adjoint=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=t[4],i=t[5],u=t[6],l=t[7],c=t[8],h=t[9],d=t[10],m=t[11],p=t[12],v=t[13],f=t[14],M=t[15];return e[0]=i*(d*M-m*f)-h*(u*M-l*f)+v*(u*m-l*d),e[1]=-(a*(d*M-m*f)-h*(s*M-o*f)+v*(s*m-o*d)),e[2]=a*(u*M-l*f)-i*(s*M-o*f)+v*(s*l-o*u),e[3]=-(a*(u*m-l*d)-i*(s*m-o*d)+h*(s*l-o*u)),e[4]=-(n*(d*M-m*f)-c*(u*M-l*f)+p*(u*m-l*d)),e[5]=r*(d*M-m*f)-c*(s*M-o*f)+p*(s*m-o*d),e[6]=-(r*(u*M-l*f)-n*(s*M-o*f)+p*(s*l-o*u)),e[7]=r*(u*m-l*d)-n*(s*m-o*d)+c*(s*l-o*u),e[8]=n*(h*M-m*v)-c*(i*M-l*v)+p*(i*m-l*h),e[9]=-(r*(h*M-m*v)-c*(a*M-o*v)+p*(a*m-o*h)),e[10]=r*(i*M-l*v)-n*(a*M-o*v)+p*(a*l-o*i),e[11]=-(r*(i*m-l*h)-n*(a*m-o*h)+c*(a*l-o*i)),e[12]=-(n*(h*f-d*v)-c*(i*f-u*v)+p*(i*d-u*h)),e[13]=r*(h*f-d*v)-c*(a*f-s*v)+p*(a*d-s*h),e[14]=-(r*(i*f-u*v)-n*(a*f-s*v)+p*(a*u-s*i)),e[15]=r*(i*d-u*h)-n*(a*d-s*h)+c*(a*u-s*i),e},s.SIMD.adjoint=function(e,t){},s.adjoint=a.USE_SIMD?s.SIMD.adjoint:s.scalar.adjoint,s.determinant=function(e){var t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],n=e[5],i=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],m=e[12],p=e[13],v=e[14],f=e[15];return(t*n-r*o)*(h*f-d*v)-(t*i-a*o)*(c*f-d*p)+(t*u-s*o)*(c*v-h*p)+(r*i-a*n)*(l*f-d*m)-(r*u-s*n)*(l*v-h*m)+(a*u-s*i)*(l*p-c*m)},s.SIMD.multiply=function(e,t,r){var a=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),n=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.load(r,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),n))));SIMD.Float32x4.store(e,0,u);var l=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),n))));SIMD.Float32x4.store(e,4,c);var h=SIMD.Float32x4.load(r,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),n))));SIMD.Float32x4.store(e,8,d);var m=SIMD.Float32x4.load(r,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,1,1,1,1),s),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,3,3,3,3),n))));return SIMD.Float32x4.store(e,12,p),e},s.scalar.multiply=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],m=t[10],p=t[11],v=t[12],f=t[13],M=t[14],g=t[15],x=r[0],b=r[1],S=r[2],w=r[3];return e[0]=x*a+b*i+S*h+w*v,e[1]=x*s+b*u+S*d+w*f,e[2]=x*o+b*l+S*m+w*M,e[3]=x*n+b*c+S*p+w*g,x=r[4],b=r[5],S=r[6],w=r[7],e[4]=x*a+b*i+S*h+w*v,e[5]=x*s+b*u+S*d+w*f,e[6]=x*o+b*l+S*m+w*M,e[7]=x*n+b*c+S*p+w*g,x=r[8],b=r[9],S=r[10],w=r[11],e[8]=x*a+b*i+S*h+w*v,e[9]=x*s+b*u+S*d+w*f,e[10]=x*o+b*l+S*m+w*M,e[11]=x*n+b*c+S*p+w*g,x=r[12],b=r[13],S=r[14],w=r[15],e[12]=x*a+b*i+S*h+w*v,e[13]=x*s+b*u+S*d+w*f,e[14]=x*o+b*l+S*m+w*M,e[15]=x*n+b*c+S*p+w*g,e},s.multiply=a.USE_SIMD?s.SIMD.multiply:s.scalar.multiply,s.mul=s.multiply,s.scalar.translate=function(e,t,r){var a,s,o,n,i,u,l,c,h,d,m,p,v=r[0],f=r[1],M=r[2];return t===e?(e[12]=t[0]*v+t[4]*f+t[8]*M+t[12],e[13]=t[1]*v+t[5]*f+t[9]*M+t[13],e[14]=t[2]*v+t[6]*f+t[10]*M+t[14],e[15]=t[3]*v+t[7]*f+t[11]*M+t[15]):(a=t[0],s=t[1],o=t[2],n=t[3],i=t[4],u=t[5],l=t[6],c=t[7],h=t[8],d=t[9],m=t[10],p=t[11],e[0]=a,e[1]=s,e[2]=o,e[3]=n,e[4]=i,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=d,e[10]=m,e[11]=p,e[12]=a*v+i*f+h*M+t[12],e[13]=s*v+u*f+d*M+t[13],e[14]=o*v+l*f+m*M+t[14],e[15]=n*v+c*f+p*M+t[15]),e},s.SIMD.translate=function(e,t,r){},s.translate=a.USE_SIMD?s.SIMD.translate:s.scalar.translate,s.scalar.scale=function(e,t,r){var a=r[0],s=r[1],o=r[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},s.SIMD.scale=function(e,t,r){},s.scale=a.USE_SIMD?s.SIMD.scale:s.scalar.scale,s.rotate=function(e,t,r,s){var o,n,i,u,l,c,h,d,m,p,v,f,M,g,x,b,S,w,y,I,R,E,D,B,A=s[0],_=s[1],F=s[2],T=Math.sqrt(A*A+_*_+F*F);return Math.abs(T)<a.EPSILON?null:(A*=T=1/T,_*=T,F*=T,o=Math.sin(r),i=1-(n=Math.cos(r)),u=t[0],l=t[1],c=t[2],h=t[3],d=t[4],m=t[5],p=t[6],v=t[7],f=t[8],M=t[9],g=t[10],x=t[11],b=A*A*i+n,S=_*A*i+F*o,w=F*A*i-_*o,y=A*_*i-F*o,I=_*_*i+n,R=F*_*i+A*o,E=A*F*i+_*o,D=_*F*i-A*o,B=F*F*i+n,e[0]=u*b+d*S+f*w,e[1]=l*b+m*S+M*w,e[2]=c*b+p*S+g*w,e[3]=h*b+v*S+x*w,e[4]=u*y+d*I+f*R,e[5]=l*y+m*I+M*R,e[6]=c*y+p*I+g*R,e[7]=h*y+v*I+x*R,e[8]=u*E+d*D+f*B,e[9]=l*E+m*D+M*B,e[10]=c*E+p*D+g*B,e[11]=h*E+v*D+x*B,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},s.scalar.rotateX=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[4],n=t[5],i=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*a,e[5]=n*s+c*a,e[6]=i*s+h*a,e[7]=u*s+d*a,e[8]=l*s-o*a,e[9]=c*s-n*a,e[10]=h*s-i*a,e[11]=d*s-u*a,e},s.SIMD.rotateX=function(e,t,r){},s.rotateX=a.USE_SIMD?s.SIMD.rotateX:s.scalar.rotateX,s.scalar.rotateY=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[0],n=t[1],i=t[2],u=t[3],l=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*a,e[1]=n*s-c*a,e[2]=i*s-h*a,e[3]=u*s-d*a,e[8]=o*a+l*s,e[9]=n*a+c*s,e[10]=i*a+h*s,e[11]=u*a+d*s,e},s.SIMD.rotateY=function(e,t,r){},s.rotateY=a.USE_SIMD?s.SIMD.rotateY:s.scalar.rotateY,s.scalar.rotateZ=function(e,t,r){var a=Math.sin(r),s=Math.cos(r),o=t[0],n=t[1],i=t[2],u=t[3],l=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*a,e[1]=n*s+c*a,e[2]=i*s+h*a,e[3]=u*s+d*a,e[4]=l*s-o*a,e[5]=c*s-n*a,e[6]=h*s-i*a,e[7]=d*s-u*a,e},s.SIMD.rotateZ=function(e,t,r){},s.rotateZ=a.USE_SIMD?s.SIMD.rotateZ:s.scalar.rotateZ,s.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},s.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromRotation=function(e,t,r){var s,o,n,i=r[0],u=r[1],l=r[2],c=Math.sqrt(i*i+u*u+l*l);return Math.abs(c)<a.EPSILON?null:(i*=c=1/c,u*=c,l*=c,s=Math.sin(t),n=1-(o=Math.cos(t)),e[0]=i*i*n+o,e[1]=u*i*n+l*s,e[2]=l*i*n-u*s,e[3]=0,e[4]=i*u*n-l*s,e[5]=u*u*n+o,e[6]=l*u*n+i*s,e[7]=0,e[8]=i*l*n+u*s,e[9]=u*l*n-i*s,e[10]=l*l*n+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},s.fromXRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromYRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromZRotation=function(e,t){var r=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.fromRotationTranslation=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=a+a,u=s+s,l=o+o,c=a*i,h=a*u,d=a*l,m=s*u,p=s*l,v=o*l,f=n*i,M=n*u,g=n*l;return e[0]=1-(m+v),e[1]=h+g,e[2]=d-M,e[3]=0,e[4]=h-g,e[5]=1-(c+v),e[6]=p+f,e[7]=0,e[8]=d+M,e[9]=p-f,e[10]=1-(c+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},s.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},s.getRotation=function(e,t){var r=t[0]+t[5]+t[10],a=0;return r>0?(a=2*Math.sqrt(r+1),e[3]=.25*a,e[0]=(t[6]-t[9])/a,e[1]=(t[8]-t[2])/a,e[2]=(t[1]-t[4])/a):t[0]>t[5]&t[0]>t[10]?(a=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/a,e[0]=.25*a,e[1]=(t[1]+t[4])/a,e[2]=(t[8]+t[2])/a):t[5]>t[10]?(a=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/a,e[0]=(t[1]+t[4])/a,e[1]=.25*a,e[2]=(t[6]+t[9])/a):(a=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/a,e[0]=(t[8]+t[2])/a,e[1]=(t[6]+t[9])/a,e[2]=.25*a),e},s.fromRotationTranslationScale=function(e,t,r,a){var s=t[0],o=t[1],n=t[2],i=t[3],u=s+s,l=o+o,c=n+n,h=s*u,d=s*l,m=s*c,p=o*l,v=o*c,f=n*c,M=i*u,g=i*l,x=i*c,b=a[0],S=a[1],w=a[2];return e[0]=(1-(p+f))*b,e[1]=(d+x)*b,e[2]=(m-g)*b,e[3]=0,e[4]=(d-x)*S,e[5]=(1-(h+f))*S,e[6]=(v+M)*S,e[7]=0,e[8]=(m+g)*w,e[9]=(v-M)*w,e[10]=(1-(h+p))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},s.fromRotationTranslationScaleOrigin=function(e,t,r,a,s){var o=t[0],n=t[1],i=t[2],u=t[3],l=o+o,c=n+n,h=i+i,d=o*l,m=o*c,p=o*h,v=n*c,f=n*h,M=i*h,g=u*l,x=u*c,b=u*h,S=a[0],w=a[1],y=a[2],I=s[0],R=s[1],E=s[2];return e[0]=(1-(v+M))*S,e[1]=(m+b)*S,e[2]=(p-x)*S,e[3]=0,e[4]=(m-b)*w,e[5]=(1-(d+M))*w,e[6]=(f+g)*w,e[7]=0,e[8]=(p+x)*y,e[9]=(f-g)*y,e[10]=(1-(d+v))*y,e[11]=0,e[12]=r[0]+I-(e[0]*I+e[4]*R+e[8]*E),e[13]=r[1]+R-(e[1]*I+e[5]*R+e[9]*E),e[14]=r[2]+E-(e[2]*I+e[6]*R+e[10]*E),e[15]=1,e},s.fromQuat=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r+r,i=a+a,u=s+s,l=r*n,c=a*n,h=a*i,d=s*n,m=s*i,p=s*u,v=o*n,f=o*i,M=o*u;return e[0]=1-h-p,e[1]=c+M,e[2]=d-f,e[3]=0,e[4]=c-M,e[5]=1-l-p,e[6]=m+v,e[7]=0,e[8]=d+f,e[9]=m-v,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},s.frustum=function(e,t,r,a,s,o,n){var i=1/(r-t),u=1/(s-a),l=1/(o-n);return e[0]=2*o*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*i,e[9]=(s+a)*u,e[10]=(n+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*o*2*l,e[15]=0,e},s.perspective=function(e,t,r,a,s){var o=1/Math.tan(t/2),n=1/(a-s);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+a)*n,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*a*n,e[15]=0,e},s.perspectiveFromFieldOfView=function(e,t,r,a){var s=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),u=2/(n+i),l=2/(s+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(n-i)*u*.5,e[9]=(s-o)*l*.5,e[10]=a/(r-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*r/(r-a),e[15]=0,e},s.ortho=function(e,t,r,a,s,o,n){var i=1/(t-r),u=1/(a-s),l=1/(o-n);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*i,e[13]=(s+a)*u,e[14]=(n+o)*l,e[15]=1,e},s.lookAt=function(e,t,r,o){var n,i,u,l,c,h,d,m,p,v,f=t[0],M=t[1],g=t[2],x=o[0],b=o[1],S=o[2],w=r[0],y=r[1],I=r[2];return Math.abs(f-w)<a.EPSILON&&Math.abs(M-y)<a.EPSILON&&Math.abs(g-I)<a.EPSILON?s.identity(e):(d=f-w,m=M-y,p=g-I,n=b*(p*=v=1/Math.sqrt(d*d+m*m+p*p))-S*(m*=v),i=S*(d*=v)-x*p,u=x*m-b*d,(v=Math.sqrt(n*n+i*i+u*u))?(n*=v=1/v,i*=v,u*=v):(n=0,i=0,u=0),l=m*u-p*i,c=p*n-d*u,h=d*i-m*n,(v=Math.sqrt(l*l+c*c+h*h))?(l*=v=1/v,c*=v,h*=v):(l=0,c=0,h=0),e[0]=n,e[1]=l,e[2]=d,e[3]=0,e[4]=i,e[5]=c,e[6]=m,e[7]=0,e[8]=u,e[9]=h,e[10]=p,e[11]=0,e[12]=-(n*f+i*M+u*g),e[13]=-(l*f+c*M+h*g),e[14]=-(d*f+m*M+p*g),e[15]=1,e)},s.str=function(e){return"dmat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},s.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e},s.sub=s.subtract,s.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},s.multiplyScalarAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e[4]=t[4]+r[4]*a,e[5]=t[5]+r[5]*a,e[6]=t[6]+r[6]*a,e[7]=t[7]+r[7]*a,e[8]=t[8]+r[8]*a,e[9]=t[9]+r[9]*a,e[10]=t[10]+r[10]*a,e[11]=t[11]+r[11]*a,e[12]=t[12]+r[12]*a,e[13]=t[13]+r[13]*a,e[14]=t[14]+r[14]*a,e[15]=t[15]+r[15]*a,e},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},s.equals=function(e,t){var r=e[0],s=e[1],o=e[2],n=e[3],i=e[4],u=e[5],l=e[6],c=e[7],h=e[8],d=e[9],m=e[10],p=e[11],v=e[12],f=e[13],M=e[14],g=e[15],x=t[0],b=t[1],S=t[2],w=t[3],y=t[4],I=t[5],R=t[6],E=t[7],D=t[8],B=t[9],A=t[10],_=t[11],F=t[12],T=t[13],L=t[14],P=t[15];return Math.abs(r-x)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-b)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(o-S)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(n-w)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-y)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-R)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(c-E)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-D)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(d-B)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(m-A)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(p-_)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(v-F)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(f-T)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(M-L)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(g-P)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))},e.exports=s},function(e,t,r){var a,s,o,n,i,u,l=r(1),c=r(12),h=r(15),d=r(16),m={create:function(){var e=new l.ARRAY_TYPE_D(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};m.rotationTo=(a=h.create(),s=h.fromValues(1,0,0),o=h.fromValues(0,1,0),function(e,t,r){var n=h.dot(t,r);return n<-.999999?(h.cross(a,s,t),h.length(a)<1e-6&&h.cross(a,o,t),h.normalize(a,a),m.setAxisAngle(e,a,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(h.cross(a,t,r),e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=1+n,m.normalize(e,e))}),m.setAxes=(n=c.create(),function(e,t,r,a){return n[0]=r[0],n[3]=r[1],n[6]=r[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-t[0],n[5]=-t[1],n[8]=-t[2],m.normalize(e,m.fromdmat3(e,n))}),m.clone=d.clone,m.fromValues=d.fromValues,m.copy=d.copy,m.set=d.set,m.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},m.setAxisAngle=function(e,t,r){r*=.5;var a=Math.sin(r);return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=Math.cos(r),e},m.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),a=Math.sin(r/2);return 0!=a?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0),r},m.add=d.add,m.multiply=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3],i=r[0],u=r[1],l=r[2],c=r[3];return e[0]=a*c+n*i+s*l-o*u,e[1]=s*c+n*u+o*i-a*l,e[2]=o*c+n*l+a*u-s*i,e[3]=n*c-a*i-s*u-o*l,e},m.mul=m.multiply,m.scale=d.scale,m.rotateX=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+n*i,e[1]=s*u+o*i,e[2]=o*u-s*i,e[3]=n*u-a*i,e},m.rotateY=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u-o*i,e[1]=s*u+n*i,e[2]=o*u+a*i,e[3]=n*u-s*i,e},m.rotateZ=function(e,t,r){r*=.5;var a=t[0],s=t[1],o=t[2],n=t[3],i=Math.sin(r),u=Math.cos(r);return e[0]=a*u+s*i,e[1]=s*u-a*i,e[2]=o*u+n*i,e[3]=n*u-o*i,e},m.calculateW=function(e,t){var r=t[0],a=t[1],s=t[2];return e[0]=r,e[1]=a,e[2]=s,e[3]=Math.sqrt(Math.abs(1-r*r-a*a-s*s)),e},m.dot=d.dot,m.lerp=d.lerp,m.slerp=function(e,t,r,a){var s,o,n,i,u,l=t[0],c=t[1],h=t[2],d=t[3],m=r[0],p=r[1],v=r[2],f=r[3];return(o=l*m+c*p+h*v+d*f)<0&&(o=-o,m=-m,p=-p,v=-v,f=-f),1-o>1e-6?(s=Math.acos(o),n=Math.sin(s),i=Math.sin((1-a)*s)/n,u=Math.sin(a*s)/n):(i=1-a,u=a),e[0]=i*l+u*m,e[1]=i*c+u*p,e[2]=i*h+u*v,e[3]=i*d+u*f,e},m.sqlerp=(i=m.create(),u=m.create(),function(e,t,r,a,s,o){return m.slerp(i,t,s,o),m.slerp(u,r,a,o),m.slerp(e,i,u,2*o*(1-o)),e}),m.invert=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*r+a*a+s*s+o*o,i=n?1/n:0;return e[0]=-r*i,e[1]=-a*i,e[2]=-s*i,e[3]=o*i,e},m.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},m.length=d.length,m.len=m.length,m.squaredLength=d.squaredLength,m.sqrLen=m.squaredLength,m.normalize=d.normalize,m.fromdmat3=function(e,t){var r,a=t[0]+t[4]+t[8];if(a>0)r=Math.sqrt(a+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var o=(s+1)%3,n=(s+2)%3;r=Math.sqrt(t[3*s+s]-t[3*o+o]-t[3*n+n]+1),e[s]=.5*r,r=.5/r,e[3]=(t[3*o+n]-t[3*n+o])*r,e[o]=(t[3*o+s]+t[3*s+o])*r,e[n]=(t[3*n+s]+t[3*s+n])*r}return e},m.str=function(e){return"dquat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},m.exactEquals=d.exactEquals,m.equals=d.equals,e.exports=m},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE_D(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var t=new s.ARRAY_TYPE_D(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:function(e,t,r){var a=new s.ARRAY_TYPE_D(3);return a[0]=e,a[1]=t,a[2]=r,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,r,a){return e[0]=t,e[1]=r,e[2]=a,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+a*a+s*s)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2];return r*r+a*a+s*s},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],a=e[2];return Math.sqrt(t*t+r*r+a*a)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],a=e[2];return t*t+r*r+a*a},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=t[2],o=r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2];return e[0]=s*u-o*i,e[1]=o*n-a*u,e[2]=a*i-s*n,e},o.lerp=function(e,t,r,a){var s=t[0],o=t[1],n=t[2];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e[2]=n+a*(r[2]-n),e},o.hermite=function(e,t,r,a,s,o){var n=o*o,i=n*(2*o-3)+1,u=n*(o-2)+o,l=n*(o-1),c=n*(3-2*o);return e[0]=t[0]*i+r[0]*u+a[0]*l+s[0]*c,e[1]=t[1]*i+r[1]*u+a[1]*l+s[1]*c,e[2]=t[2]*i+r[2]*u+a[2]*l+s[2]*c,e},o.bezier=function(e,t,r,a,s,o){var n=1-o,i=n*n,u=o*o,l=i*n,c=3*o*i,h=3*u*n,d=u*o;return e[0]=t[0]*l+r[0]*c+a[0]*h+s[0]*d,e[1]=t[1]*l+r[1]*c+a[1]*h+s[1]*d,e[2]=t[2]*l+r[2]*c+a[2]*h+s[2]*d,e},o.random=function(e,t){t=t||1;var r=2*s.RANDOM()*Math.PI,a=2*s.RANDOM()-1,o=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=a*t,e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[3]*a+r[7]*s+r[11]*o+r[15];return n=n||1,e[0]=(r[0]*a+r[4]*s+r[8]*o+r[12])/n,e[1]=(r[1]*a+r[5]*s+r[9]*o+r[13])/n,e[2]=(r[2]*a+r[6]*s+r[10]*o+r[14])/n,e},o.transformMat3=function(e,t,r){var a=t[0],s=t[1],o=t[2];return e[0]=a*r[0]+s*r[3]+o*r[6],e[1]=a*r[1]+s*r[4]+o*r[7],e[2]=a*r[2]+s*r[5]+o*r[8],e},o.transformQuat=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2],l=r[3],c=l*a+i*o-u*s,h=l*s+u*a-n*o,d=l*o+n*s-i*a,m=-n*a-i*s-u*o;return e[0]=c*l+m*-n+h*-u-d*-i,e[1]=h*l+m*-i+d*-n-c*-u,e[2]=d*l+m*-u+c*-i-h*-n,e},o.rotateX=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(a)-s[2]*Math.sin(a),o[2]=s[1]*Math.sin(a)+s[2]*Math.cos(a),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.rotateY=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(a)+s[0]*Math.cos(a),o[1]=s[1],o[2]=s[2]*Math.cos(a)-s[0]*Math.sin(a),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.rotateZ=function(e,t,r,a){var s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0]*Math.cos(a)-s[1]*Math.sin(a),o[1]=s[0]*Math.sin(a)+s[1]*Math.cos(a),o[2]=s[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=3),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],o(a,a,n),e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2];return e}),o.angle=function(e,t){var r=o.fromValues(e[0],e[1],e[2]),a=o.fromValues(t[0],t[1],t[2]);o.normalize(r,r),o.normalize(a,a);var s=o.dot(r,a);return s>1?0:Math.acos(s)},o.str=function(e){return"dvec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var r=e[0],a=e[1],o=e[2],n=t[0],i=t[1],u=t[2];return Math.abs(r-n)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(a-i)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(o-u)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},e.exports=o},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE_D(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var t=new s.ARRAY_TYPE_D(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},fromValues:function(e,t,r,a){var o=new s.ARRAY_TYPE_D(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=a,o},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,r,a,s){return e[0]=t,e[1]=r,e[2]=a,e[3]=s,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+a*a+s*s+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return r*r+a*a+s*s+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],a=e[2],s=e[3];return Math.sqrt(t*t+r*r+a*a+s*s)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],a=e[2],s=e[3];return t*t+r*r+a*a+s*s},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=t[2],o=t[3],n=r*r+a*a+s*s+o*o;return n>0&&(n=1/Math.sqrt(n),e[0]=r*n,e[1]=a*n,e[2]=s*n,e[3]=o*n),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,r,a){var s=t[0],o=t[1],n=t[2],i=t[3];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e[2]=n+a*(r[2]-n),e[3]=i+a*(r[3]-i),e},o.random=function(e,t){return t=t||1,e[0]=s.RANDOM(),e[1]=s.RANDOM(),e[2]=s.RANDOM(),e[3]=s.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=t[3];return e[0]=r[0]*a+r[4]*s+r[8]*o+r[12]*n,e[1]=r[1]*a+r[5]*s+r[9]*o+r[13]*n,e[2]=r[2]*a+r[6]*s+r[10]*o+r[14]*n,e[3]=r[3]*a+r[7]*s+r[11]*o+r[15]*n,e},o.transformQuat=function(e,t,r){var a=t[0],s=t[1],o=t[2],n=r[0],i=r[1],u=r[2],l=r[3],c=l*a+i*o-u*s,h=l*s+u*a-n*o,d=l*o+n*s-i*a,m=-n*a-i*s-u*o;return e[0]=c*l+m*-n+h*-u-d*-i,e[1]=h*l+m*-i+d*-n-c*-u,e[2]=d*l+m*-u+c*-i-h*-n,e[3]=t[3],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=4),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],a[3]=e[i+3],o(a,a,n),e[i]=a[0],e[i+1]=a[1],e[i+2]=a[2],e[i+3]=a[3];return e}),o.str=function(e){return"  dvec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var r=e[0],a=e[1],o=e[2],n=e[3],i=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-c)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))},e.exports=o},function(e,t,r){var a,s=r(1),o={create:function(){var e=new s.ARRAY_TYPE_D(2);return e[0]=0,e[1]=0,e},clone:function(e){var t=new s.ARRAY_TYPE_D(2);return t[0]=e[0],t[1]=e[1],t},fromValues:function(e,t){var r=new s.ARRAY_TYPE_D(2);return r[0]=e,r[1]=t,r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,r){return e[0]=t,e[1]=r,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}};o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},o.scaleAndAdd=function(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e},o.distance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(r*r+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],a=t[1]-e[1];return r*r+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var r=t[0],a=t[1],s=r*r+a*a;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,r){var a=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=a,e},o.lerp=function(e,t,r,a){var s=t[0],o=t[1];return e[0]=s+a*(r[0]-s),e[1]=o+a*(r[1]-o),e},o.random=function(e,t){t=t||1;var r=2*s.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},o.transformMat2=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[2]*s,e[1]=r[1]*a+r[3]*s,e},o.transformMat2d=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[2]*s+r[4],e[1]=r[1]*a+r[3]*s+r[5],e},o.transformMat3=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[3]*s+r[6],e[1]=r[1]*a+r[4]*s+r[7],e},o.transformMat4=function(e,t,r){var a=t[0],s=t[1];return e[0]=r[0]*a+r[4]*s+r[12],e[1]=r[1]*a+r[5]*s+r[13],e},o.forEach=(a=o.create(),function(e,t,r,s,o,n){var i,u;for(t||(t=2),r||(r=0),u=s?Math.min(s*t+r,e.length):e.length,i=r;i<u;i+=t)a[0]=e[i],a[1]=e[i+1],o(a,a,n),e[i]=a[0],e[i+1]=a[1];return e}),o.str=function(e){return"dvec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var r=e[0],a=e[1],o=t[0],n=t[1];return Math.abs(r-o)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-n)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(n))},e.exports=o}])},e.exports=t()},420:e=>{var t=document.createElement("canvas").getContext("2d");function r(e){this.maxTexSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.highTexSize=this.maxTexSize}r.MakeText=function(e,r){var a=function(e,r,a){return t.canvas.width=128,t.canvas.height=26,t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#ffffff",t.strokeStyle="#ffffff",t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillText(e,64,13),t.canvas}(r),s=a.width,o=a.height,n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),{texture:n,width:s,height:o}},r.CreateProgram=function(e,t,r){var a=e.createProgram();if(e.attachShader(a,t),e.attachShader(a,r),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw"program filed to link:"+e.getProgramInfoLog(a);return a},r.CreateShaderFromScript=function(e,t,r){var a=document.getElementById(t);if(!a)throw"*** Error: unknown script element"+t;var s=a.text;if(!r)if("x-shader/x-vertex"==a.type)r=e.VERTEX_SHADER;else if("x-shader/x-fragment"==a.type)r=e.FRAGMENT_SHADER;else if(!r)throw"*** Error: shader type not set";return function(e,t,r){var a=e.createShader(r);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw"could not compile shader:"+e.getShaderInfoLog(a);return a}(e,s,r)},r.InitWebGL=function(e){try{gl=e.getContext("webgl",{alpha:!1})||e.getContext("experimental-webgl",{alpha:!1})||e.getContext("3d",{alpha:!1})}catch(e){}return gl||(gl=null),gl},e.exports=r},718:(e,t,r)=>{var a,s,o,n;r(664),UtilitiesMath=r(322),View=r(195),Graphics=r(420),World=r(813),Body=r(707),Rings=r(707),Bodies=r(573),Orbits=r(47),Render=r(472),Resources=r(507),ResourcesTextures=r(405),ResourcesImage=r(714),ResourceCollections=r(346),BlackBodyColor=r(329);var i,u=1/180*Math.PI,l=180/Math.PI,c=667384e-16,h=149597870700,d=1/h;function m(){this.start=0,this.count=0,this.fps=0}function p(){this.pos=dvec3.create(),this.parentPos=dvec3.create(),this.parent=0,this.time=0}function v(){this.pos,this.vel,this.mass,this.size=0}function f(){this.middleDown=!1,this.leftDown=!1,this.x=0,this.y=0,this.leftDownX=0,this.lefteDownY=0,this.leftDownTime=Date.now(),this.middleDownX=0,this.middleDownY=0}function M(){this.gl,this.view=new View,this.view.fov=Math.PI/8,this.view.near=1e5,this.view.far=61504e5,this.view.distance=10*h,this.view.Orbit(dvec3.fromValues(0,-Math.PI/2,0)),this.mouse=new f,this.count=0,this.iterations=16,this.zoomIn=!1,this.zoomOut=!1,this.addObject=!1,this.addBody=new Body,this.resources=new Resources,this.tex=0,this.maxImageMemory=268435456,this.shaders={},this.buffers={},this.renderOptions={gamma:2.2,numLines:512,cullingDistance:16,renderLines:!0,renderCircles:!0,renderNames:!0,renderClouds:!0,renderGlow:!0,renderAtmosphere:3},this.integrationMethod=1;var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight,this.view.width=window.innerWidth,this.view.height=window.innerHeight,e.onmousedown=this.MouseDownEvent.bind(this),e.onmouseup=this.MouseUpEvent.bind(this),e.onmousemove=this.MouseMoveEvent.bind(this),e.onclick=this.MouseClick.bind(this),e.ondblclick=this.MouseDoubleClick.bind(this),e.addEventListener?(e.addEventListener("mousewheel",this.MouseScrollEvent.bind(this),!1),e.addEventListener("DOMMouseScroll",this.MouseScrollEvent.bind(this),!1),e.addEventListener("touchmove",this.TouchMoveEvent.bind(this),!1),e.addEventListener("touchstart",this.TouchStartEvent.bind(this),!1),e.addEventListener("touchend",this.TouchEndEvent.bind(this),!1)):e.attachEvent("onmousewheel",this.MouseScrollEvent.bind(this),!1),window.addEventListener("keydown",this.KeyDownEvent.bind(this),!1),e.onselectstart=function(){return!1},document.getElementById("bDelete").onclick=this.DeleteSelected.bind(this);var t=document.getElementById("bZoomIn");t.onmousedown=function(){i.zoomIn=!0},t.onmouseup=function(){i.zoomIn=!1};var r=document.getElementById("bZoomOut");r.onmousedown=function(){i.zoomOut=!0},r.onmouseup=function(){i.zoomOut=!1},this.time=1e3,this.scale=1,this.defaultBodies=new Array,this.obj=new Array,this.center=0,this.timePassed=0,this.fpsAim=60,this.ips=new m,this.fps=new m,this.nonRenderTime=0,this.blackBodyColor=new BlackBodyColor,this.resourceCollections=new ResourceCollections(this.resources),Bodies.LoadBodies(this.defaultBodies),this.ProcessBodies(this.defaultBodies);var a=Graphics.InitWebGL(e);if(a){this.gl=!0,this.graphics=new Graphics(a),this.planetTextures=new Array(14);for(var s=1;s<14;s++)this.planetTextures[s]=new ResourcesTextures,this.planetTextures[s].width=1<<s+1,this.planetTextures[s].height=1<<s+0;this.InitShaders(a),this.world=World.CreateWorldVerts(a),this.InitTextures(a,this.defaultBodies),this.CopyBodies(this.obj,this.defaultBodies),this.InitBuffers(a),a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)}else this.gl=!1;for(this.objectsMass=new v,this.objectsMass.size=this.obj.length,this.objectsMass.pos=new Float64Array(3*this.obj.length),this.objectsMass.vel=new Float64Array(3*this.obj.length),this.objectsMass.mass=new Float64Array(this.obj.length),s=0;s<this.obj.length;s++)this.obj[s].index=s,this.objectsMass.pos[3*s+0]=this.obj[s].pos[0],this.objectsMass.pos[3*s+1]=this.obj[s].pos[1],this.objectsMass.pos[3*s+2]=this.obj[s].pos[2],this.objectsMass.vel[3*s+0]=this.obj[s].vel[0],this.objectsMass.vel[3*s+1]=this.obj[s].vel[1],this.objectsMass.vel[3*s+2]=this.obj[s].vel[2],this.objectsMass.mass[s]=this.obj[s].mass;for(s=0;s<this.obj.length;s++)for(j=0;j<this.renderOptions.numLines;j++)this.obj[s].prev[j]=new p;this.SelectBody(this.center);var o=parseInt(document.getElementById("timeslider").value);this.time=this.GetTime(o),this.ips.Update((new Date).getTime()),this.fps.Update((new Date).getTime()),requestAnimationFrame(this.Update.bind(this))}m.prototype.Update=function(e){e>this.start+1e3&&(this.fps=this.count,this.count=0,this.start+=1e3,this.start+1e3<e&&(this.start=e))},M.prototype.InitShaders=function(e){var t=Graphics.CreateShaderFromScript(e,"vStarShader"),r=Graphics.CreateShaderFromScript(e,"fStarShader"),a=Graphics.CreateProgram(e,t,r);this.shaders.starShader={program:a,u_mvp:e.getUniformLocation(a,"u_mvp"),a_pos:e.getAttribLocation(a,"a_pos"),u_pos:e.getUniformLocation(a,"u_pos"),u_color:e.getUniformLocation(a,"u_color"),u_colorBorder:e.getUniformLocation(a,"u_colorBorder"),u_lineWidth:e.getUniformLocation(a,"u_lineWidth"),u_dither:e.getUniformLocation(a,"u_dither"),u_gamma:e.getUniformLocation(a,"u_gamma"),u_radius:e.getUniformLocation(a,"u_radius")};var s=Graphics.CreateShaderFromScript(e,"vCircleShader"),o=Graphics.CreateShaderFromScript(e,"fCircleShader"),n=Graphics.CreateProgram(e,s,o);this.shaders.circleShader={program:n,u_mvp:e.getUniformLocation(n,"u_mvp"),a_pos:e.getAttribLocation(n,"a_pos"),u_pos:e.getUniformLocation(n,"u_pos"),u_color:e.getUniformLocation(n,"u_color"),u_colorBorder:e.getUniformLocation(n,"u_colorBorder"),u_lineWidth:e.getUniformLocation(n,"u_lineWidth"),u_radius:e.getUniformLocation(n,"u_radius")};var i=Graphics.CreateShaderFromScript(e,"vTextShader"),u=Graphics.CreateShaderFromScript(e,"fTextShader"),l=Graphics.CreateProgram(e,i,u);this.shaders.textShader={program:l,u_mvp:e.getUniformLocation(l,"u_mvp"),a_pos:e.getAttribLocation(l,"a_pos"),a_texCoord:e.getAttribLocation(l,"a_texCoord"),u_texture:e.getUniformLocation(l,"u_texture")};var c=Graphics.CreateShaderFromScript(e,"vLineShader"),h=Graphics.CreateShaderFromScript(e,"fLineShader"),d=Graphics.CreateProgram(e,c,h);this.shaders.lineShader={program:d,u_mvp:e.getUniformLocation(d,"u_mvp"),a_pos:e.getAttribLocation(d,"a_pos"),a_index:e.getAttribLocation(d,"a_index"),u_index:e.getUniformLocation(d,"u_index"),u_color:e.getUniformLocation(d,"u_color")};var m=Graphics.CreateShaderFromScript(e,"vFlatShader"),p=Graphics.CreateShaderFromScript(e,"fFlatShader"),v=Graphics.CreateProgram(e,m,p);this.shaders.flatShader={program:v,u_mvp:e.getUniformLocation(v,"u_mvp"),a_pos:e.getAttribLocation(v,"a_pos"),u_color:e.getUniformLocation(v,"u_color")};var f=Graphics.CreateShaderFromScript(e,"vPlanetShader"),M=Graphics.CreateShaderFromScript(e,"fPlanetShader"),g=Graphics.CreateProgram(e,f,M);this.shaders.planetShader={program:g,u_mvp:e.getUniformLocation(g,"u_mvp"),u_size:e.getUniformLocation(g,"u_size"),u_light:e.getUniformLocation(g,"u_light"),u_sampler:e.getUniformLocation(g,"u_sampler"),u_specular:e.getUniformLocation(g,"u_specular"),u_camera:e.getUniformLocation(g,"u_camera"),u_ambient:e.getUniformLocation(g,"u_ambient"),u_gamma:e.getUniformLocation(g,"u_gamma"),a_pos:e.getAttribLocation(g,"a_pos"),a_texCoord:e.getAttribLocation(g,"a_texCoord")};var x=Graphics.CreateShaderFromScript(e,"vCloudShader"),b=Graphics.CreateShaderFromScript(e,"fCloudShader"),S=Graphics.CreateProgram(e,x,b);this.shaders.cloudShader={program:S,u_mvp:e.getUniformLocation(S,"u_mvp"),u_size:e.getUniformLocation(S,"u_size"),u_light:e.getUniformLocation(S,"u_light"),u_sampler:e.getUniformLocation(S,"u_sampler"),u_ambient:e.getUniformLocation(S,"u_ambient"),u_gamma:e.getUniformLocation(S,"u_gamma"),a_pos:e.getAttribLocation(S,"a_pos"),a_texCoord:e.getAttribLocation(S,"a_texCoord")};var w=Graphics.CreateShaderFromScript(e,"vAtmosphereShader"),y=Graphics.CreateShaderFromScript(e,"fAtmosphereShader"),I=Graphics.CreateProgram(e,w,y);this.shaders.atmosphereShader={program:I,u_mvp:e.getUniformLocation(I,"u_mvp"),u_size:e.getUniformLocation(I,"u_size"),u_light:e.getUniformLocation(I,"u_light"),u_color:e.getUniformLocation(I,"u_color"),u_camera:e.getUniformLocation(I,"u_camera"),u_ambient:e.getUniformLocation(I,"u_ambient"),u_dither:e.getUniformLocation(I,"u_dither"),a_pos:e.getAttribLocation(I,"a_pos")};var R=Graphics.CreateShaderFromScript(e,"vAtmosphereHighShader"),E=Graphics.CreateShaderFromScript(e,"fAtmosphereHighShader"),D=Graphics.CreateProgram(e,R,E);this.shaders.atmosphereHighShader={program:D,u_mvp:e.getUniformLocation(D,"u_mvp"),u_size:e.getUniformLocation(D,"u_size"),u_innerRadius:e.getUniformLocation(D,"u_innerRadius"),u_outerRadius:e.getUniformLocation(D,"u_outerRadius"),u_light:e.getUniformLocation(D,"u_light"),u_color:e.getUniformLocation(D,"u_color"),u_camera:e.getUniformLocation(D,"u_camera"),u_ambient:e.getUniformLocation(D,"u_ambient"),u_sunIntensity:e.getUniformLocation(D,"u_sunIntensity"),u_rayleighWavelength:e.getUniformLocation(D,"u_rayleighWavelength"),u_mieWavelength:e.getUniformLocation(D,"u_mieWavelength"),u_heightScaleRayleigh:e.getUniformLocation(D,"u_heightScaleRayleigh"),u_heightScaleMie:e.getUniformLocation(D,"u_heightScaleMie"),u_g:e.getUniformLocation(D,"u_g"),a_pos:e.getAttribLocation(D,"a_pos")};var B=Graphics.CreateShaderFromScript(e,"vRingShader"),A=Graphics.CreateShaderFromScript(e,"fRingShader"),_=Graphics.CreateProgram(e,B,A);this.shaders.ringShader={program:_,u_mvp:e.getUniformLocation(_,"u_mvp"),u_start:e.getUniformLocation(_,"u_start"),u_length:e.getUniformLocation(_,"u_length"),u_color:e.getUniformLocation(_,"u_color"),a_pos:e.getAttribLocation(_,"a_pos")};var F=Graphics.CreateShaderFromScript(e,"vSkyShader"),T=Graphics.CreateShaderFromScript(e,"fSkyShader"),L=Graphics.CreateProgram(e,F,T);this.shaders.skyShader={program:L,u_mvp:e.getUniformLocation(L,"u_mvp"),u_texture:e.getUniformLocation(L,"u_texture"),a_pos:e.getAttribLocation(L,"a_pos"),a_texCoord:e.getAttribLocation(L,"a_texCoord")};var P=Graphics.CreateShaderFromScript(e,"vOrbitShader"),U=Graphics.CreateShaderFromScript(e,"fOrbitShader"),j=Graphics.CreateProgram(e,P,U);this.shaders.orbitShader={program:j,u_length:e.getUniformLocation(j,"u_length"),u_height:e.getUniformLocation(j,"u_height"),u_offset:e.getUniformLocation(j,"u_offset"),u_mvp:e.getUniformLocation(j,"u_mvp"),u_color:e.getUniformLocation(j,"u_color"),a_pos:e.getAttribLocation(j,"a_angle")}},M.prototype.CopyBodies=function(e,t){for(var r=0;r<t.length;r++){var a=t[r],s=new Body;s.type=a.type,dvec3.copy(s.pos,a.pos),dvec3.copy(s.vel,a.vel),s.obliquity=a.obliquity,s.rotOffset=a.rotOffset,s.ra=a.ra,s.rotation=a.rotation,dvec4.copy(s.screenPos,a.screenPos),dvec4.copy(s.atmosphere,a.atmosphere),s.atmosphereHeight=a.atmosphereHeight,vec3.copy(s.rayleighWavelength,a.rayleighWavelength),vec3.copy(s.mieWavelength,a.mieWavelength),s.heightScaleRayleigh=a.heightScaleRayleigh,s.heightScaleMie=a.heightScaleMie,s.g=a.g,vec3.copy(s.colorLine,a.colorLine),vec3.copy(s.color,a.color),s.albedo=a.albedo,s.temperature=a.temperature,s.luminosity=a.luminosity,s.magnitudeAbsolute=a.magnitudeAbsolute,s.magnitudeApparent=a.magnitudeApparent,s.age=a.age,s.cloudHeight=a.cloudHeight,s.visible=a.visible,s.mass=a.mass,s.radius=a.radius,s.name=a.name,s.rings=a.rings,s.index=a.index,s.size=a.size,s.parent=a.parent,s.nextPrev=a.nextPrev,s.prev=new Array(a.prev.length);for(var o=0;o<a.prev.length;o++)s.prev[o]=a.prev[o];s.resources=a.resources,e.push(s)}},M.prototype.TestTexture=function(e){var t=1024,r=t,a=document.createElement("canvas");a.width=t,a.height=r,a.getContext("2d");var s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null);for(var o=0;o<10;o++){var n=new Uint8Array(t*r*4);e.texSubImage2D(e.TEXTURE_2D,o,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,n),t>>=1,r>>=1}e.bindTexture(e.TEXTURE_2D,null)},M.prototype.InitTextures=function(e,t,r){var i=this,u=4096;this.graphics.maxTexSize<u&&(u=this.graphics.maxTexSize),UtilitiesMath.MSB(u),this.buffers.blankTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.buffers.blankTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),a=new Image,this.buffers.skyTexture=this.buffers.blankTexture,this.buffers.skyTextureTemp=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.buffers.skyTextureTemp),e.texImage2D(e.TEXTURE_2D,0,e.RGB,u,u/2,0,e.RGB,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null),this.resources.AddPriority("images/starmap/starmap_"+u+".jpg",a,(function(t){i.resources.UploadTexture(i.buffers.skyTextureTemp,t,!1,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGB,e.RGB,e.UNSIGNED_BYTE,!0,0,(function(e){i.buffers.skyTexture=e,a=null}))})),n=new Image,this.buffers.defaultCloudsTexture=this.buffers.blankTexture,this.buffers.defaultCloudsTextureTemp=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.buffers.defaultCloudsTextureTemp),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,u,u/2,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindTexture(e.TEXTURE_2D,null),this.resources.AddPriority("images/clouds_"+u+".jpg",n,(function(t){i.resources.UploadTexture(i.buffers.defaultCloudsTextureTemp,t,!1,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,!0,0,(function(e){i.buffers.defaultCloudsTexture=e,n=null}))})),s=this.resourceCollections.Add(e,this.buffers.blankTexture,"images/rhea/rhea_color","jpg",256,128,u,u/2,!1,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGB,e.RGB,e.UNSIGNED_BYTE,3),o=this.resourceCollections.Add(e,this.buffers.blankTexture,"","",256,128,u,u/2,!1,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGB,e.RGB,e.UNSIGNED_BYTE,3);for(var l=0;l<t.length;l++){var c,h;t[l].resources.textureLocation.length?((c=256)<t[l].resources.textureLow&&(c=t[l].resources.textureLow),(h=u)>t[l].resources.textureHigh&&(h=t[l].resources.textureHigh),t[l].resources.resource=this.resourceCollections.Add(e,this.buffers.blankTexture,t[l].resources.textureLocation,"jpg",c,c/2,h,h/2,t[l].resources.imageSplit,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGB,e.RGB,e.UNSIGNED_BYTE,3)):t[l].resources.resource=s,t[l].resources.textureSpecularLocation.length?((c=256)<t[l].resources.textureLow&&(c=t[l].resources.textureLow),(h=u)>t[l].resources.textureHigh&&(h=t[l].resources.textureHigh),t[l].resources.resourceSpecular=this.resourceCollections.Add(e,this.buffers.blankTexture,t[l].resources.textureSpecularLocation,"jpg",c,c/2,h,h/2,t[l].resources.imageSplit,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.REPEAT,e.REPEAT,!0,e.RGB,e.RGB,e.UNSIGNED_BYTE,3)):t[l].resources.resourceSpecular=o}for(l=0;l<t.length;l++)if(t[l].rings){var d=t[l].rings;d.texture=this.buffers.blankTexture,u=d.textureHigh,this.graphics.maxTexSize<u&&(u=this.graphics.maxTexSize),d.image=new Image,this.resources.Add(d.textureLocation+"_"+u+"."+d.textureFormat,d.image,function(t){return function(r){i.obj[t].rings.textureTemp=i.resourceCollections.GetTexture(e,r.width,r.height,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.CLAMP_TO_EDGE,e.CLAMP_TO_EDGE,!1,e.RGBA,e.RGBA,e.UNSIGNED_BYTE),i.resources.UploadTexture(i.obj[t].rings.textureTemp,r,!1,e.LINEAR,e.LINEAR_MIPMAP_LINEAR,e.CLAMP_TO_EDGE,e.CLAMP_TO_EDGE,!0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,!0,0,(function(e){i.obj[t].rings.texture=e,i.obj[t].rings.image=null}))}}(l))}},M.prototype.KeyDownEvent=function(e){var t=0,r=0,a=0,s=1/64;switch(e.keyCode){case 37:case 65:t=-3.14*s;break;case 38:case 87:r=3.14*s;break;case 39:case 68:t=3.14*s;break;case 40:case 83:r=-3.14*s;break;case 81:a=3.14*s;break;case 69:a=-3.14*s}this.view.Orbit(dvec3.fromValues(t,r,a))},M.prototype.MouseDownEvent=function(e){var t=document.getElementById("canvas"),r=t.getBoundingClientRect(),a=(t.style.borderWidth,e.clientX-r.left),s=e.clientY-r.top;1==e.button&&(this.mouse.middleDown=!0,this.mouse.middleDownX=a,this.mouse.middleDownY=s),0==e.button&&(this.mouse.leftDown=!0,this.mouse.leftDownX=a,this.mouse.leftDownY=s,this.mouse.leftDownTime=Date.now()),this.MouseDown()},M.prototype.MouseUpEvent=function(e){1==e.button&&(this.mouse.middleDown=!1),0==e.button&&(this.mouse.leftDown=!1,this.mouse.leftUpTime=Date.now()),this.MouseUp()},M.prototype.MouseMove=function(){if(this.mouse.leftDown){var e=(this.mouse.leftDownX-this.mouse.x)/this.view.width*Math.PI*2,t=(this.mouse.leftDownY-this.mouse.y)/this.view.width*Math.PI*2;this.view.Orbit(dvec3.fromValues(e,t,0)),this.mouse.leftDownX=this.mouse.x,this.mouse.leftDownY=this.mouse.y}if(this.addObject){dmat4.create();var r=dmat4.create(),a=dvec4.transformMat4(dvec4.create(),dvec4.fromValues(0,0,1,0),r),s=dvec3.fromValues(this.view.matrixCamera[12],this.view.matrixCamera[13],this.view.matrixCamera[14]),o=dvec3.sub(dvec3.create(),this.obj[this.center].pos,s),n=dvec4.transformMat4(dvec4.create(),dvec4.fromValues(this.mouse.x*this.view.far,(this.view.height-this.mouse.y-1)*this.view.far,this.view.far,this.view.far),this.view.matrixInvVPV),i=dvec3.sub(dvec3.create(),n,s);n=dvec3.normalize(dvec3.create(),i);var u=dvec3.dot(n,a),l=dvec3.dot(o,a)/u,h=dvec3.scaleAndAdd(dvec3.create(),s,n,l);dvec3.copy(this.addBody.pos,h),dvec3.sub(i,h,this.obj[this.center].pos),dvec3.normalize(n,i);var d=dvec3.fromValues(0,0,1);dvec3.cross(i,d,n),l=dvec3.distance(h,this.obj[this.center].pos);var m=Math.sqrt(this.obj[this.center].mass*c/l);dvec3.scale(n,i,m),dvec3.add(i,n,this.obj[this.center].vel),dvec3.copy(this.addBody.vel,i)}},M.prototype.MouseDown=function(){},M.prototype.MouseUp=function(){if(this.addObject){this.addObject=!1;var e=this.obj.length;this.obj[e]=this.addBody,this.addBody=new Body,this.addBody.mass=597219e19,this.addBody.radius=6371e3,this.objectsMass.size=this.obj.length,this.objectsMass.pos=new Float64Array(3*this.obj.length),this.objectsMass.vel=new Float64Array(3*this.obj.length),this.objectsMass.mass=new Float64Array(this.obj.length);for(var t=0;t<this.obj.length;t++)this.objectsMass.pos[3*t+0]=this.obj[t].pos[0],this.objectsMass.pos[3*t+1]=this.obj[t].pos[1],this.objectsMass.pos[3*t+2]=this.obj[t].pos[2],this.objectsMass.vel[3*t+0]=this.obj[t].vel[0],this.objectsMass.vel[3*t+1]=this.obj[t].vel[1],this.objectsMass.vel[3*t+2]=this.obj[t].vel[2],this.objectsMass.mass[t]=this.obj[t].mass}},M.prototype.MouseMoveEvent=function(e){var t=document.getElementById("canvas"),r=t.getBoundingClientRect();t.style.borderWidth,e.clientX,r.left,e.clientY,r.top,this.mouse.x=e.clientX-r.left,this.mouse.y=e.clientY-r.top,this.MouseMove()},M.prototype.MouseScrollEvent=function(e){e.preventDefault();var t=e.detail?-1*e.detail:e.wheelDelta/40,r=document.getElementById("canvas"),a=r.getBoundingClientRect(),s=(r.style.borderWidth,e.clientX,a.left,e.clientY,a.top,1);t>0?s/=1.1:t<0&&(s*=1.1),this.view.distance*=s,this.view.CalculateMatrix()},M.prototype.TouchMoveEvent=function(e){e.preventDefault();var t=document.getElementById("canvas"),r=t.getBoundingClientRect(),a=(t.style.borderWidth,e.targetTouches[0]);a.pageX,r.left,a.pageY,r.top,a.pageX,r.left,a.pageY,r.top,this.mouse.x=a.pageX-r.left,this.mouse.y=a.pageY-r.top,this.MouseMove()},M.prototype.TouchStartEvent=function(e){var t=document.getElementById("canvas"),r=t.getBoundingClientRect(),a=(t.style.borderWidth,e.targetTouches[0]),s=a.pageX-r.left,o=a.pageY-r.top;this.mouse.leftDown=!0,this.mouse.leftDownX=s,this.mouse.leftDownY=o,this.MouseDown()},M.prototype.TouchEndEvent=function(e){e.targetTouches[0],1==a_eventData.button&&(this.mouse.middleDown=!1),0==a_eventData.button&&(this.mouse.leftDown=!1),this.MouseUp()},M.prototype.SelectBody=function(e){var t=document.getElementById("spanSelected"),r=this.obj[e].name;t.innerHTML=r;var a=document.getElementById("textMass"),s=this.obj[e].mass;a.value=s;var o=document.getElementById("textRadius"),n=this.obj[e].radius/1e3;o.value=n;var i=document.getElementById("textTemperature"),u=this.obj[e].temperature;i.value=u;var c=document.getElementById("textAge"),h=this.obj[e].age;c.value=h,document.getElementById("textTilt").value=this.obj[e].obliquity*l,document.getElementById("textOrientation").value=this.obj[e].ra*l},M.prototype.RemoveEscapeObjects=function(){for(var e=0,t=dvec3.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),r=dvec3.fromValues(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),a=new Float64Array(this.obj.length),s=new Float64Array(this.obj.length),o=new Float64Array(this.obj.length),n=0;n<this.obj.length;n++)e+=this.objectsMass.mass[n];var i=dvec3.create(),u=dvec3.create();for(n=0;n<this.obj.length;n++){var l=this.obj[n].parent;dvec3.set(i,this.objectsMass.pos[3*n],this.objectsMass.pos[3*n+1],this.objectsMass.pos[3*n+2]),dvec3.set(u,this.objectsMass.pos[3*l],this.objectsMass.pos[3*l+1],this.objectsMass.pos[3*l+2]),o[n]=dvec3.distance(i,u),dvec3.set(i,this.objectsMass.vel[3*n],this.objectsMass.vel[3*n+1],this.objectsMass.vel[3*n+2]),dvec3.set(u,this.objectsMass.vel[3*l],this.objectsMass.vel[3*l+1],this.objectsMass.vel[3*l+2]),s[n]=Math.sqrt(2*c*e/o[n]),a[n]=dvec3.distance(i,u),a[n]<s[n]&&(t[0]=Math.min(t[0],this.objectsMass.pos[3*n+0]),t[1]=Math.min(t[1],this.objectsMass.pos[3*n+1]),t[2]=Math.min(t[2],this.objectsMass.pos[3*n+2]),r[0]=Math.max(r[0],this.objectsMass.pos[3*n+0]),r[1]=Math.max(r[1],this.objectsMass.pos[3*n+1]),r[2]=Math.max(r[2],this.objectsMass.pos[3*n+2]))}var h=dvec3.distance(t,r);for(n=this.obj.length-1;n>=0;n--)a[n]>s[n]&&o[n]>2*h&&(this.DeleteBody(n),this.center>n&&this.center--)},M.prototype.DeleteSelected=function(){var e=this.obj[this.center].parent;this.DeleteBody(this.center),this.center=e},M.prototype.DeleteBody=function(e){if(this.gl){var t=document.getElementById("canvas"),r=t.getContext("webgl")||t.getContext("experimental-webgl")||t.getContext("3d");r.deleteBuffer(this.obj[e].linesVertexBuffer),r.deleteTexture(this.obj[e].textTexture.texture)}for(var a=new Float64Array(this.objectsMass.pos.length-3),s=new Float64Array(this.objectsMass.vel.length-3),o=new Float64Array(this.objectsMass.mass.length-1),n=0;n<e;n++)a[3*n]=this.objectsMass.pos[3*n],a[3*n+1]=this.objectsMass.pos[3*n+1],a[3*n+2]=this.objectsMass.pos[3*n+2],s[3*n]=this.objectsMass.vel[3*n],s[3*n+1]=this.objectsMass.vel[3*n+1],s[3*n+2]=this.objectsMass.vel[3*n+2],o[n]=this.objectsMass.mass[n];for(n=e;n<this.objectsMass.mass.length-1;n++)a[3*n]=this.objectsMass.pos[3*n+3],a[3*n+1]=this.objectsMass.pos[3*n+4],a[3*n+2]=this.objectsMass.pos[3*n+5],s[3*n]=this.objectsMass.vel[3*n+3],s[3*n+1]=this.objectsMass.vel[3*n+4],s[3*n+2]=this.objectsMass.vel[3*n+5],o[n]=this.objectsMass.mass[n+1];for(this.objectsMass.pos=a,this.objectsMass.vel=s,this.objectsMass.mass=o,this.objectsMass.size--,this.obj.splice(e,1),n=0;n<this.obj.length;n++)this.obj[n].parent>=e&&this.obj[n].parent--},M.prototype.AddBody=function(){},M.prototype.CreateBody=function(e,t){for(t.mass=597219e19,t.radius=6371e3,t.rotation=7292115e-11,t.pos[0]=0,t.pos[1]=0,t.pos[2]=0,t.vel[0]=0,t.vel[1]=0,t.vel[2]=0,t.name="New",j=0;j<this.renderOptions.numLines;j++)t.prev[j]=new p;var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);var a=new Float32Array(4*this.renderOptions.numLines+4);e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),t.linesVertexBuffer=r,t.textTexture=Graphics.MakeText(e,t.name),t.resources=new BodyResources,t.resources.texture=this.buffers.defaultPlanetTexture},M.prototype.CheckSOI=function(){for(var e=0;e<this.obj.length;e++){for(var t=Number.MAX_VALUE,r=-1,a=0;a<this.obj.length;a++)if(e!=a&&this.obj[e].mass<this.obj[a].mass){var s=this.obj[e].SOI(this.obj[a]);dvec3.dist(this.obj[e].pos,this.obj[a].pos);s<t&&s>0&&(t=s,r=a)}var o=this.obj[e].nextPrev%this.renderOptions.numLines;this.obj[e].prev[o].parent=r}},M.prototype.ProcessBodies=function(e){for(var t=0;t<e.length;t++)if(e[t].mass<142395e24)e[t].type=1;else{e[t].type=0,e[t].temperature=Orbits.CalculateStarTemperature(e[t].mass,e[t].age),e[t].radius=Orbits.CalculateStarRadius(e[t].mass),e[t].luminosity=Orbits.TemperatureToLuminosity(e[t].temperature,e[t].radius),e[t].magnitudeAbsolute=Orbits.LuminosityToMag(e[t].luminosity,4.83,3846e23);var r=this.blackBodyColor.GetColor(e[t].temperature);vec3.copy(e[t].color,r)}},M.prototype.GetTime=function(e){switch(e){case 0:e=0;break;case 1:e=1;break;case 2:e=2;break;case 3:e=4;break;case 4:e=8;break;case 5:e=15;break;case 6:e=30;break;case 7:e=60;break;case 8:e=120;break;case 9:e=240;break;case 10:e=480;break;case 11:e=900;break;case 12:e=1800;break;case 13:e=3600;break;case 14:e=7200;break;case 15:e=10800;break;case 16:e=21600;break;case 17:e=43200;break;case 18:e=86400;break;case 19:e=172800;break;case 20:e=345600;break;case 21:e=604800;break;case 22:e=1209600;break;case 23:e=2592e3;break;case 24:e=5184e3}return e},M.prototype.InitBuffers=function(e){this.buffers.squareVerticesBuffer=e.createBuffer(),e.bindBuffer(gl.ARRAY_BUFFER,this.buffers.squareVerticesBuffer);var t=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]);e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);for(var r=0;r<this.obj.length;r++)this.obj[r].textTexture=Graphics.MakeText(e,this.obj[r].name);this.buffers.textVerticiesBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.textVerticiesBuffer);var a=new Float32Array([-1,1,0,1,-1,-1,0,1,1,-1,0,1,1,1,0,1]);e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),this.buffers.textTexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.textTexBuffer);var s=new Float32Array([0,0,0,1,1,1,1,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),this.buffers.textIndiciesBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffers.textIndiciesBuffer);var o=new Uint16Array([0,1,2,0,2,3]);e.bufferData(e.ELEMENT_ARRAY_BUFFER,o,e.STATIC_DRAW),this.buffers.linesIndexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.linesIndexBuffer);var n=new Float32Array(this.renderOptions.numLines+1);for(r=0;r<this.renderOptions.numLines;r++)n[r]=r;for(n[this.renderOptions.numLines]=0,e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),r=0;r<this.obj.length;r++){var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);var u=new Float32Array(4*this.renderOptions.numLines+4);e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),this.obj[r].linesVertexBuffer=i}var l=new Uint8Array([0,32,8,40,2,34,10,42,48,16,56,24,50,18,58,26,12,44,4,36,14,46,6,38,60,28,52,20,62,30,54,22,3,35,11,43,1,33,9,41,51,19,59,27,49,17,57,25,15,47,7,39,13,45,5,37,63,31,55,23,61,29,53,21]);this.buffers.ditherTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.buffers.ditherTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,8,8,0,e.LUMINANCE,e.UNSIGNED_BYTE,l),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.bindTexture(e.TEXTURE_2D,null),this.buffers.orbitVertexBuffer=e.createBuffer(),e.bindBuffer(gl.ARRAY_BUFFER,this.buffers.orbitVertexBuffer);var c=new Float32Array(this.renderOptions.numLines);for(r=0;r<this.renderOptions.numLines;r++)c[r]=2*Math.PI/this.renderOptions.numLines*r;e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW)},M.prototype.MouseClick=function(e){this.mouse.leftUpTime-this.mouse.leftDownTime<500&&this.MouseDoubleClick(e)},M.prototype.MouseDoubleClick=function(e){var t=document.getElementById("canvas"),r=t.getBoundingClientRect(),a=(t.style.borderWidth,e.clientX-r.left),s=this.view.height-(e.clientY-r.top)-1;this.view.matrixCamera[12]-=this.obj[this.center].pos[0],this.view.matrixCamera[13]-=this.obj[this.center].pos[1],this.view.matrixCamera[14]-=this.obj[this.center].pos[2];for(var o=-1,n=Number.MAX_VALUE,i=0;i<this.obj.length;i++){var u=dvec4.transformMat4(dvec4.create(),dvec4.fromValues(this.obj[i].pos[0],this.obj[i].pos[1],this.obj[i].pos[2],1),this.view.matrixVPV);u[0]/=u[3],u[1]/=u[3];var l=Math.max(Render.CircleSize(this.obj[i].mass),4),c=(a-u[0])*(a-u[0])+(s-u[1])*(s-u[1]);c<n&&this.obj[i].visible&&c<l*l&&(o=i,n=c)}o>=0&&(this.center=o,this.SelectBody(this.center),this.view.matrixCamera[12]+=this.obj[this.center].pos[0],this.view.matrixCamera[13]+=this.obj[this.center].pos[1],this.view.matrixCamera[14]+=this.obj[this.center].pos[2])},M.prototype.UpdatePhysics=function(e,t,r){var a=!0,s=0,o=parseInt(document.getElementById("timeslider").value),n=this.GetTime(o);for(n!=this.time&&(this.time=n);a&&this.time>0;)0==this.integrationMethod?Orbits.BasicIntegration(this.objectsMass,this.time,this.iterations):1==this.integrationMethod?Orbits.VerletIntegration(this.objectsMass,this.time,this.iterations):2==this.integrationMethod&&Orbits.ForestRuthIntegration(this.objectsMass,this.time,this.iterations),s+=this.iterations,this.timePassed+=this.iterations*this.time,(new Date).getTime()>r?(a=!1,this.iterations--):this.iterations++;this.ips.count+=s;var i=0;this.CheckSOI();for(var u=0;u<this.obj.length;u++)if(this.obj[u].pos[0]=this.objectsMass.pos[3*u+0],this.obj[u].pos[1]=this.objectsMass.pos[3*u+1],this.obj[u].pos[2]=this.objectsMass.pos[3*u+2],this.obj[u].vel[0]=this.objectsMass.vel[3*u+0],this.obj[u].vel[1]=this.objectsMass.vel[3*u+1],this.obj[u].vel[2]=this.objectsMass.vel[3*u+2],i=this.obj[u].prev[(this.obj[u].nextPrev+this.renderOptions.numLines)%this.renderOptions.numLines].parent<0?0:this.obj[u].prev[(this.obj[u].nextPrev+this.renderOptions.numLines)%this.renderOptions.numLines].parent,this.obj[u].size>=2){var l=(this.obj[u].nextPrev+this.renderOptions.numLines-1)%this.renderOptions.numLines,c=(this.obj[u].nextPrev+this.renderOptions.numLines-2)%this.renderOptions.numLines,h=dvec3.sub(dvec3.create(),this.obj[u].prev[c].pos,this.obj[u].prev[c].parentPos),m=dvec3.sub(dvec3.create(),this.obj[u].prev[l].pos,this.obj[u].prev[l].parentPos),p=dvec3.sub(dvec3.create(),h,m);h=dvec3.sub(dvec3.create(),this.obj[u].prev[l].pos,this.obj[u].prev[l].parentPos),m=dvec3.sub(dvec3.create(),this.obj[u].pos,this.obj[i].pos);var v=dvec3.sub(dvec3.create(),h,m);if(Math.acos((p[0]*v[0]+p[1]*v[1]+p[2]*v[2])/(Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])))>Math.PI/this.renderOptions.numLines*2){var f=!1;if(this.obj[u].prev[l].pos[0]==this.obj[u].pos[0]&&this.obj[u].prev[l].pos[1]==this.obj[u].pos[1]&&this.obj[u].prev[l].pos[2]==this.obj[u].pos[2]||(f=!0),f){var M=(l+1)%this.renderOptions.numLines;if(this.obj[u].nextPrev=(M+1)%this.renderOptions.numLines,this.obj[u].size<this.obj[u].prev.length&&this.obj[u].size++,this.obj[u].prev[M].pos=dvec3.clone(this.obj[u].pos),this.obj[u].prev[M].parent=i,this.obj[u].prev[M].parentPos=dvec3.clone(this.obj[i].pos),this.obj[u].parent=i,this.gl){e.bindBuffer(e.ARRAY_BUFFER,this.obj[u].linesVertexBuffer);var g=new Float32Array([(this.obj[u].pos[0]-this.obj[i].pos[0])*d,(this.obj[u].pos[1]-this.obj[i].pos[1])*d,(this.obj[u].pos[2]-this.obj[i].pos[2])*d,i]);e.bufferSubData(e.ARRAY_BUFFER,4*M*4,g),0==M&&e.bufferSubData(e.ARRAY_BUFFER,4*this.renderOptions.numLines*4,g)}}}else this.gl&&(e.bindBuffer(e.ARRAY_BUFFER,this.obj[u].linesVertexBuffer),g=new Float32Array([(this.obj[u].pos[0]-this.obj[i].pos[0])*d,(this.obj[u].pos[1]-this.obj[i].pos[1])*d,(this.obj[u].pos[2]-this.obj[i].pos[2])*d,i]),e.bufferSubData(e.ARRAY_BUFFER,4*l*4,g),0==l&&e.bufferSubData(e.ARRAY_BUFFER,4*this.renderOptions.numLines*4,g))}else f=!1,this.obj[u].size<1?f=!0:(M=this.obj[u].size-1,this.obj[u].prev[M].pos[0]==this.obj[u].pos[0]&&this.obj[u].prev[M].pos[1]==this.obj[u].pos[1]&&this.obj[u].prev[M].pos[2]==this.obj[u].pos[2]||(f=!0)),f&&(M=this.obj[u].size,this.obj[u].size++,this.obj[u].prev[M].pos=dvec3.clone(this.obj[u].pos),this.obj[u].prev[M].parent=i,this.obj[u].prev[M].parentPos=dvec3.clone(this.obj[i].pos),this.obj[u].nextPrev=(M+1)%this.renderOptions.numLines,this.obj[u].parent=i,this.gl&&(e.bindBuffer(e.ARRAY_BUFFER,this.obj[u].linesVertexBuffer),g=new Float32Array([(this.obj[u].pos[0]-this.obj[i].pos[0])*d,(this.obj[u].pos[1]-this.obj[i].pos[1])*d,(this.obj[u].pos[2]-this.obj[i].pos[2])*d,i]),e.bufferSubData(e.ARRAY_BUFFER,4*M*4,g),0==M&&e.bufferSubData(e.ARRAY_BUFFER,4*this.renderOptions.numLines*4,g)));this.RemoveEscapeObjects(),this.count+=s},M.prototype.Update=function(){var e=(new Date).getTime(),t=e+1e3/this.fpsAim/2,r=document.getElementById("canvas");this.ips.Update(e),this.fps.Update(e),this.zoomIn&&(this.view.distance/=1+1/this.fps.fps*2),this.zoomOut&&(this.view.distance*=1+1/this.fps.fps*2);var a=null;this.gl&&(a=r.getContext("webgl")||r.getContext("experimental-webgl")||r.getContext("3d")),this.UpdatePhysics(a,e,t),this.resources.StreamGpu(a),Render.Render(a,this.fps,this.ips,this.timePassed,this.view,this.obj,this.center,this.shaders,this.buffers,this.world,this.renderOptions,this.time,this.addObject,this.addBody,this.resourceCollections,this.resources.imageSize),requestAnimationFrame(this.Update.bind(this))};var g=!1,x=!1,b=!1,S=!1;function w(){var e=document.getElementById("object"),t=document.getElementById("settings"),r=document.getElementById("graphics"),a=document.getElementById("controls"),s="rgba(193,193,193,0.75)",o="rgba(127,127,127,0.75)";g?(e.className+=" object-transition",document.getElementById("bObject").style.backgroundColor=s):(e.className="menu object",document.getElementById("bObject").style.backgroundColor=o),x?(t.className+=" settings-transition",document.getElementById("bSettings").style.backgroundColor=s):(t.className="menu settings",document.getElementById("bSettings").style.backgroundColor=o),b?(r.className+=" graphics-transition",document.getElementById("bGraphics").style.backgroundColor=s):(r.className="menu graphics",document.getElementById("bGraphics").style.backgroundColor=o),S?(a.className+=" controls-transition",document.getElementById("bControls").style.backgroundColor=s):(a.className="menu controls",document.getElementById("bControls").style.backgroundColor=o)}M.prototype.ChangeMass=function(e,t){if(this.obj[t].mass=e,this.objectsMass.mass[t]=this.obj[t].mass,this.obj[t].mass<142395e24)this.obj[t].type=1;else{this.obj[t].type=0,this.obj[t].temperature=Orbits.CalculateStarTemperature(this.obj[t].mass,this.obj[t].age),this.obj[t].radius=Orbits.CalculateStarRadius(this.obj[t].mass),this.obj[t].luminosity=Orbits.TemperatureToLuminosity(this.obj[t].temperature,this.obj[t].radius),this.obj[t].magnitudeAbsolute=Orbits.LuminosityToMag(this.obj[t].luminosity,4.83,3846e23);var r=this.blackBodyColor.GetColor(this.obj[t].temperature);vec3.copy(this.obj[t].color,r)}},e.exports={Initialize:function(){i=new M},AddObject:function(){i.addObject=!0;var e=document.getElementById("canvas");gl=e.getContext("webgl")||e.getContext("experimental-webgl")||e.getContext("3d"),i.CreateBody(gl,i.addBody)},ChangeMass:function(){var e=Number(document.getElementById("textMass").value);i.ChangeMass(e,i.center),i.SelectBody(i.center)},ChangeRadius:function(){i.obj[i.center].radius=1e3*Number(document.getElementById("textRadius").value)},ChangeTemperature:function(){i.obj[i.center].temperature=Number(document.getElementById("textTemperature").value)},ChangeAge:function(){i.obj[i.center].age=Number(document.getElementById("textAge").value)},ChangeTilt:function(){var e=document.getElementById("textTilt").value;!isNaN(parseFloat(e))&&isFinite(e)&&(i.obj[i.center].obliquity=e*u)},ChangeOrientation:function(){var e=document.getElementById("textOrientation").value;!isNaN(parseFloat(e))&&isFinite(e)&&(i.obj[i.center].ra=e*u)},DrawLines:function(){i.renderOptions.renderLines=!i.renderOptions.renderLines},DrawCircles:function(){i.renderOptions.renderCircles=!i.renderOptions.renderCircles},DrawNames:function(){i.renderOptions.renderNames=!i.renderOptions.renderNames},DrawClouds:function(){i.renderOptions.renderClouds=!i.renderOptions.renderClouds},DrawGlow:function(){i.renderOptions.renderGlow=!i.renderOptions.renderGlow},DrawAtmosphere:function(){var e=document.getElementById("sAtmosphere");i.renderOptions.renderAtmosphere=e.value},ChangeIntegration:function(){i.integrationMethod=document.getElementById("sIntegration").value},ToggleObject:function(){g=!g,x=!1,b=!1,S=!1,w()},ToggleSettings:function(){g=!1,x=!x,b=!1,S=!1,w()},ToggleGraphics:function(){g=!1,x=!1,b=!b,S=!1,w()},ToggleControls:function(){g=!1,x=!1,b=!1,S=!S,w()}}},47:e=>{var t={};function r(e,t,r,a,s,o){for(var n=e.length,i=.5*o,u=0;u<n;u+=3)e[u]+=t[u]*i,e[u+1]+=t[u+1]*i,e[u+2]+=t[u+2]*i;for(function(e,t,r,a){for(var s=e.length,o=0;o<s;o++)t[o]=0;for(o=0;o<s;o+=3)for(var n=0,i=0;n<s;n+=3,i++)if(n!=o){a[0]=e[n]-e[o],a[1]=e[n+1]-e[o+1],a[2]=e[n+2]-e[o+2];var u=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],l=667384e-16*r[i]/u,c=1/Math.sqrt(u)*l;t[o]+=a[0]*c,t[o+1]+=a[1]*c,t[o+2]+=a[2]*c}}(e,r,a,s),u=0;u<n;u+=3)t[u]+=r[u]*o,t[u+1]+=r[u+1]*o,t[u+2]+=r[u+2]*o;for(u=0;u<n;u+=3)e[u]+=t[u]*i,e[u+1]+=t[u+1]*i,e[u+2]+=t[u+2]*i}t.AlbedoToMag=function(e,t){return-5*Math.log(2*t*Math.sqrt(e)/1329)/Math.LN10},t.AbsoluteMagToApparent=function(e,t){var r=t/3085677581e7;return e-5*(1-Math.log(r)/Math.LN10)},t.ApparentMagToAbsolute=function(e,t){var r=t/3085677581e7;return e-5*(Math.log(r)/Math.LN10-1)},t.LuminosityToMag=function(e,t,r){return t+2.5*Math.log(e/r)/Math.LN10},t.MagToLuminosity=function(e,t,r){return r*Math.pow(10,(e-t)/2.5)},t.TemperatureToLuminosity=function(e,t){var r=e*e;return 5.670367e-8*r*r*4*Math.PI*t*t},t.CalculatePlanetMagnitude=function(e,t,r,a,s,o){var n=149597870700,i=dvec3.distance(t,r)/n,u=dvec3.distance(t,e)/n,l=dvec3.distance(e,r)/n,c=o/6371e3,h=s/3835054173774632e11,d=Math.acos((i*i+u*u-l*l)/(2*i*u)),m=u*u*i*i/(((1-d/Math.PI)*Math.cos(d)+1/Math.PI*Math.sin(d))*a*h*c*c);return 2.5*Math.log(m)/Math.LN10-5.159},t.CalculateStarMass=function(e){},t.CalculateStarRadius=function(e){var t=e/1.9891e30;return 696342e3*Math.pow(t,.78)},t.CalculateStarTemperature=function(e,t){var r=e/1.9891e30;return Math.pow(r,.625)*(.7+t/this.CalculateStarMaxAge(r)*.6)*5772},t.CalculateStarMaxAge=function(e){return 92e8*Math.pow(e,-2.5)},t.Phase=function(e,t,r){var a=dvec3.distance(e,r),s=dvec3.distance(e,t),o=dvec3.distance(t,r),n=Math.acos((a*a+s*s-o*o)/(2*a*s));return 2/3*((1-n/Math.PI)*Math.cos(n)+1/Math.PI*Math.sin(n))},t.SemimajorAxis=function(e,t,r){var a=667384e-16*r;return-a/2/(t*t/2-a/e)},t.Eccentricity=function(e,t,r,a){var s=dvec3.create(),o=dvec3.create(),n=dvec3.length(t),i=667384e-16*a,u=dvec3.length(r),l=dvec3.dot(t,r);return dvec3.scale(o,r,l/i),dvec3.scale(s,t,u*u/i-1/n),dvec3.sub(e,s,o),dvec3.length(e)},t.Inclination=function(e,t,r){dvec3.cross(e,t,r);var a=dvec3.length(e);return Math.acos(e[2]/a)},t.LongitudeAscendingNode=function(e,t){dvec3.scale(dvec3.create(),t,1/dvec3.length(t)),dvec3.set(e,-t[1],t[0],0);var r=dvec3.length(e),a=Math.acos(e[0]/r);return e[1]<0&&(a=2*Math.PI-a),t[0]<1e-10&&t[0]>-1e-10&&t[1]<1e-10&&t[1]>-1e-10&&(a=0,e[0]=1),a},t.ArgumentOfPeriapsis=function(e,t,r,a){var s,o=Math.acos(dvec3.dot(t,e)/(r*a));return e[2]<0&&(o=2*Math.PI-o),s=o,(isNaN(parseFloat(s))||!isFinite(s))&&(o=0),o},t.Period=function(e,t){return 2*Math.PI*Math.sqrt(e*e*e/(667384e-16*t))},t.BasicIntegration=function(e,t,r){var a=new Float64Array(3),s=3*e.size,o=e.pos,n=e.vel,i=e.mass;for(it=0;it<r;it++){for(var u=0;u<s;u+=3)for(var l=0,c=0;l<s;l+=3,c++)if(l!=u){a[0]=o[l]-o[u],a[1]=o[l+1]-o[u+1],a[2]=o[l+2]-o[u+2];var h=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],d=667384e-16*i[c]/h,m=1/Math.sqrt(h)*d*t;n[u]+=a[0]*m,n[u+1]+=a[1]*m,n[u+2]+=a[2]*m}for(var p=0;p<s;)o[p]+=n[p]*t,o[++p]+=n[p]*t,o[++p]+=n[p]*t,p++}},t.VerletIntegration=function(e,t,a){var s=new Float64Array(3),o=3*e.size,n=e.pos,i=e.vel,u=e.mass,l=new Float64Array(o);for(Math.pow(2,1/3),it=0;it<a;it++)r(n,i,l,u,s,t)},t.ForestRuthIntegration=function(e,t,a){var s=new Float64Array(3),o=3*e.size,n=e.pos,i=e.vel,u=e.mass,l=new Float64Array(o),c=1/(2-Math.pow(2,1/3)),h=1-2*c;for(it=0;it<a;it++)r(n,i,l,u,s,t*c),r(n,i,l,u,s,t*h),r(n,i,l,u,s,t*c)},e.exports=t},472:(e,t,a)=>{Orbits=a(47);var s=1/180*Math.PI,o=1/s,n=23.45*s,i=3844e5,u=1/149597870700;function l(e,t,r){return 1/Math.tan(e)*r/Math.sqrt(t*t-r*r)}function c(){}View=a(195),World=a(813),c.TimeToText=function(e){var t=e%60,r=(e-t)/60,a=r%60,s=(r=(r-a)/60)%24,o=(r=(r-s)/24,"");return r>0&&(o+=r+" days "),s<10&&(o+="0"),o+=s+":",a<10&&(o+="0"),o+=a+":",t<10&&(o+="0"),o+t},c.RenderSky=function(e,t,r,a,s){e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.useProgram(t.program),e.bindBuffer(e.ARRAY_BUFFER,s.verticies),e.vertexAttribPointer(t.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.a_pos),e.bindBuffer(e.ARRAY_BUFFER,s.uvs),e.vertexAttribPointer(t.a_texCoord,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.a_texCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s.indicies);var o=dmat4.create(),i=dmat4.create();dmat4.rotateX(o,i,-n);var u=dmat4.create(),l=dmat4.clone(a.matrixView);l[12]=0,l[13]=0,l[14]=0,dmat4.mul(u,a.matrixProjection,l);var c=dmat4.create();dmat4.mul(c,u,o);for(var h=new Float32Array(16),d=0;d<16;d++)h[d]=c[d];e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r.skyTexture),e.uniform1i(t.u_texture,0),e.uniformMatrix4fv(t.u_mvp,!1,h),e.drawElements(e.TRIANGLES,s.numIndicies,e.UNSIGNED_SHORT,0)},c.RenderPlanetSphere=function(e,t,a,s,o,n,i,u,c,h,d){e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.DEPTH_TEST),e.depthMask(!0),e.enable(e.CULL_FACE),e.useProgram(t.planetShader.program),e.bindBuffer(e.ARRAY_BUFFER,o.verticies),e.vertexAttribPointer(t.planetShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.planetShader.a_pos),e.bindBuffer(e.ARRAY_BUFFER,o.uvs),e.vertexAttribPointer(t.planetShader.a_texCoord,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.planetShader.a_texCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.indicies),e.uniform1f(t.planetShader.u_gamma,s);for(var m=0;m<c.length;m++){var p=c[m],v=dvec3.sub(dvec3.create(),n[p].pos,u),f=dvec3.length(v);r=l(i.fov/2,f,n[p].radius)*i.height/2,p&&r>1&&World.RenderPlanet(e,a,n[0],n[p],o,i,t.planetShader,d,h)}},c.RenderClouds=function(e,t,a,s,o,n,i,u,c,h){e.useProgram(t.cloudShader.program),e.bindBuffer(e.ARRAY_BUFFER,o.verticies),e.vertexAttribPointer(t.cloudShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.cloudShader.a_pos),e.bindBuffer(e.ARRAY_BUFFER,o.uvs),e.vertexAttribPointer(t.cloudShader.a_texCoord,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.cloudShader.a_texCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.indicies),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.defaultCloudsTexture),e.uniform1i(t.cloudShader.u_sampler,0),e.uniform1f(t.cloudShader.u_gamma,a);for(var d=0;d<i.length;d++){var m=i[d],p=dvec3.sub(dvec3.create(),n[m].pos,c),v=dvec3.length(p);r=l(u.fov/2,v,n[m].radius)*u.height/2,m&&r>1&&n[m].cloudHeight&&World.RenderClouds(e,n[0],n[m],o,u,t.cloudShader,h)}},c.RenderAtmosphereHigh=function(e,t,a,s,o,n,i,u,c){e.useProgram(i.atmosphereHighShader.program),e.bindBuffer(e.ARRAY_BUFFER,a.verticies),e.vertexAttribPointer(i.atmosphereHighShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i.atmosphereHighShader.a_pos),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a.indicies);for(var h=0;h<s.length;h++){var d=s[h],m=dvec3.sub(dvec3.create(),t[d].pos,n),p=dvec3.length(m);r=l(o.fov/2,p,t[d].radius)*o.height/2,d&&r>1&&t[d].atmosphere[3]&&World.RenderAtmosphereHigh(e,t[0],t[d],a,o,i.atmosphereHighShader,u,c)}},c.RenderRings=function(e,t,a,s,o,n,i,u,c){e.disable(e.CULL_FACE),e.useProgram(t.ringShader.program),e.bindBuffer(e.ARRAY_BUFFER,a.squareVerticesBuffer),e.vertexAttribPointer(t.ringShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.ringShader.a_pos);for(var h=0;h<s.length;h++){var d=s[h];if(o[d].rings){var m=dvec3.sub(dvec3.create(),o[d].pos,i),p=dvec3.length(m);r=l(n.fov/2,p,o[d].radius)*n.height/2,d&&r>1&&World.RenderRings(e,o[0],o[d],o[d].rings,a.squareVerticesBuffer,n,t.ringShader,u,c)}}},c.RenderStarSphere=function(e,t,a,s,o,n,i,u,c){e.enable(e.CULL_FACE),e.useProgram(t.starShader.program),e.bindBuffer(e.ARRAY_BUFFER,s.squareVerticesBuffer),e.vertexAttribPointer(t.starShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.starShader.a_pos),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.ditherTexture),e.uniform1i(t.starShader.u_dither,0),e.uniform1f(t.starShader.u_gamma,a);for(var h=0;h<n.length;h++){var d=n[h];if(0==d){var m=dvec3.sub(dvec3.create(),o[d].pos,u),p=dvec3.length(m);r=l(i.fov/2,p,o[d].radius)*i.height/2;var v=(16*r+2)/i.width,f=(16*r+2)/i.height,M=(o[d].screenPos[0]-i.width/2)/i.width*2,g=(o[d].screenPos[1]-i.height/2)/i.height*2,x=dvec4.fromValues(o[d].pos[0]*c,o[d].pos[1]*c,o[d].pos[2]*c,1),b=dvec4.create();dvec4.transformMat4(b,x,i.matrixVP);var S=b[2]/b[3];if(S>-1&&S<1){var w=new Float32Array([v,0,0,0,0,f,0,0,0,0,1,0,M,g,S,1]);gl.uniformMatrix4fv(t.starShader.u_mvp,!1,w),gl.uniform2f(t.starShader.u_pos,o[d].screenPos[0],o[d].screenPos[1]),gl.uniform3f(t.starShader.u_color,1,1,1),gl.uniform3fv(t.starShader.u_colorBorder,o[d].color),gl.uniform1f(t.starShader.u_lineWidth,r),gl.uniform1f(t.starShader.u_radius,r),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}}}},c.CircleSize=function(e){var t=Math.log(e)/Math.log(10)/10;return t*t*2},c.RenderCircles=function(e,t,r,a,s,o,n,i){e.depthMask(!1),e.useProgram(t.circleShader.program),e.bindBuffer(e.ARRAY_BUFFER,r.squareVerticesBuffer),e.vertexAttribPointer(t.circleShader.a_pos,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.circleShader.a_pos);for(var u=0;u<a.length;u++)if(a[u].visible){var l=(v=this.CircleSize(a[u].mass))/s.width,c=v/s.height,h=(a[u].screenPos[0]-s.width/2)/s.width*2,d=(a[u].screenPos[1]-s.height/2)/s.height*2,m=dvec4.fromValues(a[u].pos[0]*o,a[u].pos[1]*o,a[u].pos[2]*o,1),p=dvec4.create();dvec4.transformMat4(p,m,s.matrixVP),(f=p[2]/p[3])>-1&&f<1&&(f*=.999,matrix=new Float32Array([l,0,0,0,0,c,0,0,0,0,1,0,h,d,f,1]),e.uniformMatrix4fv(t.circleShader.u_mvp,!1,matrix),e.uniform2f(t.circleShader.u_pos,a[u].screenPos[0],a[u].screenPos[1]),e.uniform4f(t.circleShader.u_color,1,1,1,0),e.uniform4f(t.circleShader.u_colorBorder,1,1,1,1),e.uniform1f(t.circleShader.u_lineWidth,2),e.uniform1f(t.circleShader.u_radius,v/2-3),e.drawArrays(e.TRIANGLE_STRIP,0,4))}if(n){var v;l=(v=(v=Math.log(i.mass)/Math.log(10)/10)*v*2)/s.width,c=v/s.height,h=(i.screenPos[0]-s.width/2)/s.width*2,d=(i.screenPos[1]-s.height/2)/s.height*2,m=dvec4.fromValues(i.pos[0]*o,i.pos[1]*o,i.pos[2]*o,1),p=dvec4.create(),dvec4.transformMat4(p,m,s.matrixVP);var f=p[2]/p[3]*.999;matrix=new Float32Array([l,0,0,0,0,c,0,0,0,0,1,0,h,d,f,1]),e.uniformMatrix4fv(t.circleShader.u_mvp,!1,matrix),e.uniform2f(t.circleShader.u_pos,i.screenPos[0],i.screenPos[1]),e.uniform4f(t.circleShader.u_color,1,1,1,0),e.uniform4f(t.circleShader.u_colorBorder,1,1,1,1),e.uniform1f(t.circleShader.u_lineWidth,2),e.uniform1f(t.circleShader.u_radius,v/2-3),e.drawArrays(e.TRIANGLE_STRIP,0,4)}e.depthMask(!0)},c.RenderLines=function(e,t,r,a,s,o,n){e.depthMask(!1),e.lineWidth(2),e.useProgram(t.lineShader.program),e.bindBuffer(e.ARRAY_BUFFER,r.linesIndexBuffer),e.vertexAttribPointer(t.lineShader.a_index,1,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.lineShader.a_index),dvec3.create();for(var i=0;i<a.length;i++)if(a[i].visible){for(var u=a[i].parent,l=dvec3.scale(dvec4.create(),a[u].pos,n),c=dmat4.translate(dmat4.create(),o.matrixVP,l),h=a[i].size-a[i].nextPrev,d=new Float32Array(16),m=0;m<16;m++)d[m]=c[m];0!=a[i].nextPrev&&h++,e.uniform3fv(t.lineShader.u_color,a[i].color),e.uniformMatrix4fv(t.lineShader.u_mvp,!1,d),e.bindBuffer(e.ARRAY_BUFFER,a[i].linesVertexBuffer),e.vertexAttribPointer(t.lineShader.a_pos,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.lineShader.a_pos),e.uniform2f(t.lineShader.u_index,a[i].nextPrev,a[i].size),a[i].size>=s.numLines&&h&&e.drawArrays(e.LINE_STRIP,a[i].nextPrev,h),a[i].nextPrev&&e.drawArrays(e.LINE_STRIP,0,a[i].nextPrev)}e.depthMask(!0)},c.RenderOrbits=function(e,t,r,a,s,o,n){if(r[n].visible){var i=r[n].parent,l=dmat4.create(),c=dmat4.create(),h=dmat4.create(),d=dvec3.sub(dvec3.create(),r[n].vel,r[i].vel),m=dvec3.length(d),p=dvec3.sub(dvec3.create(),r[n].pos,r[i].pos),v=dvec3.length(p),f=Orbits.SemimajorAxis(v,m,r[n].mass+r[i].mass),M=dvec3.create();Orbits.Eccentricity(M,p,d,r[n].mass+r[i].mass);var g=dvec3.length(M),x=(1-g)*f,b=((1+g)*f+x)/2*u,S=b*Math.sqrt(1-g*g),w=dvec3.create(),y=Orbits.Inclination(w,p,d),I=dvec3.create(),R=Orbits.LongitudeAscendingNode(I,w),E=dvec3.length(I),D=Orbits.ArgumentOfPeriapsis(M,I,E,g);D-=Math.PI/2*3,dmat4.rotateZ(l,c,R),dmat4.rotateX(c,l,y),dmat4.rotateZ(l,c,D);var B=dvec3.scale(dvec4.create(),r[i].pos,u);dmat4.translate(c,t.matrixVP,B),dmat4.mul(h,c,l);for(var A=new Float32Array(16),_=0;_<16;_++)A[_]=h[_];e.useProgram(a.orbitShader.program),e.lineWidth(1),e.uniformMatrix4fv(a.orbitShader.u_mvp,!1,A),e.bindBuffer(e.ARRAY_BUFFER,s.orbitVertexBuffer),e.vertexAttribPointer(a.orbitShader.a_angle,1,e.FLOAT,!1,0,0),e.enableVertexAttribArray(a.orbitShader.a_angle),e.uniform1f(a.orbitShader.u_length,b),e.uniform1f(a.orbitShader.u_height,S),e.uniform1f(a.orbitShader.u_offset,b-x*u),e.uniform4f(a.orbitShader.u_color,1,1,1,1),e.drawArrays(e.LINE_LOOP,0,o.numLines)}},c.RenderNames=function(e,t,r,a,s,o){e.depthMask(!1),e.useProgram(t.textShader.program),e.bindBuffer(e.ARRAY_BUFFER,r.textVerticiesBuffer),e.vertexAttribPointer(t.textShader.a_pos,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.textShader.a_pos),e.bindBuffer(e.ARRAY_BUFFER,r.textTexBuffer),e.vertexAttribPointer(t.textShader.a_texCoord,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.textShader.a_texCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.textIndiciesBuffer);for(var n=0;n<a.length;n++)if(a[n].visible){var i=Math.log(a[n].mass)/Math.log(10)/10;i*=i;var u=a[n].textTexture.width/s.width,l=a[n].textTexture.height/s.height,c=(a[n].screenPos[0]-s.width/2)/s.width*2,h=(a[n].screenPos[1]-s.height/2+i+10)/s.height*2,d=dvec4.fromValues(a[n].pos[0]*o,a[n].pos[1]*o,a[n].pos[2]*o,1),m=dvec4.create();dvec4.transformMat4(m,d,s.matrixVP);var p=m[2]/m[3];p>-1&&p<1&&(p*=.9999,matrix=new Float32Array([u,0,0,0,0,l,0,0,0,0,1,0,c,h,p,1]),e.uniformMatrix4fv(t.textShader.u_mvp,!1,matrix),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a[n].textTexture.texture),e.uniform1i(t.textShader.u_texture,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}e.depthMask(!0)},c.RenderCanvas=function(e,t,r,a,s,o,n,c,h,d,m,p){var v=new Array,f=new Array,M=dvec3.fromValues(t.matrixCamera[12],t.matrixCamera[13],t.matrixCamera[14]),g=new View;g.width=t.width,g.height=t.height,g.fov=t.fov,g.near=.5*i*u,g.far=252964.3083370651,g.origin=dvec3.fromValues(t.origin[0]*u,t.origin[1]*u,t.origin[2]*u),dquat.copy(g.look,t.look),dquat.copy(g.orbit,t.orbit),g.distance=t.distance*u,g.CalculateMatrix(),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),p.Zero();for(var x=0;x<r.length;x++){var b;r[x].visible=!0,(b=dvec4.transformMat4(dvec4.create(),dvec4.fromValues(r[x].pos[0],r[x].pos[1],r[x].pos[2],1),t.matrixVPV))[0]/=b[3],b[1]/=b[3],b[2]/=b[3],dvec4.copy(r[x].screenPos,b);var S=dvec3.fromValues(r[x].pos[0]-t.matrixCamera[12],r[x].pos[1]-t.matrixCamera[13],r[x].pos[2]-t.matrixCamera[14]),w=dvec3.length(S),y=l(t.fov/2,w,r[x].radius)*t.height;r[x].renderRadius=y,r[x].resources.resource>=0&&p.planetImages[r[x].resources.resource].UpdateRenderSize(y),r[x].resources.resourceSpecular>=0&&p.planetImages[r[x].resources.resourceSpecular].UpdateRenderSize(y);var I=dvec2.fromValues(t.width/2,t.height/2);dvec2.length(I)+2*y>dvec2.distance(I,r[x].screenPos)&&(b[3]<i?v.push(x):f.push(x))}for(p.Update(e),d&&(m.visible=!0,(b=dvec4.transformMat4(dvec4.create(),dvec4.fromValues(m.pos[0],m.pos[1],m.pos[2],1),t.matrixVPV))[0]/=b[3],b[1]/=b[3],b[2]/=b[3],dvec4.copy(m.screenPos,b)),x=0;x<r.length;x++)if(r[x].parent>=0&&r[x].parent!=x){var R=r[x].parent;(w=dvec3.dist(r[x].screenPos,r[R].screenPos))<n.cullingDistance&&(r[x].visible=!1)}var E=0,D=0;for(x=0;x<r.length;x++)if(0==r[x].type){r[x].magnitudeAbsolute<E&&(E=r[x].magnitudeAbsolute,D=x);var B=vec3.distance(r[x].pos,t.pos);r[x].magnitudeApparent=Orbits.AbsoluteMagToApparent(r[x].magnitudeAbsolute,B)}for(x=0;x<r.length;x++)1==r[x].type&&(r[x].magnitudeApparent=Orbits.CalculatePlanetMagnitude(r[D].pos,r[x].pos,t.pos,r[x].albedo,r[D].luminosity,r[x].radius));this.RenderSky(e,a.skyShader,s,g,o),e.clear(e.DEPTH_BUFFER_BIT),this.RenderPlanetSphere(e,a,p,n.gamma,o,r,g,M,f,c,u),n.renderClouds&&this.RenderClouds(e,a,n.gamma,s,o,r,f,g,M,u),3==n.renderAtmosphere&&this.RenderAtmosphereHigh(e,r,o,f,g,M,a,u,1),this.RenderRings(e,a,s,f,r,g,M,u,c),n.renderLines&&(this.RenderLines(e,a,s,r,n,g,u),this.RenderOrbits(e,g,r,a,s,n,h)),this.RenderStarSphere(e,a,n.gamma,s,r,f,g,M,u),n.renderCircles&&this.RenderCircles(e,a,s,r,g,u,d,m),n.renderNames&&this.RenderNames(e,a,s,r,g,u),e.clear(e.DEPTH_BUFFER_BIT),this.RenderPlanetSphere(e,a,p,n.gamma,o,r,t,M,v,c,1),n.renderClouds&&this.RenderClouds(e,a,n.gamma,s,o,r,v,t,M,1),3==n.renderAtmosphere&&this.RenderAtmosphereHigh(e,r,o,v,t,M,a,1,u),this.RenderRings(e,a,s,v,r,t,M,1,c),n.renderLines,this.RenderStarSphere(e,a,n.gamma,s,r,v,t,M,1),n.renderCircles&&this.RenderCircles(e,a,s,r,t,1,d,m),n.renderNames&&this.RenderNames(e,a,s,r,t,1)},c.RenderHTML=function(e,t,r,a,s,n,i){document.getElementById("canvas");var u=new Date(2013,0,0,0,0,1,0);u.setUTCFullYear(2013),u.setUTCMonth(0),u.setUTCDate(1),u.setUTCHours(12);var l=new Date(u.getTime()+1e3*r),c="";l.getUTCHours()<10&&(c+="0"),c+=l.getUTCHours();var h="";l.getUTCMinutes()<10&&(h+="0"),h+=l.getUTCMinutes(),c="",l.getUTCHours()<10&&(c+="0"),c+=l.getUTCHours();var d="";l.getUTCSeconds()<10&&(d+="0"),d+=l.getUTCSeconds();var m="";m+="Physics Time: "+this.TimeToText(n),m+="<br>Time: "+c+":"+h+":"+d;var p=l.getUTCMonth()+1,v="<p>";v+=m+="<br>"+l.getUTCDate()+"/"+p+"/"+l.getUTCFullYear(),v+="<p>Objects: "+a.length,v+="<p>FPS: "+e.fps.toString(),v+="<br>IPS: "+t.fps.toString(),v+="<p>Memory: "+i/1024/1024,document.getElementById("displayinfo").innerHTML=v;var f=a[s].parent,M=document.getElementById("spanParent"),g=a[f].name;M.innerHTML=g;var x=document.getElementById("textVelocity"),b=dvec3.sub(dvec3.create(),a[s].vel,a[f].vel),S=dvec3.length(b),w=S/1e3;x.value=w;var y=document.getElementById("textDistance"),I=dvec3.sub(dvec3.create(),a[s].pos,a[f].pos),R=dvec3.length(I),E=R/1e3;y.value=E;var D=document.getElementById("textSemimajorAxis"),B=Orbits.SemimajorAxis(R,S,a[s].mass+a[f].mass),A=B/1e3;D.value=A;var _=document.getElementById("textEccentricity"),F=dvec3.create(),T=Orbits.Eccentricity(F,I,b,a[s].mass+a[f].mass),L=T;_.value=L;var P=(1-T)*B;document.getElementById("textPeriapsis").value=P;var U=(1+T)*B;document.getElementById("textApoapsis").value=U;var j=document.getElementById("textInclination"),C=dvec3.create(),N=Orbits.Inclination(C,I,b)*o;j.value=N;var z=dvec3.create(),O=Orbits.LongitudeAscendingNode(z,C),Y=dvec3.length(z),q=document.getElementById("textLongitudeOfAscendingNode"),V=O*o;q.value=V;var G=Orbits.ArgumentOfPeriapsis(F,z,Y,T),X=document.getElementById("textArgumentOfPeriapsis"),k=G*o;X.value=k;var H=Math.acos(dvec3.dot(F,I)/(T*R)),W=document.getElementById("textTrueAnomaly"),Z=H*o;W.value=Z;var K=Orbits.Period(B,a[f].mass),Q=document.getElementById("textPeriod"),J=this.TimeToText(K);Q.value=J},c.Render=function(e,t,r,a,s,o,n,i,u,l,c,h,d,m,p,v){t.count++,s.width==window.innerWidth&&s.height==window.innerHeight||(canvas.width=window.innerWidth,canvas.height=window.innerHeight,s.width=canvas.width,s.height=canvas.height,e&&e.viewport(0,0,s.width,s.height)),dvec3.copy(s.origin,o[n].pos),s.CalculateMatrix(),this.RenderCanvas(e,s,o,i,u,l,c,a+410248800,n,d,m,p),this.RenderHTML(t,r,a,o,n,h,v)},e.exports=c},346:(e,t,r)=>{function a(e){this.resources=e,this.imageSplitSize=256,this.maxPlanetImages=14,this.planetImages=new Array,this.planetTextures=new Array;for(var t=0;t<this.maxPlanetImages;t++)this.planetTextures[t]=new ResourcesTextures,this.planetTextures[t].width=1<<t,this.planetTextures[t].height=this.planetTextures[t].width/1,this.planetTextures[t].height<1&&(this.planetTextures[t].height=1);this.imagesSize=0,this.texturesSize=0,this.maxTextureSize=67108864,this.maxImageSize=134217728}UtilitiesMath=r(322),ResourcesTextures=r(405),ResourcesImageCollection=r(18),a.prototype.GetTexture=function(e,t,r,a,s,o,n,i,u,l,c){var h=e.createTexture();if(e.bindTexture(e.TEXTURE_2D,h),e.texImage2D(e.TEXTURE_2D,0,l,t,r,0,u,c,null),i)for(var d=t,m=r,p=d>m?d:m,v=UtilitiesMath.MSB(p)+1,f=1;f<v;f++)d=Math.max(1,d>>1),m=Math.max(1,m>>1),e.texImage2D(e.TEXTURE_2D,f,l,d,m,0,u,c,null);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o),e.bindTexture(e.TEXTURE_2D,null),h},a.prototype.Add=function(e,t,r,a,s,o,n,i,u,l,c,h,d,m,p,v,f,M){var g=this,x=new ResourcesImageCollection,b=!1,S=!0;if(s==n&&o==i){x.smallestImage=0,x.largestImage=0;var w=new ResourcesImage;x.images.push(w),x.images[0].width=n,x.images[0].height=i,x.images[0].texture=this.GetTexture(e,n,i,l,c,h,d,m,p,v,f)}else{b=!0;var y=UtilitiesMath.MSB(s),I=UtilitiesMath.MSB(o),R=UtilitiesMath.MSB(n),E=UtilitiesMath.MSB(i);E>R&&(S=!1),S?(x.smallestImage=y,x.largestImage=R):(x.smallestImage=I,x.largestImage=E);for(var D=0;D<=x.largestImage;D++)w=new ResourcesImage,x.images.push(w),S?(x.images[D].width=1<<D,x.images[D].height=1<<Math.max(0,D-(R-E))):(x.images[D].width=1<<Math.max(0,D-(E-heighWidth)),x.images[D].height=1<<D)}if(r.length>0)for(D=x.smallestImage;D<=x.largestImage;D++){x.images[D].name=b?r+"_"+(1<<D).toString():r+"_"+x.images[D].width.toString(),x.images[D].fileType=a,x.images[D].texture=this.GetTexture(e,x.images[D].width,x.images[D].height,l,c,h,d,m,p,v,f);var B=Math.ceil(x.images[D].width*x.images[D].height/(this.imageSplitSize*this.imageSplitSize));u||(B=1);for(var A=0;A<B;A++){var _=new Image;x.images[D].images.push(_)}}else if(b)for(D=x.smallestImage;D<=x.largestImage;D++)x.images[D].name="";if(b)for(D=0;D<x.smallestImage;D++){var F=document.createElement("canvas");x.images[D].images.push(F)}x.imageSplit=u,x.texture=t,x.magFilter=l,x.minFilter=c,x.wrapT=h,x.wrapS=d,x.mipmap=m,x.format=p,x.internalFormat=v,x.type=f,x.images[x.smallestImage].downloading=!0;var T=this.planetImages.push(x)-1;return x.images[x.smallestImage].name.length>0&&this.resources.AddPriority(x.images[x.smallestImage].name+"."+a,x.images[x.smallestImage].images[0],(function(e){x.images[x.smallestImage].downloaded=!0,x.images[x.smallestImage].downloading=!1,x.images[x.smallestImage].gpuLoading=!0,x.imageCount=1,g.imagesSize+=M*e.width*e.height,g.resources.UploadTexture(x.images[x.smallestImage].texture,e,!1,x.magFilter,x.minFilter,x.wrapT,x.wrapS,x.mipmap,x.format,x.internalFormat,x.type,!0,0,(function(e){x.images[x.smallestImage].gpuLoaded=!0,x.images[x.smallestImage].gpuLoading=!1,x.texture=e,b&&g.Lod(x),g.texturesSize+=g.imageSize}))})),T},a.prototype.Lod=function(e){this.creatingLods=!0;for(var t=new Array(e.smallestImage),r=0;r<e.smallestImage;r++)t[r]=e.images[r].images[0].getContext("2d");var a=e.smallestImage-1,s=a-1,o=e.images[e.smallestImage].width,n=e.images[e.smallestImage].height;for(o=Math.max(1,o>>1),n=Math.max(1,n>>1),e.images[a].images[0].width=o,e.images[a].images[0].height=n,t[a].drawImage(e.images[e.smallestImage].images[0],0,0,o,n),t[a].getImageData(0,0,o,n).data,r=s;r>=0;r--)o=Math.max(1,o>>1),n=Math.max(1,n>>1),e.images[r].images[0].width=o,e.images[r].images[0].height=n,t[r].drawImage(e.images[r+1].images[0],0,0,o,n),t[r].getImageData(0,0,o,n).data,this.resources.imageSize+=o*n*4,e.images[r].downloaded=!0;e.lodComplete=!0},a.prototype.Zero=function(){for(var e=0;e<this.planetImages.length;e++)this.planetImages[e].renderSize=0},a.prototype.UpdateDownload=function(e,t){for(var r,a,s=this,o=e.smallestImage,n=!0;n;)o++,e.images[o].downloading||e.images[o].downloaded||(n=!1),o>=e.largestImage&&(n=!1);if(e.images[o].name.length>0&&!e.images[o].downloading){e.images[o].downloading=!0,e.images[o].downloadCount=0;for(var i=0;i<e.smallestImage;i++){var u=o-i;this.resources.UploadTexture(e.images[o].texture,e.images[i].images[0],!1,e.magFilter,e.minFilter,e.wrapT,e.wrapS,!1,e.format,e.internalFormat,e.type,!1,u,(function(e){}))}if(e.imageSplit){for(i=e.smallestImage;i<o;i++)for(var l=Math.ceil(e.images[i].width*e.images[i].height/(this.imageSplitSize*this.imageSplitSize)),c=e.images[i].height/l,h=(u=o-i,0);h<l;h++){var d=e.images[i].images[h],m=c*h;this.resources.UploadTexturePart(e.images[o].texture,d,!1,0,m,e.images[i].width,c,e.magFilter,e.minFilter,e.wrapT,e.wrapS,!1,e.format,e.internalFormat,e.type,!1,u,(function(e){}))}for(l=Math.ceil(e.images[o].width*e.images[o].height/(this.imageSplitSize*this.imageSplitSize)),c=e.images[o].height/l,i=0;i<l-1;i++)this.resources.Add(e.images[o].name+"_"+i.toString()+"."+e.images[o].fileType,e.images[o].images[i],function(e,t,r){return function(a){e.images[r].gpuLoading=!0,s.imagesSize+=3*a.width*c,s.resources.UploadTexturePart(e.images[r].texture,a,!1,0,t,a.width,a.height,e.magFilter,e.minFilter,e.wrapT,e.wrapS,!1,e.format,e.internalFormat,e.type,!1,0,(function(e){}))}}(e,c*i,o));var p=l-1;this.resources.Add(e.images[o].name+"_"+p.toString()+"."+e.images[o].fileType,e.images[o].images[p],function(e,t,r){return function(a){e.images[r].downloaded=!0,e.images[r].downloading=!1,e.images[r].gpuLoading=!0,s.imagesSize+=3*a.width*c,s.resources.UploadTexturePart(e.images[r].texture,a,!1,0,t,a.width,a.height,e.magFilter,e.minFilter,e.wrapT,e.wrapS,!1,e.format,e.internalFormat,e.type,!0,0,(function(t){e.images[r].gpuLoaded=!0,e.images[r].gpuLoading=!1,e.texture=t,s.texturesSize+=a.width*a.height*3}))}}(e,c*p,o))}else{for(i=e.smallestImage;i<o;i++)u=o-i,this.resources.UploadTexture(e.images[o].texture,e.images[i].images[0],!1,e.magFilter,e.minFilter,e.wrapT,e.wrapS,!1,e.format,e.internalFormat,e.type,!1,u,(function(e){}));this.resources.Add(e.images[o].name+"."+e.images[o].fileType,e.images[o].images[0],(r=e,a=o,function(e){r.images[a].downloaded=!0,r.images[a].downloading=!1,r.images[a].gpuLoading=!0,s.imagesSize+=3*e.width*e.height,s.resources.UploadTexture(r.images[a].texture,e,!1,r.magFilter,r.minFilter,r.wrapT,r.wrapS,!1,r.format,r.internalFormat,r.type,!0,0,(function(t){r.images[a].gpuLoaded=!0,r.images[a].gpuLoading=!1,r.texture=t,s.texturesSize+=e.width*e.height*3}))}))}}},a.prototype.Update=function(e){new Array,new Array;for(var t=new Array,r=(new Array,0);r<this.planetImages.length;r++)if(this.planetImages[r].renderSize>=.5){for(var a=!0,s=this.planetImages[r].smallestImage;a;)this.planetImages[r].images[s].downloading||this.planetImages[r].images[s].downloaded||(t.push(r),a=!1),(s>=this.planetImages[r].largestImage||this.planetImages[r].images[s].downloading)&&(a=!1),s++;a=!0,s=this.planetImages[r].smallestImage}for(;t.length;){var o=this.planetImages[t[t.length-1]];this.UpdateDownload(o,e),t.pop()}},a.prototype.Loaded=function(e){},e.exports=a},507:e=>{function t(){this.texture,this.image,this.handle,this.magFilter,this.minFilter,this.wrapS,this.wrapT,this.mipmap,this.internalFormat,this.format,this.type,this.seperate=!1,this.finish=!1,this.x=0,this.y=0,this.width=1,this.height=1,this.level=0,this.raw=!1}function r(){this.location=Array(),this.store=Array(),this.handle=Array()}function a(){}function s(){this.priorityList=new r,this.list=new r,this.textureList=new Array,this.downloading=!1,this.uploadPixelLimit=256,this.pixelsUploaded=0,this.progress=0,this.uploading=!1,this.transferImage=document.createElement("canvas"),this.imageSize=0,this.textureSize=0}s.prototype.Handle=function(){var e=this.list.handle[0],t=this.list.store[0];this.imageSize+=t.width*t.height*4,console.log("Image retrieved: "+t.src),this.list.location.shift(),this.list.store.shift(),this.list.handle.shift(),this.Download(),e(t)},s.prototype.HandlePriority=function(){var e=this.priorityList.handle[0],t=this.priorityList.store[0];this.imageSize+=t.width*t.height*4,console.log("Image retrieved: "+t.src),this.priorityList.location.shift(),this.priorityList.store.shift(),this.priorityList.handle.shift(),this.Download(),e(t)},s.prototype.Download=function(){this.priorityList.location.length>0?(this.downloading=!0,this.priorityList.store[0].onload=this.HandlePriority.bind(this),this.priorityList.store[0].onerror=a,this.priorityList.store[0].src=this.priorityList.location[0]):this.list.location.length>0?(this.downloading=!0,this.list.store[0].onload=this.Handle.bind(this),this.list.store[0].onerror=a,this.list.store[0].src=this.list.location[0]):this.downloading=!1},s.prototype.StreamGpu=function(e){for(var t=!1;this.textureList.length>0&&this.pixelsUploaded<this.uploadPixelLimit*this.uploadPixelLimit;){var r=this.textureList[0],a=r.image,s=a.width*a.height;(s<=this.uploadPixelLimit*this.uploadPixelLimit-this.pixelsUploaded||!t)&&(t=!0,e.bindTexture(e.TEXTURE_2D,r.texture),r.raw?e.texSubImage2D(e.TEXTURE_2D,r.level,r.x,r.y,r.width,r.height,r.format,r.type,a):e.texSubImage2D(e.TEXTURE_2D,r.level,r.x,r.y,r.format,r.type,a),r.finish&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r.minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapT),r.mipmap&&e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),r.handle(r.texture),this.textureList.shift()),this.pixelsUploaded+=s}this.pixelsUploaded=0},s.prototype.UploadTexture=function(e,r,a,s,o,n,i,u,l,c,h,d,m,p){var v=new t;v.texture=e,v.image=r,v.raw=a,v.handle=p,v.magFilter=s,v.minFilter=o,v.wrapT=n,v.wrapS=i,v.mipmap=u,v.format=l,v.internalFormat=c,v.type=h,v.finish=d,v.width=r.width,v.height=r.height,v.level=m,this.textureList.push(v)},s.prototype.UploadTexturePart=function(e,r,a,s,o,n,i,u,l,c,h,d,m,p,v,f,M,g){var x=new t;x.texture=e,x.image=r,x.raw=a,x.handle=g,x.magFilter=u,x.minFilter=l,x.wrapT=c,x.wrapS=h,x.mipmap=d,x.format=m,x.internalFormat=p,x.type=v,x.seperate=!0,x.finish=f,x.x=s,x.y=o,x.width=n,x.height=i,x.level=M,this.textureList.push(x)},s.prototype.AddPriority=function(e,t,r){this.priorityList.location.push(e),this.priorityList.store.push(t),this.priorityList.handle.push(r),this.downloading||this.Download()},s.prototype.Add=function(e,t,r){this.list.location.push(e),this.list.store.push(t),this.list.handle.push(r),this.downloading||this.Download()},e.exports=s},714:e=>{e.exports=function(){this.name="",this.fileType="",this.images=new Array,this.width=1,this.height=1,this.texture,this.downloading=!1,this.downloaded=!1,this.downloadCount=0,this.gpuLoaded=!1,this.gpuLoading=!1,this.gpuCount=0}},18:(e,t,r)=>{function a(){this.images=new Array,this.texture,this.imageSplit=!1,this.smallestImage=0,this.largestImage=0,this.lodProgress=0,this.lodComplete=!1,this.creatingLods=!1,this.lodTextureProgress=0,this.lodTextureImage=0,this.magFilter,this.minFilter,this.wrapS,this.wrapT,this.mipmap,this.internalFormat,this.format,this.type,this.renderSize}ResourcesImage=r(714),a.prototype.UpdateRenderSize=function(e){e>this.renderSize&&(this.renderSize=e)},e.exports=a},405:e=>{e.exports=function(){this.width=0,this.height=0,this.texture=new Array,this.allocated=new Array}},865:e=>{e.exports=function(){this.radius=14068e4,this.start=669e5,this.texture=0,this.image,this.textureLocation="images/saturn/saturn_rings",this.textureLow=1024,this.textureHigh=4096,this.textureFormat="png"}},322:(e,t)=>{MSB=function(e){for(var t=31,r=1<<t;0!=r;){if(e&r)return t;r>>=1,t--}return 0},t.MSB=MSB},195:e=>{function t(){this.pos=dvec3.fromValues(0,-1,0),this.origin=dvec3.fromValues(0,0,0),this.look=dquat.fromValues(1,0,0,0),this.orbit=dquat.fromValues(0,0,0,1),this.distance=1,this.matrixCamera=dmat4.create(),this.matrixView=dmat4.create(),this.matrixProjection=dmat4.create(),this.matrixViewport=dmat4.create(),this.matrixVP=dmat4.create(),this.matrixVPV=dmat4.create(),this.matrixInvVPV=dmat4.create(),this.fov=.785,this.near=1,this.far=100,this.width=0,this.height=0}t.prototype.MoveOrigin=function(e){this.origin=e.copy()},t.prototype.Orbit=function(e){var t=dquat.fromValues(0,Math.sin(e[2]/2),0,Math.cos(e[2]/2)),r=dquat.fromValues(Math.sin(e[1]/2),0,0,Math.cos(e[1]/2)),a=dquat.fromValues(0,0,Math.sin(e[0]/2),Math.cos(e[0]/2)),s=dquat.create(),o=dquat.create();dquat.mul(o,t,r),dquat.mul(s,o,a),dquat.mul(o,this.orbit,s),dquat.normalize(this.orbit,o),this.CalculateMatrix()},t.prototype.CalculateMatrix=function(){dvec3.create(),dvec3.set(this.pos,0,-this.distance,0);var e=dvec3.fromValues(0,0,1),t=dvec3.create(),r=dvec3.create(),a=dvec3.create();dvec3.normalize(a,this.pos),dvec3.cross(t,e,a),dvec3.cross(r,a,t);var s=dmat4.create();s[0]=t[0],s[1]=t[1],s[2]=t[2],s[4]=r[0],s[5]=r[1],s[6]=r[2],s[8]=a[0],s[9]=a[1],s[10]=a[2],s[12]=this.pos[0],s[13]=this.pos[1],s[14]=this.pos[2];var o=dmat4.create();dmat4.fromQuat(o,this.orbit),dmat4.mul(this.matrixCamera,o,s),this.matrixCamera[12]+=this.origin[0],this.matrixCamera[13]+=this.origin[1],this.matrixCamera[14]+=this.origin[2],this.pos[0]=this.matrixCamera[12],this.pos[1]=this.matrixCamera[13],this.pos[2]=this.matrixCamera[14],dmat4.invert(this.matrixView,this.matrixCamera),this.matrixViewport[0]=this.width/2,this.matrixViewport[5]=this.height/2,this.matrixViewport[12]=this.width/2,this.matrixViewport[13]=this.height/2,dmat4.perspective(this.matrixProjection,this.fov,this.width/this.height,this.near,this.far),dmat4.mul(this.matrixVP,this.matrixProjection,this.matrixView),dmat4.mul(this.matrixVPV,this.matrixViewport,this.matrixVP),dmat4.invert(this.matrixInvVPV,this.matrixVPV)},e.exports=t},813:(e,t,r)=>{r(664);var a=1/180*Math.PI*23.45;e.exports.CreateWorldVerts=function(e){var t=257,r=32641,a=new Float32Array(97923),s=new Float32Array(65282),o=0,n=0;a[0]=0,a[1]=0,a[2]=-1,o+=3,s[0]=0,s[1]=1,n+=2;for(var i=1;i<128;i++)for(var u=i*Math.PI/2/64,l=Math.cos(u),c=Math.sin(u),h=0;h<t;h++){var d=h*Math.PI/2/64;a[o]=c*Math.sin(d),a[o+1]=-c*Math.cos(d),a[o+2]=-l,o+=3,s[n]=h/256,s[n+1]=1-i/128,n+=2}a[o]=0,a[o+1]=0,a[o+2]=1,o+=3,s[n]=0,s[n+1]=0,n+=2,(97923!=o||65282!=n)&&console.error("index != numVerts: "+o+", 97923");var m=195834,p=new Uint16Array(m);for(o=0,h=0;h<t;h++)p[o]=0,p[o+1]=(h+1)%t+1,p[o+2]=(h+0)%t+1,(p[(o+=3)-3]<0||p[o-3]>=r||p[o-2]<0||p[o-2]>=r||p[o-1]<0||p[o-1]>=r)&&console.error("index out of bounds "+o);for(i=1;i<127;i++)for(h=0;h<t;h++)p[o+0]=(h+0)%t+(i-1)*t+1,p[o+1]=(h+1)%t+(i-1)*t+1,p[o+2]=(h+1)%t+(i+0)*t+1,p[o+3]=(h+1)%t+(i+0)*t+1,p[o+4]=(h+0)%t+(i+0)*t+1,p[o+5]=(h+0)%t+(i-1)*t+1,(p[(o+=6)-6]<0||p[o-6]>=r||p[o-5]<0||p[o-5]>=r||p[o-4]<0||p[o-4]>=r||p[o-3]<0||p[o-3]>=r||p[o-2]<0||p[o-2]>=r||p[o-1]<0||p[o-1]>=r)&&console.error("index out of bounds "+o+", "+p[o-6]+", "+p[o-5]+", "+p[o-4]+", "+p[o-3]+", "+p[o-2]+", "+p[o-1]);for(h=0;h<t;h++)p[o]=32640,p[o+1]=(h+0)%t-t-1+r,p[o+2]=(h+1)%t-t-1+r,(p[(o+=3)-3]<0||p[o-3]>=r||p[o-2]<0||p[o-2]>=r||p[o-1]<0||p[o-1]>=r)&&console.error("index out of bounds "+o);o!=m&&console.error("index != numIndicies: "+o+", "+m);var v=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,v),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW);var f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW);var M=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,M),e.bufferData(e.ELEMENT_ARRAY_BUFFER,p,e.STATIC_DRAW),e.getError()&&console.error("Gl error creating world"),{numVerts:r,numIndicies:m,verticies:v,uvs:f,indicies:M}},e.exports.RenderPlanet=function(e,t,r,s,o,n,i,u,l){var c=dmat4.create(),h=dmat4.create(),d=dmat4.create(),m=dmat4.create();dmat4.rotateX(m,d,-a),dmat4.rotateZ(d,m,s.ra),dmat4.rotateY(m,d,s.obliquity),dmat4.rotateZ(c,m,s.rotation*l+s.rotOffset),dmat4.invert(h,c);var p=dvec3.create();dvec3.scale(p,s.pos,u);var v=dvec3.create();dvec3.sub(v,r.pos,s.pos);var f=dvec3.create();v=dvec3.transformMat4(dvec3.create(),v,h),dvec3.normalize(f,v);var M=dvec3.fromValues(n.matrixCamera[8],n.matrixCamera[9],n.matrixCamera[10]);M=dvec3.transformMat4(dvec3.create(),M,h),c[12]=p[0],c[13]=p[1],c[14]=p[2];var g=dmat4.create();dmat4.mul(g,n.matrixVP,c);for(var x=new Float32Array(16),b=0;b<16;b++)x[b]=g[b];e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.planetImages[s.resources.resource].texture),e.uniform1i(i.u_sampler,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.planetImages[s.resources.resourceSpecular].texture),e.uniform1i(i.u_specular,1),e.uniformMatrix4fv(i.u_mvp,!1,x),e.uniform2f(i.u_size,s.radius*u,s.radius*u),e.uniform3f(i.u_light,f[0],f[1],f[2]),e.uniform1f(i.u_ambient,0),e.uniform3f(i.u_camera,M[0],M[1],M[2]),e.drawElements(e.TRIANGLES,o.numIndicies,e.UNSIGNED_SHORT,0)},e.exports.RenderClouds=function(e,t,r,a,s,o,n){var i=dmat4.create();i[12]=r.pos[0]*n,i[13]=r.pos[1]*n,i[14]=r.pos[2]*n;var u=dmat4.create();dmat4.mul(u,s.matrixVP,i);for(var l=new Float32Array(16),c=0;c<16;c++)l[c]=u[c];var h=dvec3.create();dvec3.sub(h,t.pos,r.pos);var d=dvec3.create();dvec3.normalize(d,h),e.uniformMatrix4fv(o.u_mvp,!1,l),e.uniform2f(o.u_size,(r.radius+r.cloudHeight)*n,(r.radius+r.cloudHeight)*n),e.uniform3f(o.u_light,d[0],d[1],d[2]),e.uniform1f(o.u_ambient,0),e.drawElements(e.TRIANGLES,a.numIndicies,e.UNSIGNED_SHORT,0)},e.exports.RenderAtmosphere=function(e,t,r,a,s,o,n){var i=dmat4.create();i[12]=r.pos[0]*n,i[13]=r.pos[1]*n,i[14]=r.pos[2]*n;var u=dmat4.create();dmat4.mul(u,s.matrixVP,i);for(var l=new Float32Array(16),c=0;c<16;c++)l[c]=u[c];var h=r.atmosphereHeight,d=dvec3.create();dvec3.sub(d,t.pos,r.pos);var m=dvec3.create();dvec3.normalize(m,d),e.uniformMatrix4fv(o.u_mvp,!1,l),e.uniform4fv(o.u_color,r.atmosphere),e.uniform2f(o.u_size,(r.radius+h)*n,(r.radius+h)*n),e.uniform3f(o.u_light,m[0],m[1],m[2]),e.uniform3f(o.u_camera,s.matrixCamera[8],s.matrixCamera[9],s.matrixCamera[10]),e.uniform1f(o.u_ambient,0),e.drawElements(e.TRIANGLES,a.numIndicies,e.UNSIGNED_SHORT,0)},e.exports.RenderAtmosphereHigh=function(e,t,r,a,s,o,n,i){var u=dmat4.create();u[12]=r.pos[0]*n,u[13]=r.pos[1]*n,u[14]=r.pos[2]*n;var l=dmat4.create();dmat4.mul(l,s.matrixVP,u);for(var c=new Float32Array(16),h=0;h<16;h++)c[h]=l[h];var d=r.atmosphereHeight,m=dvec3.create();dvec3.sub(m,t.pos,r.pos);var p=dvec3.create();dvec3.normalize(p,m);var v=dvec3.fromValues((s.matrixCamera[12]-r.pos[0]*n)*i,(s.matrixCamera[13]-r.pos[1]*n)*i,(s.matrixCamera[14]-r.pos[2]*n)*i);e.uniformMatrix4fv(o.u_mvp,!1,c),e.uniform4fv(o.u_color,r.atmosphere),e.uniform2f(o.u_size,(r.radius+d)*n,(r.radius+d)*n),e.uniform3f(o.u_light,p[0],p[1],p[2]),e.uniform3f(o.u_camera,v[0],v[1],v[2]),e.uniform1f(o.u_ambient,0),e.uniform1f(o.u_sunIntensity,10),e.uniform3fv(o.u_rayleighWavelength,r.rayleighWavelength),e.uniform3fv(o.u_mieWavelength,r.mieWavelength),e.uniform1f(o.u_heightScaleRayleigh,r.heightScaleRayleigh),e.uniform1f(o.u_heightScaleMie,r.heightScaleMie),e.uniform1f(o.u_g,r.g);var f=r.radius*n*i,M=f+d*n*i;e.uniform1f(o.u_outerRadius,M),e.uniform1f(o.u_innerRadius,f),e.drawElements(e.TRIANGLES,a.numIndicies,e.UNSIGNED_SHORT,0)},e.exports.RenderRings=function(e,t,r,s,o,n,i,u,l){var c=dmat4.create(),h=dmat4.create(),d=dmat4.create(),m=dmat4.create();dmat4.rotateX(m,d,-a),dmat4.rotateZ(d,m,r.ra),dmat4.rotateY(m,d,r.obliquity),dmat4.rotateZ(c,m,r.rotation*l+r.rotOffset),dmat4.invert(h,c);var p=dvec3.create();dvec3.scale(p,r.pos,u);var v=dvec3.create();dvec3.sub(v,t.pos,r.pos);var f=dvec3.create();v=dvec3.transformMat4(dvec3.create(),v,h),dvec3.normalize(f,v);var M=dvec3.fromValues(n.matrixCamera[8],n.matrixCamera[9],n.matrixCamera[10]);M=dvec3.transformMat4(dvec3.create(),M,h),c[12]=p[0],c[13]=p[1],c[14]=p[2];var g=dmat4.create();dmat4.mul(g,n.matrixVP,c);for(var x=new Float32Array(16),b=0;b<16;b++)x[b]=g[b];e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.texture),e.uniform1i(i.u_color,0);var S=s.radius*u,w=s.start/s.radius;e.uniform1f(i.u_start,w),e.uniform1f(i.u_length,S),e.uniformMatrix4fv(i.u_mvp,!1,x),e.drawArrays(e.TRIANGLE_STRIP,0,4)}}},t={},a=function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}(718);External=a})();